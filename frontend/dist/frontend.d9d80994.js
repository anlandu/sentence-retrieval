parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"wG02":[function(require,module,exports) {

},{}],"NtAQ":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=Object.freeze({});function n(t){return null==t}function r(t){return null!=t}function o(t){return!0===t}function i(t){return!1===t}function a(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function s(t){return null!==t&&"object"==typeof t}var c=Object.prototype.toString;function u(t){return c.call(t).slice(8,-1)}function l(t){return"[object Object]"===c.call(t)}function f(t){return"[object RegExp]"===c.call(t)}function p(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function d(t){return r(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function v(t){return null==t?"":Array.isArray(t)||l(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function h(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var n=Object.create(null),r=t.split(","),o=0;o<r.length;o++)n[r[o]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}var y=m("slot,component",!0),g=m("key,ref,slot,slot-scope,is");function _(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function C(t,e){return b.call(t,e)}function w(t){var e=Object.create(null);return function(n){return e[n]||(e[n]=t(n))}}var $=/-(\w)/g,A=w(function(t){return t.replace($,function(t,e){return e?e.toUpperCase():""})}),x=w(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),O=/\B([A-Z])/g,k=w(function(t){return t.replace(O,"-$1").toLowerCase()});function S(t,e){function n(n){var r=arguments.length;return r?r>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function j(t,e){return t.bind(e)}var E=Function.prototype.bind?j:S;function T(t,e){e=e||0;for(var n=t.length-e,r=new Array(n);n--;)r[n]=t[n+e];return r}function I(t,e){for(var n in e)t[n]=e[n];return t}function D(t){for(var e={},n=0;n<t.length;n++)t[n]&&I(e,t[n]);return e}function N(t,e,n){}var L=function(t,e,n){return!1},P=function(t){return t};function M(t,e){if(t===e)return!0;var n=s(t),r=s(e);if(!n||!r)return!n&&!r&&String(t)===String(e);try{var o=Array.isArray(t),i=Array.isArray(e);if(o&&i)return t.length===e.length&&t.every(function(t,n){return M(t,e[n])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(o||i)return!1;var a=Object.keys(t),c=Object.keys(e);return a.length===c.length&&a.every(function(n){return M(t[n],e[n])})}catch(u){return!1}}function F(t,e){for(var n=0;n<t.length;n++)if(M(t[n],e))return n;return-1}function R(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var H="data-server-rendered",U=["component","directive","filter"],B=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],z={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:L,isReservedAttr:L,isUnknownElement:L,getTagNamespace:N,parsePlatformTagName:P,mustUseProp:L,async:!0,_lifecycleHooks:B},V=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function W(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function q(t,e,n,r){Object.defineProperty(t,e,{value:n,enumerable:!!r,writable:!0,configurable:!0})}var K=new RegExp("[^"+V.source+".$_\\d]");function X(t){if(!K.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var G,Z="__proto__"in{},J="undefined"!=typeof window,Q="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,Y=Q&&WXEnvironment.platform.toLowerCase(),tt=J&&window.navigator.userAgent.toLowerCase(),et=tt&&/msie|trident/.test(tt),nt=tt&&tt.indexOf("msie 9.0")>0,rt=tt&&tt.indexOf("edge/")>0,ot=tt&&tt.indexOf("android")>0||"android"===Y,it=tt&&/iphone|ipad|ipod|ios/.test(tt)||"ios"===Y,at=tt&&/chrome\/\d+/.test(tt)&&!rt,st=tt&&/phantomjs/.test(tt),ct=tt&&tt.match(/firefox\/(\d+)/),ut={}.watch,lt=!1;if(J)try{var ft={};Object.defineProperty(ft,"passive",{get:function(){lt=!0}}),window.addEventListener("test-passive",null,ft)}catch(as){}var pt=function(){return void 0===G&&(G=!J&&!Q&&void 0!==t&&(t.process&&"server"===t.process.env.VUE_ENV)),G},dt=J&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function vt(t){return"function"==typeof t&&/native code/.test(t.toString())}var ht,mt="undefined"!=typeof Symbol&&vt(Symbol)&&"undefined"!=typeof Reflect&&vt(Reflect.ownKeys);ht="undefined"!=typeof Set&&vt(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var yt,gt,_t,bt,Ct=N,wt=N,$t=N,At=N,xt=0,Ot=function(){this.id=xt++,this.subs=[]};Ot.prototype.addSub=function(t){this.subs.push(t)},Ot.prototype.removeSub=function(t){_(this.subs,t)},Ot.prototype.depend=function(){Ot.target&&Ot.target.addDep(this)},Ot.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},Ot.target=null;var kt=[];function St(t){kt.push(t),Ot.target=t}function jt(){kt.pop(),Ot.target=kt[kt.length-1]}var Et=function(t,e,n,r,o,i,a,s){this.tag=t,this.data=e,this.children=n,this.text=r,this.elm=o,this.ns=void 0,this.context=i,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},Tt={child:{configurable:!0}};Tt.child.get=function(){return this.componentInstance},Object.defineProperties(Et.prototype,Tt);var It=function(t){void 0===t&&(t="");var e=new Et;return e.text=t,e.isComment=!0,e};function Dt(t){return new Et(void 0,void 0,void 0,String(t))}function Nt(t){var e=new Et(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var Lt=Array.prototype,Pt=Object.create(Lt),Mt=["push","pop","shift","unshift","splice","sort","reverse"];Mt.forEach(function(t){var e=Lt[t];q(Pt,t,function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];var o,i=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":o=n;break;case"splice":o=n.slice(2)}return o&&a.observeArray(o),a.dep.notify(),i})});var Ft=Object.getOwnPropertyNames(Pt),Rt=!0;function Ht(t){Rt=t}var Ut=function(t){this.value=t,this.dep=new Ot,this.vmCount=0,q(t,"__ob__",this),Array.isArray(t)?(Z?Bt(t,Pt):zt(t,Pt,Ft),this.observeArray(t)):this.walk(t)};function Bt(t,e){t.__proto__=e}function zt(t,e,n){for(var r=0,o=n.length;r<o;r++){var i=n[r];q(t,i,e[i])}}function Vt(t,e){var n;if(s(t)&&!(t instanceof Et))return C(t,"__ob__")&&t.__ob__ instanceof Ut?n=t.__ob__:Rt&&!pt()&&(Array.isArray(t)||l(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Ut(t)),e&&n&&n.vmCount++,n}function Wt(t,e,n,r,o){var i=new Ot,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,c=a&&a.set;s&&!c||2!==arguments.length||(n=t[e]);var u=!o&&Vt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return Ot.target&&(i.depend(),u&&(u.dep.depend(),Array.isArray(e)&&Xt(e))),e},set:function(e){var r=s?s.call(t):n;e===r||e!=e&&r!=r||s&&!c||(c?c.call(t,e):n=e,u=!o&&Vt(e),i.notify())}})}}function qt(t,e,n){if(Array.isArray(t)&&p(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var r=t.__ob__;return t._isVue||r&&r.vmCount?n:r?(Wt(r.value,e,n),r.dep.notify(),n):(t[e]=n,n)}function Kt(t,e){if(Array.isArray(t)&&p(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||C(t,e)&&(delete t[e],n&&n.dep.notify())}}function Xt(t){for(var e=void 0,n=0,r=t.length;n<r;n++)(e=t[n])&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&Xt(e)}Ut.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Wt(t,e[n])},Ut.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)Vt(t[e])};var Gt=z.optionMergeStrategies;function Zt(t,e){if(!e)return t;for(var n,r,o,i=mt?Reflect.ownKeys(e):Object.keys(e),a=0;a<i.length;a++)"__ob__"!==(n=i[a])&&(r=t[n],o=e[n],C(t,n)?r!==o&&l(r)&&l(o)&&Zt(r,o):qt(t,n,o));return t}function Jt(t,e,n){return n?function(){var r="function"==typeof e?e.call(n,n):e,o="function"==typeof t?t.call(n,n):t;return r?Zt(r,o):o}:e?t?function(){return Zt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function Qt(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Yt(n):n}function Yt(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function te(t,e,n,r){var o=Object.create(t||null);return e?I(o,e):o}Gt.data=function(t,e,n){return n?Jt(t,e,n):e&&"function"!=typeof e?t:Jt(t,e)},B.forEach(function(t){Gt[t]=Qt}),U.forEach(function(t){Gt[t+"s"]=te}),Gt.watch=function(t,e,n,r){if(t===ut&&(t=void 0),e===ut&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var o={};for(var i in I(o,t),e){var a=o[i],s=e[i];a&&!Array.isArray(a)&&(a=[a]),o[i]=a?a.concat(s):Array.isArray(s)?s:[s]}return o},Gt.props=Gt.methods=Gt.inject=Gt.computed=function(t,e,n,r){if(!t)return e;var o=Object.create(null);return I(o,t),e&&I(o,e),o},Gt.provide=Jt;var ee=function(t,e){return void 0===e?t:e};function ne(t){for(var e in t.components)re(e)}function re(t){new RegExp("^[a-zA-Z][\\-\\.0-9_"+V.source+"]*$").test(t)||Ct('Invalid component name: "'+t+'". Component names should conform to valid custom element name in html5 specification.'),(y(t)||z.isReservedTag(t))&&Ct("Do not use built-in or reserved HTML elements as component id: "+t)}function oe(t,e){var n=t.props;if(n){var r,o,i={};if(Array.isArray(n))for(r=n.length;r--;)"string"==typeof(o=n[r])&&(i[A(o)]={type:null});else if(l(n))for(var a in n)o=n[a],i[A(a)]=l(o)?o:{type:o};else 0;t.props=i}}function ie(t,e){var n=t.inject;if(n){var r=t.inject={};if(Array.isArray(n))for(var o=0;o<n.length;o++)r[n[o]]={from:n[o]};else if(l(n))for(var i in n){var a=n[i];r[i]=l(a)?I({from:i},a):{from:a}}else 0}}function ae(t){var e=t.directives;if(e)for(var n in e){var r=e[n];"function"==typeof r&&(e[n]={bind:r,update:r})}}function se(t,e,n){l(e)||Ct('Invalid value for option "'+t+'": expected an Object, but got '+u(e)+".",n)}function ce(t,e,n){if("function"==typeof e&&(e=e.options),oe(e,n),ie(e,n),ae(e),!e._base&&(e.extends&&(t=ce(t,e.extends,n)),e.mixins))for(var r=0,o=e.mixins.length;r<o;r++)t=ce(t,e.mixins[r],n);var i,a={};for(i in t)s(i);for(i in e)C(t,i)||s(i);function s(r){var o=Gt[r]||ee;a[r]=o(t[r],e[r],n,r)}return a}function ue(t,e,n,r){if("string"==typeof n){var o=t[e];if(C(o,n))return o[n];var i=A(n);if(C(o,i))return o[i];var a=x(i);if(C(o,a))return o[a];var s=o[n]||o[i]||o[a];return s}}function le(t,e,n,r){var o=e[t],i=!C(n,t),a=n[t],s=ye(Boolean,o.type);if(s>-1)if(i&&!C(o,"default"))a=!1;else if(""===a||a===k(t)){var c=ye(String,o.type);(c<0||s<c)&&(a=!0)}if(void 0===a){a=fe(r,o,t);var u=Rt;Ht(!0),Vt(a),Ht(u)}return a}function fe(t,e,n){if(C(e,"default")){var r=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"==typeof r&&"Function"!==he(e.type)?r.call(t):r}}function pe(t,e,n,r,o){if(t.required&&o)Ct('Missing required prop: "'+e+'"',r);else if(null!=n||t.required){var i=t.type,a=!i||!0===i,s=[];if(i){Array.isArray(i)||(i=[i]);for(var c=0;c<i.length&&!a;c++){var u=ve(n,i[c]);s.push(u.expectedType||""),a=u.valid}}if(a){var l=t.validator;l&&(l(n)||Ct('Invalid prop: custom validator check failed for prop "'+e+'".',r))}else Ct(ge(e,n,s),r)}}var de=/^(String|Number|Boolean|Function|Symbol)$/;function ve(t,e){var n,r=he(e);if(de.test(r)){var o=typeof t;(n=o===r.toLowerCase())||"object"!==o||(n=t instanceof e)}else n="Object"===r?l(t):"Array"===r?Array.isArray(t):t instanceof e;return{valid:n,expectedType:r}}function he(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function me(t,e){return he(t)===he(e)}function ye(t,e){if(!Array.isArray(e))return me(e,t)?0:-1;for(var n=0,r=e.length;n<r;n++)if(me(e[n],t))return n;return-1}function ge(t,e,n){var r='Invalid prop: type check failed for prop "'+t+'". Expected '+n.map(x).join(", "),o=n[0],i=u(e),a=_e(e,o),s=_e(e,i);return 1===n.length&&be(o)&&!Ce(o,i)&&(r+=" with value "+a),r+=", got "+i+" ",be(i)&&(r+="with value "+s+"."),r}function _e(t,e){return"String"===e?'"'+t+'"':"Number"===e?""+Number(t):""+t}function be(t){return["string","number","boolean"].some(function(e){return t.toLowerCase()===e})}function Ce(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return t.some(function(t){return"boolean"===t.toLowerCase()})}function we(t,e,n){St();try{if(e)for(var r=e;r=r.$parent;){var o=r.$options.errorCaptured;if(o)for(var i=0;i<o.length;i++)try{if(!1===o[i].call(r,t,e,n))return}catch(as){Ae(as,r,"errorCaptured hook")}}Ae(t,e,n)}finally{jt()}}function $e(t,e,n,r,o){var i;try{(i=n?t.apply(e,n):t.call(e))&&!i._isVue&&d(i)&&!i._handled&&(i.catch(function(t){return we(t,r,o+" (Promise/async)")}),i._handled=!0)}catch(as){we(as,r,o)}return i}function Ae(t,e,n){if(z.errorHandler)try{return z.errorHandler.call(null,t,e,n)}catch(as){as!==t&&xe(as,null,"config.errorHandler")}xe(t,e,n)}function xe(t,e,n){if(!J&&!Q||"undefined"==typeof console)throw t;console.error(t)}var Oe,ke,Se,je,Ee,Te,Ie,De,Ne,Le=!1,Pe=[],Me=!1;function Fe(){Me=!1;var t=Pe.slice(0);Pe.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!=typeof Promise&&vt(Promise)){var Re=Promise.resolve();Oe=function(){Re.then(Fe),it&&setTimeout(N)},Le=!0}else if(et||"undefined"==typeof MutationObserver||!vt(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())Oe="undefined"!=typeof setImmediate&&vt(setImmediate)?function(){setImmediate(Fe)}:function(){setTimeout(Fe,0)};else{var He=1,Ue=new MutationObserver(Fe),Be=document.createTextNode(String(He));Ue.observe(Be,{characterData:!0}),Oe=function(){He=(He+1)%2,Be.data=String(He)},Le=!0}function ze(t,e){var n;if(Pe.push(function(){if(t)try{t.call(e)}catch(as){we(as,e,"nextTick")}else n&&n(e)}),Me||(Me=!0,Oe()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){n=t})}var Ve,We,qe,Ke=new ht;function Xe(t){Ge(t,Ke),Ke.clear()}function Ge(t,e){var n,r,o=Array.isArray(t);if(!(!o&&!s(t)||Object.isFrozen(t)||t instanceof Et)){if(t.__ob__){var i=t.__ob__.dep.id;if(e.has(i))return;e.add(i)}if(o)for(n=t.length;n--;)Ge(t[n],e);else for(n=(r=Object.keys(t)).length;n--;)Ge(t[r[n]],e)}}var Ze=w(function(t){var e="&"===t.charAt(0),n="~"===(t=e?t.slice(1):t).charAt(0),r="!"===(t=n?t.slice(1):t).charAt(0);return{name:t=r?t.slice(1):t,once:n,capture:r,passive:e}});function Je(t,e){function n(){var t=arguments,r=n.fns;if(!Array.isArray(r))return $e(r,null,arguments,e,"v-on handler");for(var o=r.slice(),i=0;i<o.length;i++)$e(o[i],null,t,e,"v-on handler")}return n.fns=t,n}function Qe(t,e,r,i,a,s){var c,u,l,f;for(c in t)u=t[c],l=e[c],f=Ze(c),n(u)||(n(l)?(n(u.fns)&&(u=t[c]=Je(u,s)),o(f.once)&&(u=t[c]=a(f.name,u,f.capture)),r(f.name,u,f.capture,f.passive,f.params)):u!==l&&(l.fns=u,t[c]=l));for(c in e)n(t[c])&&i((f=Ze(c)).name,e[c],f.capture)}function Ye(t,e,i){var a;t instanceof Et&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function c(){i.apply(this,arguments),_(a.fns,c)}n(s)?a=Je([c]):r(s.fns)&&o(s.merged)?(a=s).fns.push(c):a=Je([s,c]),a.merged=!0,t[e]=a}function tn(t,e,o){var i=e.options.props;if(!n(i)){var a={},s=t.attrs,c=t.props;if(r(s)||r(c))for(var u in i){var l=k(u);en(a,c,u,l,!0)||en(a,s,u,l,!1)}return a}}function en(t,e,n,o,i){if(r(e)){if(C(e,n))return t[n]=e[n],i||delete e[n],!0;if(C(e,o))return t[n]=e[o],i||delete e[o],!0}return!1}function nn(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function rn(t){return a(t)?[Dt(t)]:Array.isArray(t)?an(t):void 0}function on(t){return r(t)&&r(t.text)&&i(t.isComment)}function an(t,e){var i,s,c,u,l=[];for(i=0;i<t.length;i++)n(s=t[i])||"boolean"==typeof s||(u=l[c=l.length-1],Array.isArray(s)?s.length>0&&(on((s=an(s,(e||"")+"_"+i))[0])&&on(u)&&(l[c]=Dt(u.text+s[0].text),s.shift()),l.push.apply(l,s)):a(s)?on(u)?l[c]=Dt(u.text+s):""!==s&&l.push(Dt(s)):on(s)&&on(u)?l[c]=Dt(u.text+s.text):(o(t._isVList)&&r(s.tag)&&n(s.key)&&r(e)&&(s.key="__vlist"+e+"_"+i+"__"),l.push(s)));return l}function sn(t){var e=t.$options.provide;e&&(t._provided="function"==typeof e?e.call(t):e)}function cn(t){var e=un(t.$options.inject,t);e&&(Ht(!1),Object.keys(e).forEach(function(n){Wt(t,n,e[n])}),Ht(!0))}function un(t,e){if(t){for(var n=Object.create(null),r=mt?Reflect.ownKeys(t):Object.keys(t),o=0;o<r.length;o++){var i=r[o];if("__ob__"!==i){for(var a=t[i].from,s=e;s;){if(s._provided&&C(s._provided,a)){n[i]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[i]){var c=t[i].default;n[i]="function"==typeof c?c.call(e):c}else 0}}return n}}function ln(t,e){if(!t||!t.length)return{};for(var n={},r=0,o=t.length;r<o;r++){var i=t[r],a=i.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,i.context!==e&&i.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(i);else{var s=a.slot,c=n[s]||(n[s]=[]);"template"===i.tag?c.push.apply(c,i.children||[]):c.push(i)}}for(var u in n)n[u].every(fn)&&delete n[u];return n}function fn(t){return t.isComment&&!t.asyncFactory||" "===t.text}function pn(t,n,r){var o,i=Object.keys(n).length>0,a=t?!!t.$stable:!i,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&r&&r!==e&&s===r.$key&&!i&&!r.$hasNormal)return r;for(var c in o={},t)t[c]&&"$"!==c[0]&&(o[c]=dn(n,c,t[c]))}else o={};for(var u in n)u in o||(o[u]=vn(n,u));return t&&Object.isExtensible(t)&&(t._normalized=o),q(o,"$stable",a),q(o,"$key",s),q(o,"$hasNormal",i),o}function dn(t,e,n){var r=function(){var t=arguments.length?n.apply(null,arguments):n({});return(t=t&&"object"==typeof t&&!Array.isArray(t)?[t]:rn(t))&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:r,enumerable:!0,configurable:!0}),r}function vn(t,e){return function(){return t[e]}}function hn(t,e){var n,o,i,a,c;if(Array.isArray(t)||"string"==typeof t)for(n=new Array(t.length),o=0,i=t.length;o<i;o++)n[o]=e(t[o],o);else if("number"==typeof t)for(n=new Array(t),o=0;o<t;o++)n[o]=e(o+1,o);else if(s(t))if(mt&&t[Symbol.iterator]){n=[];for(var u=t[Symbol.iterator](),l=u.next();!l.done;)n.push(e(l.value,n.length)),l=u.next()}else for(a=Object.keys(t),n=new Array(a.length),o=0,i=a.length;o<i;o++)c=a[o],n[o]=e(t[c],c,o);return r(n)||(n=[]),n._isVList=!0,n}function mn(t,e,n,r){var o,i=this.$scopedSlots[t];i?(n=n||{},r&&(n=I(I({},r),n)),o=i(n)||e):o=this.$slots[t]||e;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},o):o}function yn(t){return ue(this.$options,"filters",t,!0)||P}function gn(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function _n(t,e,n,r,o){var i=z.keyCodes[e]||n;return o&&r&&!z.keyCodes[e]?gn(o,r):i?gn(i,t):r?k(r)!==e:void 0}function bn(t,e,n,r,o){if(n)if(s(n)){var i;Array.isArray(n)&&(n=D(n));var a=function(a){if("class"===a||"style"===a||g(a))i=t;else{var s=t.attrs&&t.attrs.type;i=r||z.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var c=A(a),u=k(a);c in i||u in i||(i[a]=n[a],o&&((t.on||(t.on={}))["update:"+a]=function(t){n[a]=t}))};for(var c in n)a(c)}else;return t}function Cn(t,e){var n=this._staticTrees||(this._staticTrees=[]),r=n[t];return r&&!e?r:($n(r=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),r)}function wn(t,e,n){return $n(t,"__once__"+e+(n?"_"+n:""),!0),t}function $n(t,e,n){if(Array.isArray(t))for(var r=0;r<t.length;r++)t[r]&&"string"!=typeof t[r]&&An(t[r],e+"_"+r,n);else An(t,e,n)}function An(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function xn(t,e){if(e)if(l(e)){var n=t.on=t.on?I({},t.on):{};for(var r in e){var o=n[r],i=e[r];n[r]=o?[].concat(o,i):i}}else;return t}function On(t,e,n,r){e=e||{$stable:!n};for(var o=0;o<t.length;o++){var i=t[o];Array.isArray(i)?On(i,e,n):i&&(i.proxy&&(i.fn.proxy=!0),e[i.key]=i.fn)}return r&&(e.$key=r),e}function kn(t,e){for(var n=0;n<e.length;n+=2){var r=e[n];"string"==typeof r&&r&&(t[e[n]]=e[n+1])}return t}function Sn(t,e){return"string"==typeof t?e+t:t}function jn(t){t._o=wn,t._n=h,t._s=v,t._l=hn,t._t=mn,t._q=M,t._i=F,t._m=Cn,t._f=yn,t._k=_n,t._b=bn,t._v=Dt,t._e=It,t._u=On,t._g=xn,t._d=kn,t._p=Sn}function En(t,n,r,i,a){var s,c=this,u=a.options;C(i,"_uid")?(s=Object.create(i))._original=i:(s=i,i=i._original);var l=o(u._compiled),f=!l;this.data=t,this.props=n,this.children=r,this.parent=i,this.listeners=t.on||e,this.injections=un(u.inject,i),this.slots=function(){return c.$slots||pn(t.scopedSlots,c.$slots=ln(r,i)),c.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return pn(t.scopedSlots,this.slots())}}),l&&(this.$options=u,this.$slots=this.slots(),this.$scopedSlots=pn(t.scopedSlots,this.$slots)),u._scopeId?this._c=function(t,e,n,r){var o=zn(s,t,e,n,r,f);return o&&!Array.isArray(o)&&(o.fnScopeId=u._scopeId,o.fnContext=i),o}:this._c=function(t,e,n,r){return zn(s,t,e,n,r,f)}}function Tn(t,n,o,i,a){var s=t.options,c={},u=s.props;if(r(u))for(var l in u)c[l]=le(l,u,n||e);else r(o.attrs)&&Dn(c,o.attrs),r(o.props)&&Dn(c,o.props);var f=new En(o,c,a,i,t),p=s.render.call(null,f._c,f);if(p instanceof Et)return In(p,o,f.parent,s,f);if(Array.isArray(p)){for(var d=rn(p)||[],v=new Array(d.length),h=0;h<d.length;h++)v[h]=In(d[h],o,f.parent,s,f);return v}}function In(t,e,n,r,o){var i=Nt(t);return i.fnContext=n,i.fnOptions=r,e.slot&&((i.data||(i.data={})).slot=e.slot),i}function Dn(t,e){for(var n in e)t[A(n)]=e[n]}jn(En.prototype);var Nn={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;Nn.prepatch(n,n)}else{(t.componentInstance=Mn(t,cr)).$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions;vr(e.componentInstance=t.componentInstance,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,gr(n,"mounted")),t.data.keepAlive&&(e._isMounted?Dr(n):mr(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?yr(e,!0):e.$destroy())}},Ln=Object.keys(Nn);function Pn(t,e,i,a,c){if(!n(t)){var u=i.$options._base;if(s(t)&&(t=u.extend(t)),"function"==typeof t){var l;if(n(t.cid)&&void 0===(t=Yn(l=t,u)))return Qn(l,e,i,a,c);e=e||{},no(t),r(e.model)&&Hn(t.options,e);var f=tn(e,t,c);if(o(t.options.functional))return Tn(t,f,e,i,a);var p=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var d=e.slot;e={},d&&(e.slot=d)}Fn(e);var v=t.options.name||c;return new Et("vue-component-"+t.cid+(v?"-"+v:""),e,void 0,void 0,void 0,i,{Ctor:t,propsData:f,listeners:p,tag:c,children:a},l)}}}function Mn(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},o=t.data.inlineTemplate;return r(o)&&(n.render=o.render,n.staticRenderFns=o.staticRenderFns),new t.componentOptions.Ctor(n)}function Fn(t){for(var e=t.hook||(t.hook={}),n=0;n<Ln.length;n++){var r=Ln[n],o=e[r],i=Nn[r];o===i||o&&o._merged||(e[r]=o?Rn(i,o):i)}}function Rn(t,e){var n=function(n,r){t(n,r),e(n,r)};return n._merged=!0,n}function Hn(t,e){var n=t.model&&t.model.prop||"value",o=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var i=e.on||(e.on={}),a=i[o],s=e.model.callback;r(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(i[o]=[s].concat(a)):i[o]=s}var Un=1,Bn=2;function zn(t,e,n,r,i,s){return(Array.isArray(n)||a(n))&&(i=r,r=n,n=void 0),o(s)&&(i=Bn),Vn(t,e,n,r,i)}function Vn(t,e,n,o,i){if(r(n)&&r(n.__ob__))return It();if(r(n)&&r(n.is)&&(e=n.is),!e)return It();var a,s,c;(Array.isArray(o)&&"function"==typeof o[0]&&((n=n||{}).scopedSlots={default:o[0]},o.length=0),i===Bn?o=rn(o):i===Un&&(o=nn(o)),"string"==typeof e)?(s=t.$vnode&&t.$vnode.ns||z.getTagNamespace(e),a=z.isReservedTag(e)?new Et(z.parsePlatformTagName(e),n,o,void 0,void 0,t):n&&n.pre||!r(c=ue(t.$options,"components",e))?new Et(e,n,o,void 0,void 0,t):Pn(c,n,t,o,e)):a=Pn(e,n,t,o);return Array.isArray(a)?a:r(a)?(r(s)&&Wn(a,s),r(n)&&qn(n),a):It()}function Wn(t,e,i){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,i=!0),r(t.children))for(var a=0,s=t.children.length;a<s;a++){var c=t.children[a];r(c.tag)&&(n(c.ns)||o(i)&&"svg"!==c.tag)&&Wn(c,e,i)}}function qn(t){s(t.style)&&Xe(t.style),s(t.class)&&Xe(t.class)}function Kn(t){t._vnode=null,t._staticTrees=null;var n=t.$options,r=t.$vnode=n._parentVnode,o=r&&r.context;t.$slots=ln(n._renderChildren,o),t.$scopedSlots=e,t._c=function(e,n,r,o){return zn(t,e,n,r,o,!1)},t.$createElement=function(e,n,r,o){return zn(t,e,n,r,o,!0)};var i=r&&r.data;Wt(t,"$attrs",i&&i.attrs||e,null,!0),Wt(t,"$listeners",n._parentListeners||e,null,!0)}var Xn,Gn=null;function Zn(t){jn(t.prototype),t.prototype.$nextTick=function(t){return ze(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,r=n.render,o=n._parentVnode;o&&(e.$scopedSlots=pn(o.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=o;try{Gn=e,t=r.call(e._renderProxy,e.$createElement)}catch(as){we(as,e,"render"),t=e._vnode}finally{Gn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof Et||(t=It()),t.parent=o,t}}function Jn(t,e){return(t.__esModule||mt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),s(t)?e.extend(t):t}function Qn(t,e,n,r,o){var i=It();return i.asyncFactory=t,i.asyncMeta={data:e,context:n,children:r,tag:o},i}function Yn(t,e){if(o(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;var i=Gn;if(i&&r(t.owners)&&-1===t.owners.indexOf(i)&&t.owners.push(i),o(t.loading)&&r(t.loadingComp))return t.loadingComp;if(i&&!r(t.owners)){var a=t.owners=[i],c=!0,u=null,l=null;i.$on("hook:destroyed",function(){return _(a,i)});var f=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==u&&(clearTimeout(u),u=null),null!==l&&(clearTimeout(l),l=null))},p=R(function(n){t.resolved=Jn(n,e),c?a.length=0:f(!0)}),v=R(function(e){r(t.errorComp)&&(t.error=!0,f(!0))}),h=t(p,v);return s(h)&&(d(h)?n(t.resolved)&&h.then(p,v):d(h.component)&&(h.component.then(p,v),r(h.error)&&(t.errorComp=Jn(h.error,e)),r(h.loading)&&(t.loadingComp=Jn(h.loading,e),0===h.delay?t.loading=!0:u=setTimeout(function(){u=null,n(t.resolved)&&n(t.error)&&(t.loading=!0,f(!1))},h.delay||200)),r(h.timeout)&&(l=setTimeout(function(){l=null,n(t.resolved)&&v(null)},h.timeout)))),c=!1,t.loading?t.loadingComp:t.resolved}}function tr(t){return t.isComment&&t.asyncFactory}function er(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||tr(n)))return n}}function nr(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&ar(t,e)}function rr(t,e){Xn.$on(t,e)}function or(t,e){Xn.$off(t,e)}function ir(t,e){var n=Xn;return function r(){null!==e.apply(null,arguments)&&n.$off(t,r)}}function ar(t,e,n){Xn=t,Qe(e,n||{},rr,or,ir,t),Xn=void 0}function sr(t){var e=/^hook:/;t.prototype.$on=function(t,n){var r=this;if(Array.isArray(t))for(var o=0,i=t.length;o<i;o++)r.$on(t[o],n);else(r._events[t]||(r._events[t]=[])).push(n),e.test(t)&&(r._hasHookEvent=!0);return r},t.prototype.$once=function(t,e){var n=this;function r(){n.$off(t,r),e.apply(n,arguments)}return r.fn=e,n.$on(t,r),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var r=0,o=t.length;r<o;r++)n.$off(t[r],e);return n}var i,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;for(var s=a.length;s--;)if((i=a[s])===e||i.fn===e){a.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?T(n):n;for(var r=T(arguments,1),o='event handler for "'+t+'"',i=0,a=n.length;i<a;i++)$e(n[i],e,r,e,o)}return e}}var cr=null,ur=!1;function lr(t){var e=cr;return cr=t,function(){cr=e}}function fr(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){for(;n.$options.abstract&&n.$parent;)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function pr(t){t.prototype._update=function(t,e){var n=this,r=n.$el,o=n._vnode,i=lr(n);n._vnode=t,n.$el=o?n.__patch__(o,t):n.__patch__(n.$el,t,e,!1),i(),r&&(r.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){gr(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||_(e.$children,t),t._watcher&&t._watcher.teardown();for(var n=t._watchers.length;n--;)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),gr(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function dr(t,e,n){var r;return t.$el=e,t.$options.render||(t.$options.render=It),gr(t,"beforeMount"),r=function(){t._update(t._render(),n)},new Mr(t,r,N,{before:function(){t._isMounted&&!t._isDestroyed&&gr(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,gr(t,"mounted")),t}function vr(t,n,r,o,i){var a=o.data.scopedSlots,s=t.$scopedSlots,c=!!(a&&!a.$stable||s!==e&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key),u=!!(i||t.$options._renderChildren||c);if(t.$options._parentVnode=o,t.$vnode=o,t._vnode&&(t._vnode.parent=o),t.$options._renderChildren=i,t.$attrs=o.data.attrs||e,t.$listeners=r||e,n&&t.$options.props){Ht(!1);for(var l=t._props,f=t.$options._propKeys||[],p=0;p<f.length;p++){var d=f[p],v=t.$options.props;l[d]=le(d,v,n,t)}Ht(!0),t.$options.propsData=n}r=r||e;var h=t.$options._parentListeners;t.$options._parentListeners=r,ar(t,r,h),u&&(t.$slots=ln(i,o.context),t.$forceUpdate())}function hr(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function mr(t,e){if(e){if(t._directInactive=!1,hr(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)mr(t.$children[n]);gr(t,"activated")}}function yr(t,e){if(!(e&&(t._directInactive=!0,hr(t))||t._inactive)){t._inactive=!0;for(var n=0;n<t.$children.length;n++)yr(t.$children[n]);gr(t,"deactivated")}}function gr(t,e){St();var n=t.$options[e],r=e+" hook";if(n)for(var o=0,i=n.length;o<i;o++)$e(n[o],t,null,t,r);t._hasHookEvent&&t.$emit("hook:"+e),jt()}var _r=100,br=[],Cr=[],wr={},$r={},Ar=!1,xr=!1,Or=0;function kr(){Or=br.length=Cr.length=0,wr={},Ar=xr=!1}var Sr=0,jr=Date.now;if(J&&!et){var Er=window.performance;Er&&"function"==typeof Er.now&&jr()>document.createEvent("Event").timeStamp&&(jr=function(){return Er.now()})}function Tr(){var t,e;for(Sr=jr(),xr=!0,br.sort(function(t,e){return t.id-e.id}),Or=0;Or<br.length;Or++)(t=br[Or]).before&&t.before(),e=t.id,wr[e]=null,t.run();var n=Cr.slice(),r=br.slice();kr(),Nr(n),Ir(r),dt&&z.devtools&&dt.emit("flush")}function Ir(t){for(var e=t.length;e--;){var n=t[e],r=n.vm;r._watcher===n&&r._isMounted&&!r._isDestroyed&&gr(r,"updated")}}function Dr(t){t._inactive=!1,Cr.push(t)}function Nr(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,mr(t[e],!0)}function Lr(t){var e=t.id;if(null==wr[e]){if(wr[e]=!0,xr){for(var n=br.length-1;n>Or&&br[n].id>t.id;)n--;br.splice(n+1,0,t)}else br.push(t);Ar||(Ar=!0,ze(Tr))}}var Pr=0,Mr=function(t,e,n,r,o){this.vm=t,o&&(t._watcher=this),t._watchers.push(this),r?(this.deep=!!r.deep,this.user=!!r.user,this.lazy=!!r.lazy,this.sync=!!r.sync,this.before=r.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++Pr,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ht,this.newDepIds=new ht,this.expression="","function"==typeof e?this.getter=e:(this.getter=X(e),this.getter||(this.getter=N)),this.value=this.lazy?void 0:this.get()};Mr.prototype.get=function(){var t;St(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(as){if(!this.user)throw as;we(as,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Xe(t),jt(),this.cleanupDeps()}return t},Mr.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Mr.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Mr.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():Lr(this)},Mr.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||s(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(as){we(as,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},Mr.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Mr.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Mr.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||_(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var Fr={enumerable:!0,configurable:!0,get:N,set:N};function Rr(t,e,n){Fr.get=function(){return this[e][n]},Fr.set=function(t){this[e][n]=t},Object.defineProperty(t,n,Fr)}function Hr(t){t._watchers=[];var e=t.$options;e.props&&Ur(t,e.props),e.methods&&Gr(t,e.methods),e.data?Br(t):Vt(t._data={},!0),e.computed&&Wr(t,e.computed),e.watch&&e.watch!==ut&&Zr(t,e.watch)}function Ur(t,e){var n=t.$options.propsData||{},r=t._props={},o=t.$options._propKeys=[],i=!t.$parent;i||Ht(!1);var a=function(i){o.push(i);var a=le(i,e,n,t);Wt(r,i,a),i in t||Rr(t,"_props",i)};for(var s in e)a(s);Ht(!0)}function Br(t){var e=t.$options.data;l(e=t._data="function"==typeof e?zr(e,t):e||{})||(e={});for(var n=Object.keys(e),r=t.$options.props,o=(t.$options.methods,n.length);o--;){var i=n[o];0,r&&C(r,i)||W(i)||Rr(t,"_data",i)}Vt(e,!0)}function zr(t,e){St();try{return t.call(e,e)}catch(as){return we(as,e,"data()"),{}}finally{jt()}}var Vr={lazy:!0};function Wr(t,e){var n=t._computedWatchers=Object.create(null),r=pt();for(var o in e){var i=e[o],a="function"==typeof i?i:i.get;0,r||(n[o]=new Mr(t,a||N,N,Vr)),o in t||qr(t,o,i)}}function qr(t,e,n){var r=!pt();"function"==typeof n?(Fr.get=r?Kr(e):Xr(n),Fr.set=N):(Fr.get=n.get?r&&!1!==n.cache?Kr(e):Xr(n.get):N,Fr.set=n.set||N),Object.defineProperty(t,e,Fr)}function Kr(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),Ot.target&&e.depend(),e.value}}function Xr(t){return function(){return t.call(this,this)}}function Gr(t,e){t.$options.props;for(var n in e)t[n]="function"!=typeof e[n]?N:E(e[n],t)}function Zr(t,e){for(var n in e){var r=e[n];if(Array.isArray(r))for(var o=0;o<r.length;o++)Jr(t,n,r[o]);else Jr(t,n,r)}}function Jr(t,e,n,r){return l(n)&&(r=n,n=n.handler),"string"==typeof n&&(n=t[n]),t.$watch(e,n,r)}function Qr(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=qt,t.prototype.$delete=Kt,t.prototype.$watch=function(t,e,n){if(l(e))return Jr(this,t,e,n);(n=n||{}).user=!0;var r=new Mr(this,t,e,n);if(n.immediate)try{e.call(this,r.value)}catch(o){we(o,this,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}var Yr=0;function to(t){t.prototype._init=function(t){var e=this;e._uid=Yr++,e._isVue=!0,t&&t._isComponent?eo(e,t):e.$options=ce(no(e.constructor),t||{},e),e._renderProxy=e,e._self=e,fr(e),nr(e),Kn(e),gr(e,"beforeCreate"),cn(e),Hr(e),sn(e),gr(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function eo(t,e){var n=t.$options=Object.create(t.constructor.options),r=e._parentVnode;n.parent=e.parent,n._parentVnode=r;var o=r.componentOptions;n.propsData=o.propsData,n._parentListeners=o.listeners,n._renderChildren=o.children,n._componentTag=o.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function no(t){var e=t.options;if(t.super){var n=no(t.super);if(n!==t.superOptions){t.superOptions=n;var r=ro(t);r&&I(t.extendOptions,r),(e=t.options=ce(n,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function ro(t){var e,n=t.options,r=t.sealedOptions;for(var o in n)n[o]!==r[o]&&(e||(e={}),e[o]=n[o]);return e}function oo(t){this._init(t)}function io(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=T(arguments,1);return n.unshift(this),"function"==typeof t.install?t.install.apply(t,n):"function"==typeof t&&t.apply(null,n),e.push(t),this}}function ao(t){t.mixin=function(t){return this.options=ce(this.options,t),this}}function so(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,r=n.cid,o=t._Ctor||(t._Ctor={});if(o[r])return o[r];var i=t.name||n.options.name;var a=function(t){this._init(t)};return(a.prototype=Object.create(n.prototype)).constructor=a,a.cid=e++,a.options=ce(n.options,t),a.super=n,a.options.props&&co(a),a.options.computed&&uo(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,U.forEach(function(t){a[t]=n[t]}),i&&(a.options.components[i]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=I({},a.options),o[r]=a,a}}function co(t){var e=t.options.props;for(var n in e)Rr(t.prototype,"_props",n)}function uo(t){var e=t.options.computed;for(var n in e)qr(t.prototype,n,e[n])}function lo(t){U.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&l(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"==typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}function fo(t){return t&&(t.Ctor.options.name||t.tag)}function po(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"==typeof t?t.split(",").indexOf(e)>-1:!!f(t)&&t.test(e)}function vo(t,e){var n=t.cache,r=t.keys,o=t._vnode;for(var i in n){var a=n[i];if(a){var s=fo(a.componentOptions);s&&!e(s)&&ho(n,i,r,o)}}}function ho(t,e,n,r){var o=t[e];!o||r&&o.tag===r.tag||o.componentInstance.$destroy(),t[e]=null,_(n,e)}to(oo),Qr(oo),sr(oo),pr(oo),Zn(oo);var mo=[String,RegExp,Array],yo={name:"keep-alive",abstract:!0,props:{include:mo,exclude:mo,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)ho(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){vo(t,function(t){return po(e,t)})}),this.$watch("exclude",function(e){vo(t,function(t){return!po(e,t)})})},render:function(){var t=this.$slots.default,e=er(t),n=e&&e.componentOptions;if(n){var r=fo(n),o=this.include,i=this.exclude;if(o&&(!r||!po(o,r))||i&&r&&po(i,r))return e;var a=this.cache,s=this.keys,c=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;a[c]?(e.componentInstance=a[c].componentInstance,_(s,c),s.push(c)):(a[c]=e,s.push(c),this.max&&s.length>parseInt(this.max)&&ho(a,s[0],s,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},go={KeepAlive:yo};function _o(t){var e={get:function(){return z}};Object.defineProperty(t,"config",e),t.util={warn:Ct,extend:I,mergeOptions:ce,defineReactive:Wt},t.set=qt,t.delete=Kt,t.nextTick=ze,t.observable=function(t){return Vt(t),t},t.options=Object.create(null),U.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,I(t.options.components,go),io(t),ao(t),so(t),lo(t)}_o(oo),Object.defineProperty(oo.prototype,"$isServer",{get:pt}),Object.defineProperty(oo.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(oo,"FunctionalRenderContext",{value:En}),oo.version="2.6.11";var bo=m("style,class"),Co=m("input,textarea,option,select,progress"),wo=function(t,e,n){return"value"===n&&Co(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},$o=m("contenteditable,draggable,spellcheck"),Ao=m("events,caret,typing,plaintext-only"),xo=function(t,e){return Eo(e)||"false"===e?"false":"contenteditable"===t&&Ao(e)?e:"true"},Oo=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),ko="http://www.w3.org/1999/xlink",So=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},jo=function(t){return So(t)?t.slice(6,t.length):""},Eo=function(t){return null==t||!1===t};function To(t){for(var e=t.data,n=t,o=t;r(o.componentInstance);)(o=o.componentInstance._vnode)&&o.data&&(e=Io(o.data,e));for(;r(n=n.parent);)n&&n.data&&(e=Io(e,n.data));return Do(e.staticClass,e.class)}function Io(t,e){return{staticClass:No(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function Do(t,e){return r(t)||r(e)?No(t,Lo(e)):""}function No(t,e){return t?e?t+" "+e:t:e||""}function Lo(t){return Array.isArray(t)?Po(t):s(t)?Mo(t):"string"==typeof t?t:""}function Po(t){for(var e,n="",o=0,i=t.length;o<i;o++)r(e=Lo(t[o]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function Mo(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var Fo={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Ro=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ho=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Uo=function(t){return Ro(t)||Ho(t)};function Bo(t){return Ho(t)?"svg":"math"===t?"math":void 0}var zo=Object.create(null);function Vo(t){if(!J)return!0;if(Uo(t))return!1;if(t=t.toLowerCase(),null!=zo[t])return zo[t];var e=document.createElement(t);return t.indexOf("-")>-1?zo[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:zo[t]=/HTMLUnknownElement/.test(e.toString())}var Wo=m("text,number,password,search,email,tel,url");function qo(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function Ko(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function Xo(t,e){return document.createElementNS(Fo[t],e)}function Go(t){return document.createTextNode(t)}function Zo(t){return document.createComment(t)}function Jo(t,e,n){t.insertBefore(e,n)}function Qo(t,e){t.removeChild(e)}function Yo(t,e){t.appendChild(e)}function ti(t){return t.parentNode}function ei(t){return t.nextSibling}function ni(t){return t.tagName}function ri(t,e){t.textContent=e}function oi(t,e){t.setAttribute(e,"")}var ii=Object.freeze({createElement:Ko,createElementNS:Xo,createTextNode:Go,createComment:Zo,insertBefore:Jo,removeChild:Qo,appendChild:Yo,parentNode:ti,nextSibling:ei,tagName:ni,setTextContent:ri,setStyleScope:oi}),ai={create:function(t,e){si(e)},update:function(t,e){t.data.ref!==e.data.ref&&(si(t,!0),si(e))},destroy:function(t){si(t,!0)}};function si(t,e){var n=t.data.ref;if(r(n)){var o=t.context,i=t.componentInstance||t.elm,a=o.$refs;e?Array.isArray(a[n])?_(a[n],i):a[n]===i&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(i)<0&&a[n].push(i):a[n]=[i]:a[n]=i}}var ci=new Et("",{},[]),ui=["create","activate","update","remove","destroy"];function li(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&fi(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&n(e.asyncFactory.error))}function fi(t,e){if("input"!==t.tag)return!0;var n,o=r(n=t.data)&&r(n=n.attrs)&&n.type,i=r(n=e.data)&&r(n=n.attrs)&&n.type;return o===i||Wo(o)&&Wo(i)}function pi(t,e,n){var o,i,a={};for(o=e;o<=n;++o)r(i=t[o].key)&&(a[i]=o);return a}function di(t){var e,i,s={},c=t.modules,u=t.nodeOps;for(e=0;e<ui.length;++e)for(s[ui[e]]=[],i=0;i<c.length;++i)r(c[i][ui[e]])&&s[ui[e]].push(c[i][ui[e]]);function l(t){var e=u.parentNode(t);r(e)&&u.removeChild(e,t)}function f(t,e,n,i,a,c,l){if(r(t.elm)&&r(c)&&(t=c[l]=Nt(t)),t.isRootInsert=!a,!function(t,e,n,i){var a=t.data;if(r(a)){var c=r(t.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(t,!1),r(t.componentInstance))return p(t,e),d(n,t.elm,i),o(c)&&function(t,e,n,o){var i,a=t;for(;a.componentInstance;)if(a=a.componentInstance._vnode,r(i=a.data)&&r(i=i.transition)){for(i=0;i<s.activate.length;++i)s.activate[i](ci,a);e.push(a);break}d(n,t.elm,o)}(t,e,n,i),!0}}(t,e,n,i)){var f=t.data,h=t.children,m=t.tag;r(m)?(t.elm=t.ns?u.createElementNS(t.ns,m):u.createElement(m,t),g(t),v(t,h,e),r(f)&&y(t,e),d(n,t.elm,i)):o(t.isComment)?(t.elm=u.createComment(t.text),d(n,t.elm,i)):(t.elm=u.createTextNode(t.text),d(n,t.elm,i))}}function p(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,h(t)?(y(t,e),g(t)):(si(t),e.push(t))}function d(t,e,n){r(t)&&(r(n)?u.parentNode(n)===t&&u.insertBefore(t,e,n):u.appendChild(t,e))}function v(t,e,n){if(Array.isArray(e)){0;for(var r=0;r<e.length;++r)f(e[r],n,t.elm,null,!0,e,r)}else a(t.text)&&u.appendChild(t.elm,u.createTextNode(String(t.text)))}function h(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return r(t.tag)}function y(t,n){for(var o=0;o<s.create.length;++o)s.create[o](ci,t);r(e=t.data.hook)&&(r(e.create)&&e.create(ci,t),r(e.insert)&&n.push(t))}function g(t){var e;if(r(e=t.fnScopeId))u.setStyleScope(t.elm,e);else for(var n=t;n;)r(e=n.context)&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e),n=n.parent;r(e=cr)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&u.setStyleScope(t.elm,e)}function _(t,e,n,r,o,i){for(;r<=o;++r)f(n[r],i,t,e,!1,n,r)}function b(t){var e,n,o=t.data;if(r(o))for(r(e=o.hook)&&r(e=e.destroy)&&e(t),e=0;e<s.destroy.length;++e)s.destroy[e](t);if(r(e=t.children))for(n=0;n<t.children.length;++n)b(t.children[n])}function C(t,e,n){for(;e<=n;++e){var o=t[e];r(o)&&(r(o.tag)?(w(o),b(o)):l(o.elm))}}function w(t,e){if(r(e)||r(t.data)){var n,o=s.remove.length+1;for(r(e)?e.listeners+=o:e=function(t,e){function n(){0==--n.listeners&&l(t)}return n.listeners=e,n}(t.elm,o),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&w(n,e),n=0;n<s.remove.length;++n)s.remove[n](t,e);r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else l(t.elm)}function $(t,e,n,o){for(var i=n;i<o;i++){var a=e[i];if(r(a)&&li(t,a))return i}}function A(t,e,i,a,c,l){if(t!==e){r(e.elm)&&r(a)&&(e=a[c]=Nt(e));var p=e.elm=t.elm;if(o(t.isAsyncPlaceholder))r(e.asyncFactory.resolved)?k(t.elm,e,i):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var d,v=e.data;r(v)&&r(d=v.hook)&&r(d=d.prepatch)&&d(t,e);var m=t.children,y=e.children;if(r(v)&&h(e)){for(d=0;d<s.update.length;++d)s.update[d](t,e);r(d=v.hook)&&r(d=d.update)&&d(t,e)}n(e.text)?r(m)&&r(y)?m!==y&&function(t,e,o,i,a){var s,c,l,p=0,d=0,v=e.length-1,h=e[0],m=e[v],y=o.length-1,g=o[0],b=o[y],w=!a;for(;p<=v&&d<=y;)n(h)?h=e[++p]:n(m)?m=e[--v]:li(h,g)?(A(h,g,i,o,d),h=e[++p],g=o[++d]):li(m,b)?(A(m,b,i,o,y),m=e[--v],b=o[--y]):li(h,b)?(A(h,b,i,o,y),w&&u.insertBefore(t,h.elm,u.nextSibling(m.elm)),h=e[++p],b=o[--y]):li(m,g)?(A(m,g,i,o,d),w&&u.insertBefore(t,m.elm,h.elm),m=e[--v],g=o[++d]):(n(s)&&(s=pi(e,p,v)),n(c=r(g.key)?s[g.key]:$(g,e,p,v))?f(g,i,t,h.elm,!1,o,d):li(l=e[c],g)?(A(l,g,i,o,d),e[c]=void 0,w&&u.insertBefore(t,l.elm,h.elm)):f(g,i,t,h.elm,!1,o,d),g=o[++d]);p>v?_(t,n(o[y+1])?null:o[y+1].elm,o,d,y,i):d>y&&C(e,p,v)}(p,m,y,i,l):r(y)?(r(t.text)&&u.setTextContent(p,""),_(p,null,y,0,y.length-1,i)):r(m)?C(m,0,m.length-1):r(t.text)&&u.setTextContent(p,""):t.text!==e.text&&u.setTextContent(p,e.text),r(v)&&r(d=v.hook)&&r(d=d.postpatch)&&d(t,e)}}}function x(t,e,n){if(o(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var O=m("attrs,class,staticClass,staticStyle,key");function k(t,e,n,i){var a,s=e.tag,c=e.data,u=e.children;if(i=i||c&&c.pre,e.elm=t,o(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(c)&&(r(a=c.hook)&&r(a=a.init)&&a(e,!0),r(a=e.componentInstance)))return p(e,n),!0;if(r(s)){if(r(u))if(t.hasChildNodes())if(r(a=c)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var l=!0,f=t.firstChild,d=0;d<u.length;d++){if(!f||!k(f,u[d],n,i)){l=!1;break}f=f.nextSibling}if(!l||f)return!1}else v(e,u,n);if(r(c)){var h=!1;for(var m in c)if(!O(m)){h=!0,y(e,n);break}!h&&c.class&&Xe(c.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,i,a){if(!n(e)){var c,l=!1,p=[];if(n(t))l=!0,f(e,p);else{var d=r(t.nodeType);if(!d&&li(t,e))A(t,e,p,null,null,a);else{if(d){if(1===t.nodeType&&t.hasAttribute(H)&&(t.removeAttribute(H),i=!0),o(i)&&k(t,e,p))return x(e,p,!0),t;c=t,t=new Et(u.tagName(c).toLowerCase(),{},[],void 0,c)}var v=t.elm,m=u.parentNode(v);if(f(e,p,v._leaveCb?null:m,u.nextSibling(v)),r(e.parent))for(var y=e.parent,g=h(e);y;){for(var _=0;_<s.destroy.length;++_)s.destroy[_](y);if(y.elm=e.elm,g){for(var w=0;w<s.create.length;++w)s.create[w](ci,y);var $=y.data.hook.insert;if($.merged)for(var O=1;O<$.fns.length;O++)$.fns[O]()}else si(y);y=y.parent}r(m)?C([t],0,0):r(t.tag)&&b(t)}}return x(e,p,l),e.elm}r(t)&&b(t)}}var vi={create:hi,update:hi,destroy:function(t){hi(t,ci)}};function hi(t,e){(t.data.directives||e.data.directives)&&mi(t,e)}function mi(t,e){var n,r,o,i=t===ci,a=e===ci,s=gi(t.data.directives,t.context),c=gi(e.data.directives,e.context),u=[],l=[];for(n in c)r=s[n],o=c[n],r?(o.oldValue=r.value,o.oldArg=r.arg,bi(o,"update",e,t),o.def&&o.def.componentUpdated&&l.push(o)):(bi(o,"bind",e,t),o.def&&o.def.inserted&&u.push(o));if(u.length){var f=function(){for(var n=0;n<u.length;n++)bi(u[n],"inserted",e,t)};i?Ye(e,"insert",f):f()}if(l.length&&Ye(e,"postpatch",function(){for(var n=0;n<l.length;n++)bi(l[n],"componentUpdated",e,t)}),!i)for(n in s)c[n]||bi(s[n],"unbind",t,t,a)}var yi=Object.create(null);function gi(t,e){var n,r,o=Object.create(null);if(!t)return o;for(n=0;n<t.length;n++)(r=t[n]).modifiers||(r.modifiers=yi),o[_i(r)]=r,r.def=ue(e.$options,"directives",r.name,!0);return o}function _i(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function bi(t,e,n,r,o){var i=t.def&&t.def[e];if(i)try{i(n.elm,t,n,r,o)}catch(as){we(as,n.context,"directive "+t.name+" "+e+" hook")}}var Ci=[ai,vi];function wi(t,e){var o=e.componentOptions;if(!(r(o)&&!1===o.Ctor.options.inheritAttrs||n(t.data.attrs)&&n(e.data.attrs))){var i,a,s=e.elm,c=t.data.attrs||{},u=e.data.attrs||{};for(i in r(u.__ob__)&&(u=e.data.attrs=I({},u)),u)a=u[i],c[i]!==a&&$i(s,i,a);for(i in(et||rt)&&u.value!==c.value&&$i(s,"value",u.value),c)n(u[i])&&(So(i)?s.removeAttributeNS(ko,jo(i)):$o(i)||s.removeAttribute(i))}}function $i(t,e,n){t.tagName.indexOf("-")>-1?Ai(t,e,n):Oo(e)?Eo(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):$o(e)?t.setAttribute(e,xo(e,n)):So(e)?Eo(n)?t.removeAttributeNS(ko,jo(e)):t.setAttributeNS(ko,e,n):Ai(t,e,n)}function Ai(t,e,n){if(Eo(n))t.removeAttribute(e);else{if(et&&!nt&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var r=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",r)};t.addEventListener("input",r),t.__ieph=!0}t.setAttribute(e,n)}}var xi={create:wi,update:wi};function Oi(t,e){var o=e.elm,i=e.data,a=t.data;if(!(n(i.staticClass)&&n(i.class)&&(n(a)||n(a.staticClass)&&n(a.class)))){var s=To(e),c=o._transitionClasses;r(c)&&(s=No(s,Lo(c))),s!==o._prevClass&&(o.setAttribute("class",s),o._prevClass=s)}}var ki,Si={create:Oi,update:Oi},ji="__r",Ei="__c";function Ti(t){if(r(t[ji])){var e=et?"change":"input";t[e]=[].concat(t[ji],t[e]||[]),delete t[ji]}r(t[Ei])&&(t.change=[].concat(t[Ei],t.change||[]),delete t[Ei])}function Ii(t,e,n){var r=ki;return function o(){null!==e.apply(null,arguments)&&Li(t,o,n,r)}}var Di=Le&&!(ct&&Number(ct[1])<=53);function Ni(t,e,n,r){if(Di){var o=Sr,i=e;e=i._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=o||t.timeStamp<=0||t.target.ownerDocument!==document)return i.apply(this,arguments)}}ki.addEventListener(t,e,lt?{capture:n,passive:r}:n)}function Li(t,e,n,r){(r||ki).removeEventListener(t,e._wrapper||e,n)}function Pi(t,e){if(!n(t.data.on)||!n(e.data.on)){var r=e.data.on||{},o=t.data.on||{};ki=e.elm,Ti(r),Qe(r,o,Ni,Li,Ii,e.context),ki=void 0}}var Mi,Fi={create:Pi,update:Pi};function Ri(t,e){if(!n(t.data.domProps)||!n(e.data.domProps)){var o,i,a=e.elm,s=t.data.domProps||{},c=e.data.domProps||{};for(o in r(c.__ob__)&&(c=e.data.domProps=I({},c)),s)o in c||(a[o]="");for(o in c){if(i=c[o],"textContent"===o||"innerHTML"===o){if(e.children&&(e.children.length=0),i===s[o])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===o&&"PROGRESS"!==a.tagName){a._value=i;var u=n(i)?"":String(i);Hi(a,u)&&(a.value=u)}else if("innerHTML"===o&&Ho(a.tagName)&&n(a.innerHTML)){(Mi=Mi||document.createElement("div")).innerHTML="<svg>"+i+"</svg>";for(var l=Mi.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;l.firstChild;)a.appendChild(l.firstChild)}else if(i!==s[o])try{a[o]=i}catch(as){}}}}function Hi(t,e){return!t.composing&&("OPTION"===t.tagName||Ui(t,e)||Bi(t,e))}function Ui(t,e){var n=!0;try{n=document.activeElement!==t}catch(as){}return n&&t.value!==e}function Bi(t,e){var n=t.value,o=t._vModifiers;if(r(o)){if(o.number)return h(n)!==h(e);if(o.trim)return n.trim()!==e.trim()}return n!==e}var zi={create:Ri,update:Ri},Vi=w(function(t){var e={},n=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var r=t.split(n);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e});function Wi(t){var e=qi(t.style);return t.staticStyle?I(t.staticStyle,e):e}function qi(t){return Array.isArray(t)?D(t):"string"==typeof t?Vi(t):t}function Ki(t,e){var n,r={};if(e)for(var o=t;o.componentInstance;)(o=o.componentInstance._vnode)&&o.data&&(n=Wi(o.data))&&I(r,n);(n=Wi(t.data))&&I(r,n);for(var i=t;i=i.parent;)i.data&&(n=Wi(i.data))&&I(r,n);return r}var Xi,Gi=/^--/,Zi=/\s*!important$/,Ji=function(t,e,n){if(Gi.test(e))t.style.setProperty(e,n);else if(Zi.test(n))t.style.setProperty(k(e),n.replace(Zi,""),"important");else{var r=Yi(e);if(Array.isArray(n))for(var o=0,i=n.length;o<i;o++)t.style[r]=n[o];else t.style[r]=n}},Qi=["Webkit","Moz","ms"],Yi=w(function(t){if(Xi=Xi||document.createElement("div").style,"filter"!==(t=A(t))&&t in Xi)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<Qi.length;n++){var r=Qi[n]+e;if(r in Xi)return r}});function ta(t,e){var o=e.data,i=t.data;if(!(n(o.staticStyle)&&n(o.style)&&n(i.staticStyle)&&n(i.style))){var a,s,c=e.elm,u=i.staticStyle,l=i.normalizedStyle||i.style||{},f=u||l,p=qi(e.data.style)||{};e.data.normalizedStyle=r(p.__ob__)?I({},p):p;var d=Ki(e,!0);for(s in f)n(d[s])&&Ji(c,s,"");for(s in d)(a=d[s])!==f[s]&&Ji(c,s,null==a?"":a)}}var ea={create:ta,update:ta},na=/\s+/;function ra(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(na).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function oa(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(na).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",r=" "+e+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}function ia(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&I(e,aa(t.name||"v")),I(e,t),e}return"string"==typeof t?aa(t):void 0}}var aa=w(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),sa=J&&!nt,ca="transition",ua="animation",la="transition",fa="transitionend",pa="animation",da="animationend";sa&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(la="WebkitTransition",fa="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(pa="WebkitAnimation",da="webkitAnimationEnd"));var va=J?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function ha(t){va(function(){va(t)})}function ma(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),ra(t,e))}function ya(t,e){t._transitionClasses&&_(t._transitionClasses,e),oa(t,e)}function ga(t,e,n){var r=ba(t,e),o=r.type,i=r.timeout,a=r.propCount;if(!o)return n();var s=o===ca?fa:da,c=0,u=function(){t.removeEventListener(s,l),n()},l=function(e){e.target===t&&++c>=a&&u()};setTimeout(function(){c<a&&u()},i+1),t.addEventListener(s,l)}var _a=/\b(transform|all)(,|$)/;function ba(t,e){var n,r=window.getComputedStyle(t),o=(r[la+"Delay"]||"").split(", "),i=(r[la+"Duration"]||"").split(", "),a=Ca(o,i),s=(r[pa+"Delay"]||"").split(", "),c=(r[pa+"Duration"]||"").split(", "),u=Ca(s,c),l=0,f=0;return e===ca?a>0&&(n=ca,l=a,f=i.length):e===ua?u>0&&(n=ua,l=u,f=c.length):f=(n=(l=Math.max(a,u))>0?a>u?ca:ua:null)?n===ca?i.length:c.length:0,{type:n,timeout:l,propCount:f,hasTransform:n===ca&&_a.test(r[la+"Property"])}}function Ca(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return wa(e)+wa(t[n])}))}function wa(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function $a(t,e){var o=t.elm;r(o._leaveCb)&&(o._leaveCb.cancelled=!0,o._leaveCb());var i=ia(t.data.transition);if(!n(i)&&!r(o._enterCb)&&1===o.nodeType){for(var a=i.css,c=i.type,u=i.enterClass,l=i.enterToClass,f=i.enterActiveClass,p=i.appearClass,d=i.appearToClass,v=i.appearActiveClass,m=i.beforeEnter,y=i.enter,g=i.afterEnter,_=i.enterCancelled,b=i.beforeAppear,C=i.appear,w=i.afterAppear,$=i.appearCancelled,A=i.duration,x=cr,O=cr.$vnode;O&&O.parent;)x=O.context,O=O.parent;var k=!x._isMounted||!t.isRootInsert;if(!k||C||""===C){var S=k&&p?p:u,j=k&&v?v:f,E=k&&d?d:l,T=k&&b||m,I=k&&"function"==typeof C?C:y,D=k&&w||g,N=k&&$||_,L=h(s(A)?A.enter:A);0;var P=!1!==a&&!nt,M=ka(I),F=o._enterCb=R(function(){P&&(ya(o,E),ya(o,j)),F.cancelled?(P&&ya(o,S),N&&N(o)):D&&D(o),o._enterCb=null});t.data.show||Ye(t,"insert",function(){var e=o.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),I&&I(o,F)}),T&&T(o),P&&(ma(o,S),ma(o,j),ha(function(){ya(o,S),F.cancelled||(ma(o,E),M||(Oa(L)?setTimeout(F,L):ga(o,c,F)))})),t.data.show&&(e&&e(),I&&I(o,F)),P||M||F()}}}function Aa(t,e){var o=t.elm;r(o._enterCb)&&(o._enterCb.cancelled=!0,o._enterCb());var i=ia(t.data.transition);if(n(i)||1!==o.nodeType)return e();if(!r(o._leaveCb)){var a=i.css,c=i.type,u=i.leaveClass,l=i.leaveToClass,f=i.leaveActiveClass,p=i.beforeLeave,d=i.leave,v=i.afterLeave,m=i.leaveCancelled,y=i.delayLeave,g=i.duration,_=!1!==a&&!nt,b=ka(d),C=h(s(g)?g.leave:g);0;var w=o._leaveCb=R(function(){o.parentNode&&o.parentNode._pending&&(o.parentNode._pending[t.key]=null),_&&(ya(o,l),ya(o,f)),w.cancelled?(_&&ya(o,u),m&&m(o)):(e(),v&&v(o)),o._leaveCb=null});y?y($):$()}function $(){w.cancelled||(!t.data.show&&o.parentNode&&((o.parentNode._pending||(o.parentNode._pending={}))[t.key]=t),p&&p(o),_&&(ma(o,u),ma(o,f),ha(function(){ya(o,u),w.cancelled||(ma(o,l),b||(Oa(C)?setTimeout(w,C):ga(o,c,w)))})),d&&d(o,w),_||b||w())}}function xa(t,e,n){"number"!=typeof t?Ct("<transition> explicit "+e+" duration is not a valid number - got "+JSON.stringify(t)+".",n.context):isNaN(t)&&Ct("<transition> explicit "+e+" duration is NaN - the duration expression might be incorrect.",n.context)}function Oa(t){return"number"==typeof t&&!isNaN(t)}function ka(t){if(n(t))return!1;var e=t.fns;return r(e)?ka(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function Sa(t,e){!0!==e.data.show&&$a(e)}var ja=J?{create:Sa,activate:Sa,remove:function(t,e){!0!==t.data.show?Aa(t,e):e()}}:{},Ea=[xi,Si,Fi,zi,ea,ja],Ta=Ea.concat(Ci),Ia=di({nodeOps:ii,modules:Ta});nt&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Ha(t,"input")});var Da={inserted:function(t,e,n,r){"select"===n.tag?(r.elm&&!r.elm._vOptions?Ye(n,"postpatch",function(){Da.componentUpdated(t,e,n)}):Na(t,e,n.context),t._vOptions=[].map.call(t.options,Ma)):("textarea"===n.tag||Wo(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Fa),t.addEventListener("compositionend",Ra),t.addEventListener("change",Ra),nt&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Na(t,e,n.context);var r=t._vOptions,o=t._vOptions=[].map.call(t.options,Ma);if(o.some(function(t,e){return!M(t,r[e])}))(t.multiple?e.value.some(function(t){return Pa(t,o)}):e.value!==e.oldValue&&Pa(e.value,o))&&Ha(t,"change")}}};function Na(t,e,n){La(t,e,n),(et||rt)&&setTimeout(function(){La(t,e,n)},0)}function La(t,e,n){var r=e.value,o=t.multiple;if(!o||Array.isArray(r)){for(var i,a,s=0,c=t.options.length;s<c;s++)if(a=t.options[s],o)i=F(r,Ma(a))>-1,a.selected!==i&&(a.selected=i);else if(M(Ma(a),r))return void(t.selectedIndex!==s&&(t.selectedIndex=s));o||(t.selectedIndex=-1)}}function Pa(t,e){return e.every(function(e){return!M(e,t)})}function Ma(t){return"_value"in t?t._value:t.value}function Fa(t){t.target.composing=!0}function Ra(t){t.target.composing&&(t.target.composing=!1,Ha(t.target,"input"))}function Ha(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function Ua(t){return!t.componentInstance||t.data&&t.data.transition?t:Ua(t.componentInstance._vnode)}var Ba={bind:function(t,e,n){var r=e.value,o=(n=Ua(n)).data&&n.data.transition,i=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;r&&o?(n.data.show=!0,$a(n,function(){t.style.display=i})):t.style.display=r?i:"none"},update:function(t,e,n){var r=e.value;!r!=!e.oldValue&&((n=Ua(n)).data&&n.data.transition?(n.data.show=!0,r?$a(n,function(){t.style.display=t.__vOriginalDisplay}):Aa(n,function(){t.style.display="none"})):t.style.display=r?t.__vOriginalDisplay:"none")},unbind:function(t,e,n,r,o){o||(t.style.display=t.__vOriginalDisplay)}},za={model:Da,show:Ba},Va={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Wa(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Wa(er(e.children)):t}function qa(t){var e={},n=t.$options;for(var r in n.propsData)e[r]=t[r];var o=n._parentListeners;for(var i in o)e[A(i)]=o[i];return e}function Ka(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function Xa(t){for(;t=t.parent;)if(t.data.transition)return!0}function Ga(t,e){return e.key===t.key&&e.tag===t.tag}var Za=function(t){return t.tag||tr(t)},Ja=function(t){return"show"===t.name},Qa={name:"transition",props:Va,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(Za)).length){0;var r=this.mode;0;var o=n[0];if(Xa(this.$vnode))return o;var i=Wa(o);if(!i)return o;if(this._leaving)return Ka(t,o);var s="__transition-"+this._uid+"-";i.key=null==i.key?i.isComment?s+"comment":s+i.tag:a(i.key)?0===String(i.key).indexOf(s)?i.key:s+i.key:i.key;var c=(i.data||(i.data={})).transition=qa(this),u=this._vnode,l=Wa(u);if(i.data.directives&&i.data.directives.some(Ja)&&(i.data.show=!0),l&&l.data&&!Ga(i,l)&&!tr(l)&&(!l.componentInstance||!l.componentInstance._vnode.isComment)){var f=l.data.transition=I({},c);if("out-in"===r)return this._leaving=!0,Ye(f,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Ka(t,o);if("in-out"===r){if(tr(i))return u;var p,d=function(){p()};Ye(c,"afterEnter",d),Ye(c,"enterCancelled",d),Ye(f,"delayLeave",function(t){p=t})}}return o}}},Ya=I({tag:String,moveClass:String},Va);delete Ya.mode;var ts={props:Ya,beforeMount:function(){var t=this,e=this._update;this._update=function(n,r){var o=lr(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,o(),e.call(t,n,r)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),r=this.prevChildren=this.children,o=this.$slots.default||[],i=this.children=[],a=qa(this),s=0;s<o.length;s++){var c=o[s];if(c.tag)if(null!=c.key&&0!==String(c.key).indexOf("__vlist"))i.push(c),n[c.key]=c,(c.data||(c.data={})).transition=a;else;}if(r){for(var u=[],l=[],f=0;f<r.length;f++){var p=r[f];p.data.transition=a,p.data.pos=p.elm.getBoundingClientRect(),n[p.key]?u.push(p):l.push(p)}this.kept=t(e,null,u),this.removed=l}return t(e,null,i)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(es),t.forEach(ns),t.forEach(rs),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,r=n.style;ma(n,e),r.transform=r.WebkitTransform=r.transitionDuration="",n.addEventListener(fa,n._moveCb=function t(r){r&&r.target!==n||r&&!/transform$/.test(r.propertyName)||(n.removeEventListener(fa,t),n._moveCb=null,ya(n,e))})}}))},methods:{hasMove:function(t,e){if(!sa)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){oa(n,t)}),ra(n,e),n.style.display="none",this.$el.appendChild(n);var r=ba(n);return this.$el.removeChild(n),this._hasMove=r.hasTransform}}};function es(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function ns(t){t.data.newPos=t.elm.getBoundingClientRect()}function rs(t){var e=t.data.pos,n=t.data.newPos,r=e.left-n.left,o=e.top-n.top;if(r||o){t.data.moved=!0;var i=t.elm.style;i.transform=i.WebkitTransform="translate("+r+"px,"+o+"px)",i.transitionDuration="0s"}}var os={Transition:Qa,TransitionGroup:ts};oo.config.mustUseProp=wo,oo.config.isReservedTag=Uo,oo.config.isReservedAttr=bo,oo.config.getTagNamespace=Bo,oo.config.isUnknownElement=Vo,I(oo.options.directives,za),I(oo.options.components,os),oo.prototype.__patch__=J?Ia:N,oo.prototype.$mount=function(t,e){return dr(this,t=t&&J?qo(t):void 0,e)},J&&setTimeout(function(){z.devtools&&dt&&dt.emit("init",oo)},0);var is=oo;exports.default=is;
},{}],"zVnv":[function(require,module,exports) {
"use strict";function t(t){this.content=t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,t.prototype={constructor:t,find:function(t){for(var n=0;n<this.content.length;n+=2)if(this.content[n]===t)return n;return-1},get:function(t){var n=this.find(t);return-1==n?void 0:this.content[n+1]},update:function(n,e,r){var o=r&&r!=n?this.remove(r):this,i=o.find(n),c=o.content.slice();return-1==i?c.push(r||n,e):(c[i+1]=e,r&&(c[i]=r)),new t(c)},remove:function(n){var e=this.find(n);if(-1==e)return this;var r=this.content.slice();return r.splice(e,2),new t(r)},addToStart:function(n,e){return new t([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var r=this.remove(n).content.slice();return r.push(n,e),new t(r)},addBefore:function(n,e,r){var o=this.remove(e),i=o.content.slice(),c=o.find(n);return i.splice(-1==c?i.length:c,0,e,r),new t(i)},forEach:function(t){for(var n=0;n<this.content.length;n+=2)t(this.content[n],this.content[n+1])},prepend:function(n){return(n=t.from(n)).size?new t(n.content.concat(this.subtract(n).content)):this},append:function(n){return(n=t.from(n)).size?new t(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=t.from(n);for(var r=0;r<n.content.length;r+=2)e=e.remove(n.content[r]);return e},get size(){return this.content.length>>1}},t.from=function(n){if(n instanceof t)return n;var e=[];if(n)for(var r in n)e.push(r,n[r]);return new t(e)};var n=t,e=n;exports.default=e;
},{}],"cBJM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReplaceError=c,exports.Slice=exports.Schema=exports.ResolvedPos=exports.NodeType=exports.NodeRange=exports.Node=exports.MarkType=exports.Mark=exports.Fragment=exports.DOMSerializer=exports.DOMParser=exports.ContentMatch=void 0;var t=e(require("orderedmap"));function e(t){return t&&t.__esModule?t:{default:t}}function n(t,e,r){for(var i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:r;var o=t.child(i),s=e.child(i);if(o!=s){if(!o.sameMarkup(s))return r;if(o.isText&&o.text!=s.text){for(var a=0;o.text[a]==s.text[a];a++)r++;return r}if(o.content.size||s.content.size){var h=n(o.content,s.content,r+1);if(null!=h)return h}r+=o.nodeSize}else r+=o.nodeSize}}function r(t,e,n,i){for(var o=t.childCount,s=e.childCount;;){if(0==o||0==s)return o==s?null:{a:n,b:i};var a=t.child(--o),h=e.child(--s),p=a.nodeSize;if(a!=h){if(!a.sameMarkup(h))return{a:n,b:i};if(a.isText&&a.text!=h.text){for(var c=0,u=Math.min(a.text.length,h.text.length);c<u&&a.text[a.text.length-c-1]==h.text[h.text.length-c-1];)c++,n--,i--;return{a:n,b:i}}if(a.content.size||h.content.size){var f=r(a.content,h.content,n-1,i-1);if(f)return f}n-=p,i-=p}else n-=p,i-=p}}var i=function(t,e){if(this.content=t,this.size=e||0,null==e)for(var n=0;n<t.length;n++)this.size+=t[n].nodeSize};exports.Fragment=i;var o={firstChild:{configurable:!0},lastChild:{configurable:!0},childCount:{configurable:!0}};i.prototype.nodesBetween=function(t,e,n,r,i){void 0===r&&(r=0);for(var o=0,s=0;s<e;o++){var a=this.content[o],h=s+a.nodeSize;if(h>t&&!1!==n(a,r+s,i,o)&&a.content.size){var p=s+1;a.nodesBetween(Math.max(0,t-p),Math.min(a.content.size,e-p),n,r+p)}s=h}},i.prototype.descendants=function(t){this.nodesBetween(0,this.size,t)},i.prototype.textBetween=function(t,e,n,r){var i="",o=!0;return this.nodesBetween(t,e,function(s,a){s.isText?(i+=s.text.slice(Math.max(t,a)-a,e-a),o=!n):s.isLeaf&&r?(i+=r,o=!n):!o&&s.isBlock&&(i+=n,o=!0)},0),i},i.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new i(r,this.size+t.size)},i.prototype.cut=function(t,e){if(null==e&&(e=this.size),0==t&&e==this.size)return this;var n=[],r=0;if(e>t)for(var o=0,s=0;s<e;o++){var a=this.content[o],h=s+a.nodeSize;h>t&&((s<t||h>e)&&(a=a.isText?a.cut(Math.max(0,t-s),Math.min(a.text.length,e-s)):a.cut(Math.max(0,t-s-1),Math.min(a.content.size,e-s-1))),n.push(a),r+=a.nodeSize),s=h}return new i(n,r)},i.prototype.cutByIndex=function(t,e){return t==e?i.empty:0==t&&e==this.content.length?this:new i(this.content.slice(t,e))},i.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new i(r,o)},i.prototype.addToStart=function(t){return new i([t].concat(this.content),this.size+t.nodeSize)},i.prototype.addToEnd=function(t){return new i(this.content.concat(t),this.size+t.nodeSize)},i.prototype.eq=function(t){if(this.content.length!=t.content.length)return!1;for(var e=0;e<this.content.length;e++)if(!this.content[e].eq(t.content[e]))return!1;return!0},o.firstChild.get=function(){return this.content.length?this.content[0]:null},o.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},o.childCount.get=function(){return this.content.length},i.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},i.prototype.maybeChild=function(t){return this.content[t]},i.prototype.forEach=function(t){for(var e=0,n=0;e<this.content.length;e++){var r=this.content[e];t(r,n,e),n+=r.nodeSize}},i.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),n(this,t,e)},i.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),r(this,t,e,n)},i.prototype.findIndex=function(t,e){if(void 0===e&&(e=-1),0==t)return a(0,t);if(t==this.size)return a(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var n=0,r=0;;n++){var i=r+this.child(n).nodeSize;if(i>=t)return i==t||e>0?a(n+1,i):a(n,r);r=i}},i.prototype.toString=function(){return"<"+this.toStringInner()+">"},i.prototype.toStringInner=function(){return this.content.join(", ")},i.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null},i.fromJSON=function(t,e){if(!e)return i.empty;if(!Array.isArray(e))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(e.map(t.nodeFromJSON))},i.fromArray=function(t){if(!t.length)return i.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new i(e||t,n)},i.from=function(t){if(!t)return i.empty;if(t instanceof i)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new i([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))},Object.defineProperties(i.prototype,o);var s={index:0,offset:0};function a(t,e){return s.index=t,s.offset=e,s}function h(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(!h(t[r],e[r]))return!1}else{for(var i in t)if(!(i in e&&h(t[i],e[i])))return!1;for(var o in e)if(!(o in t))return!1}return!0}i.empty=new i([],0);var p=function(t,e){this.type=t,this.attrs=e};function c(t){var e=Error.call(this,t);return e.__proto__=c.prototype,e}exports.Mark=p,p.prototype.addToSet=function(t){for(var e,n=!1,r=0;r<t.length;r++){var i=t[r];if(this.eq(i))return t;if(this.type.excludes(i.type))e||(e=t.slice(0,r));else{if(i.type.excludes(this.type))return t;!n&&i.type.rank>this.type.rank&&(e||(e=t.slice(0,r)),e.push(this),n=!0),e&&e.push(i)}}return e||(e=t.slice()),n||e.push(this),e},p.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return t.slice(0,e).concat(t.slice(e+1));return t},p.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(this.eq(t[e]))return!0;return!1},p.prototype.eq=function(t){return this==t||this.type==t.type&&h(this.attrs,t.attrs)},p.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return t},p.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Mark.fromJSON");var n=t.marks[e.type];if(!n)throw new RangeError("There is no mark type "+e.type+" in this schema");return n.create(e.attrs)},p.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},p.setFrom=function(t){if(!t||0==t.length)return p.none;if(t instanceof p)return[t];var e=t.slice();return e.sort(function(t,e){return t.type.rank-e.type.rank}),e},p.none=[],c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="ReplaceError";var u=function(t,e,n){this.content=t,this.openStart=e,this.openEnd=n};exports.Slice=u;var f={size:{configurable:!0}};function l(t,e,n){var r=t.findIndex(e),i=r.index,o=r.offset,s=t.maybeChild(i),a=t.findIndex(n),h=a.index,p=a.offset;if(o==e||s.isText){if(p!=n&&!t.child(h).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=h)throw new RangeError("Removing non-flat range");return t.replaceChild(i,s.copy(l(s.content,e-o-1,n-o-1)))}function d(t,e,n,r){var i=t.findIndex(e),o=i.index,s=i.offset,a=t.maybeChild(o);if(s==e||a.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));var h=d(a.content,e-s-1,n);return h&&t.replaceChild(o,a.copy(h))}function y(t,e,n){if(n.openStart>t.depth)throw new c("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new c("Inconsistent open depths");return v(t,e,n,0)}function v(t,e,n,r){var i=t.index(r),o=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){var s=v(t,e,n,r+1);return o.copy(o.content.replaceChild(i,s))}if(n.content.size){if(n.openStart||n.openEnd||t.depth!=r||e.depth!=r){var a=C(n,t);return w(o,S(t,a.start,a.end,e,r))}var h=t.parent,p=h.content;return w(h,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return w(o,b(t,e,r))}function m(t,e){if(!e.type.compatibleContent(t.type))throw new c("Cannot join "+e.type.name+" onto "+t.type.name)}function g(t,e,n){var r=t.node(n);return m(r,e.node(n)),r}function x(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function k(t,e,n,r){var i=(e||t).node(n),o=0,s=e?e.index(n):i.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(x(t.nodeAfter,r),o++));for(var a=o;a<s;a++)x(i.child(a),r);e&&e.depth==n&&e.textOffset&&x(e.nodeBefore,r)}function w(t,e){if(!t.type.validContent(e))throw new c("Invalid content for node "+t.type.name);return t.copy(e)}function S(t,e,n,r,o){var s=t.depth>o&&g(t,e,o+1),a=r.depth>o&&g(n,r,o+1),h=[];return k(null,t,o,h),s&&a&&e.index(o)==n.index(o)?(m(s,a),x(w(s,S(t,e,n,r,o+1)),h)):(s&&x(w(s,b(t,e,o+1)),h),k(e,n,o,h),a&&x(w(a,b(n,r,o+1)),h)),k(r,null,o,h),new i(h)}function b(t,e,n){var r=[];(k(null,t,n,r),t.depth>n)&&x(w(g(t,e,n+1),b(t,e,n+1)),r);return k(e,null,n,r),new i(r)}function C(t,e){for(var n=e.depth-t.openStart,r=e.node(n).copy(t.content),o=n-1;o>=0;o--)r=e.node(o).copy(i.from(r));return{start:r.resolveNoCache(t.openStart+n),end:r.resolveNoCache(r.content.size-t.openEnd-n)}}f.size.get=function(){return this.content.size-this.openStart-this.openEnd},u.prototype.insertAt=function(t,e){var n=d(this.content,t+this.openStart,e,null);return n&&new u(n,this.openStart,this.openEnd)},u.prototype.removeBetween=function(t,e){return new u(l(this.content,t+this.openStart,e+this.openStart),this.openStart,this.openEnd)},u.prototype.eq=function(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd},u.prototype.toString=function(){return this.content+"("+this.openStart+","+this.openEnd+")"},u.prototype.toJSON=function(){if(!this.content.size)return null;var t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t},u.fromJSON=function(t,e){if(!e)return u.empty;var n=e.openStart||0,r=e.openEnd||0;if("number"!=typeof n||"number"!=typeof r)throw new RangeError("Invalid input for Slice.fromJSON");return new u(i.fromJSON(t,e.content),e.openStart||0,e.openEnd||0)},u.maxOpen=function(t,e){void 0===e&&(e=!0);for(var n=0,r=0,i=t.firstChild;i&&!i.isLeaf&&(e||!i.type.spec.isolating);i=i.firstChild)n++;for(var o=t.lastChild;o&&!o.isLeaf&&(e||!o.type.spec.isolating);o=o.lastChild)r++;return new u(t,n,r)},Object.defineProperties(u.prototype,f),u.empty=new u(i.empty,0,0);var O=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n};exports.ResolvedPos=O;var M={parent:{configurable:!0},doc:{configurable:!0},textOffset:{configurable:!0},nodeAfter:{configurable:!0},nodeBefore:{configurable:!0}};O.prototype.resolveDepth=function(t){return null==t?this.depth:t<0?this.depth+t:t},M.parent.get=function(){return this.node(this.depth)},M.doc.get=function(){return this.node(0)},O.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},O.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},O.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},O.prototype.start=function(t){return 0==(t=this.resolveDepth(t))?0:this.path[3*t-1]+1},O.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},O.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},O.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},M.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},M.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},M.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},O.prototype.marks=function(){var t=this.parent,e=this.index();if(0==t.content.size)return p.none;if(this.textOffset)return t.child(e).marks;var n=t.maybeChild(e-1),r=t.maybeChild(e);if(!n){var i=n;n=r,r=i}for(var o=n.marks,s=0;s<o.length;s++)!1!==o[s].type.spec.inclusive||r&&o[s].isInSet(r.marks)||(o=o[s--].removeFromSet(o));return o},O.prototype.marksAcross=function(t){var e=this.parent.maybeChild(this.index());if(!e||!e.isInline)return null;for(var n=e.marks,r=t.parent.maybeChild(t.index()),i=0;i<n.length;i++)!1!==n[i].type.spec.inclusive||r&&n[i].isInSet(r.marks)||(n=n[i--].removeFromSet(n));return n},O.prototype.sharedDepth=function(t){for(var e=this.depth;e>0;e--)if(this.start(e)<=t&&this.end(e)>=t)return e;return 0},O.prototype.blockRange=function(t,e){if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var n=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);n>=0;n--)if(t.pos<=this.end(n)&&(!e||e(this.node(n))))return new N(this,t,n)},O.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},O.prototype.max=function(t){return t.pos>this.pos?t:this},O.prototype.min=function(t){return t.pos<this.pos?t:this},O.prototype.toString=function(){for(var t="",e=1;e<=this.depth;e++)t+=(t?"/":"")+this.node(e).type.name+"_"+this.index(e-1);return t+":"+this.parentOffset},O.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,i=e,o=t;;){var s=o.content.findIndex(i),a=s.index,h=s.offset,p=i-h;if(n.push(o,a,r+h),!p)break;if((o=o.child(a)).isText)break;i=p-1,r+=h+1}return new O(e,n,i)},O.resolveCached=function(t,e){for(var n=0;n<E.length;n++){var r=E[n];if(r.pos==e&&r.doc==t)return r}var i=E[T]=O.resolve(t,e);return T=(T+1)%z,i},Object.defineProperties(O.prototype,M);var E=[],T=0,z=12,N=function(t,e,n){this.$from=t,this.$to=e,this.depth=n};exports.NodeRange=N;var A={start:{configurable:!0},end:{configurable:!0},parent:{configurable:!0},startIndex:{configurable:!0},endIndex:{configurable:!0}};A.start.get=function(){return this.$from.before(this.depth+1)},A.end.get=function(){return this.$to.after(this.depth+1)},A.parent.get=function(){return this.$from.node(this.depth)},A.startIndex.get=function(){return this.$from.index(this.depth)},A.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(N.prototype,A);var I=Object.create(null),R=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||i.empty,this.marks=r||p.none};exports.Node=R;var P={nodeSize:{configurable:!0},childCount:{configurable:!0},textContent:{configurable:!0},firstChild:{configurable:!0},lastChild:{configurable:!0},isBlock:{configurable:!0},isTextblock:{configurable:!0},inlineContent:{configurable:!0},isInline:{configurable:!0},isText:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};P.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},P.childCount.get=function(){return this.content.childCount},R.prototype.child=function(t){return this.content.child(t)},R.prototype.maybeChild=function(t){return this.content.maybeChild(t)},R.prototype.forEach=function(t){this.content.forEach(t)},R.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},R.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},P.textContent.get=function(){return this.textBetween(0,this.content.size,"")},R.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},P.firstChild.get=function(){return this.content.firstChild},P.lastChild.get=function(){return this.content.lastChild},R.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},R.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},R.prototype.hasMarkup=function(t,e,n){return this.type==t&&h(this.attrs,e||t.defaultAttrs||I)&&p.sameSet(this.marks,n||p.none)},R.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},R.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},R.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},R.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return u.empty;var r=this.resolve(t),i=this.resolve(e),o=n?0:r.sharedDepth(e),s=r.start(o),a=r.node(o).content.cut(r.pos-s,i.pos-s);return new u(a,r.depth-o,i.depth-o)},R.prototype.replace=function(t,e,n){return y(this.resolve(t),this.resolve(e),n)},R.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,i=n.offset;if(!(e=e.maybeChild(r)))return null;if(i==t||e.isText)return e;t-=i+1}},R.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},R.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}},R.prototype.resolve=function(t){return O.resolveCached(this,t)},R.prototype.resolveNoCache=function(t){return O.resolve(this,t)},R.prototype.rangeHasMark=function(t,e,n){var r=!1;return e>t&&this.nodesBetween(t,e,function(t){return n.isInSet(t.marks)&&(r=!0),!r}),r},P.isBlock.get=function(){return this.type.isBlock},P.isTextblock.get=function(){return this.type.isTextblock},P.inlineContent.get=function(){return this.type.inlineContent},P.isInline.get=function(){return this.type.isInline},P.isText.get=function(){return this.type.isText},P.isLeaf.get=function(){return this.type.isLeaf},P.isAtom.get=function(){return this.type.isAtom},R.prototype.toString=function(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),B(this.marks,t)},R.prototype.contentMatchAt=function(t){var e=this.type.contentMatch.matchFragment(this.content,0,t);if(!e)throw new Error("Called contentMatchAt on a node with invalid content");return e},R.prototype.canReplace=function(t,e,n,r,o){void 0===n&&(n=i.empty),void 0===r&&(r=0),void 0===o&&(o=n.childCount);var s=this.contentMatchAt(t).matchFragment(n,r,o),a=s&&s.matchFragment(this.content,e);if(!a||!a.validEnd)return!1;for(var h=r;h<o;h++)if(!this.type.allowsMarks(n.child(h).marks))return!1;return!0},R.prototype.canReplaceWith=function(t,e,n,r){if(r&&!this.type.allowsMarks(r))return!1;var i=this.contentMatchAt(t).matchType(n),o=i&&i.matchFragment(this.content,e);return!!o&&o.validEnd},R.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},R.prototype.defaultContentType=function(t){return this.contentMatchAt(t).defaultType},R.prototype.check=function(){if(!this.type.validContent(this.content))throw new RangeError("Invalid content for node "+this.type.name+": "+this.content.toString().slice(0,50));this.content.forEach(function(t){return t.check()})},R.prototype.toJSON=function(){var t={type:this.type.name};for(var e in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(function(t){return t.toJSON()})),t},R.fromJSON=function(t,e){if(!e)throw new RangeError("Invalid input for Node.fromJSON");var n=null;if(e.marks){if(!Array.isArray(e.marks))throw new RangeError("Invalid mark data for Node.fromJSON");n=e.marks.map(t.markFromJSON)}if("text"==e.type){if("string"!=typeof e.text)throw new RangeError("Invalid text node in JSON");return t.text(e.text,n)}var r=i.fromJSON(t,e.content);return t.nodeType(e.type).create(e.attrs,r,n)},Object.defineProperties(R.prototype,P);var F=function(t){function e(e,n,r,i){if(t.call(this,e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{configurable:!0},nodeSize:{configurable:!0}};return e.prototype.toString=function(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):B(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return t==this.marks?this:new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(R);function B(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var D=function(t){this.validEnd=t,this.next=[],this.wrapCache=[]};exports.ContentMatch=D;var j={inlineContent:{configurable:!0},defaultType:{configurable:!0},edgeCount:{configurable:!0}};D.parse=function(t,e){var n=new J(t,e);if(null==n.next)return D.empty;var r=L(n);n.next&&n.err("Unexpected trailing text");var i=X(G(r));return Y(i,n),i},D.prototype.matchType=function(t){for(var e=0;e<this.next.length;e+=2)if(this.next[e]==t)return this.next[e+1];return null},D.prototype.matchFragment=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=t.childCount);for(var r=this,i=e;r&&i<n;i++)r=r.matchType(t.child(i).type);return r},j.inlineContent.get=function(){var t=this.next[0];return!!t&&t.isInline},j.defaultType.get=function(){for(var t=0;t<this.next.length;t+=2){var e=this.next[t];if(!e.isText&&!e.hasRequiredAttrs())return e}},D.prototype.compatible=function(t){for(var e=0;e<this.next.length;e+=2)for(var n=0;n<t.next.length;n+=2)if(this.next[e]==t.next[n])return!0;return!1},D.prototype.fillBefore=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=0);var r=[this];return function o(s,a){var h=s.matchFragment(t,n);if(h&&(!e||h.validEnd))return i.from(a.map(function(t){return t.createAndFill()}));for(var p=0;p<s.next.length;p+=2){var c=s.next[p],u=s.next[p+1];if(!c.isText&&!c.hasRequiredAttrs()&&-1==r.indexOf(u)){r.push(u);var f=o(u,a.concat(c));if(f)return f}}}(this,[])},D.prototype.findWrapping=function(t){for(var e=0;e<this.wrapCache.length;e+=2)if(this.wrapCache[e]==t)return this.wrapCache[e+1];var n=this.computeWrapping(t);return this.wrapCache.push(t,n),n},D.prototype.computeWrapping=function(t){for(var e=Object.create(null),n=[{match:this,type:null,via:null}];n.length;){var r=n.shift(),i=r.match;if(i.matchType(t)){for(var o=[],s=r;s.type;s=s.via)o.push(s.type);return o.reverse()}for(var a=0;a<i.next.length;a+=2){var h=i.next[a];h.isLeaf||h.hasRequiredAttrs()||h.name in e||r.type&&!i.next[a+1].validEnd||(n.push({match:h.contentMatch,type:h,via:r}),e[h.name]=!0)}}},j.edgeCount.get=function(){return this.next.length>>1},D.prototype.edge=function(t){var e=t<<1;if(e>=this.next.length)throw new RangeError("There's no "+t+"th edge in this content match");return{type:this.next[e],next:this.next[e+1]}},D.prototype.toString=function(){var t=[];return function e(n){t.push(n);for(var r=1;r<n.next.length;r+=2)-1==t.indexOf(n.next[r])&&e(n.next[r])}(this),t.map(function(e,n){for(var r=n+(e.validEnd?"*":" ")+" ",i=0;i<e.next.length;i+=2)r+=(i?", ":"")+e.next[i].name+"->"+t.indexOf(e.next[i+1]);return r}).join("\n")},Object.defineProperties(D.prototype,j),D.empty=new D(!0);var J=function(t,e){this.string=t,this.nodeTypes=e,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),""==this.tokens[this.tokens.length-1]&&this.tokens.pop(),""==this.tokens[0]&&this.tokens.unshift()},q={next:{configurable:!0}};function L(t){var e=[];do{e.push(_(t))}while(t.eat("|"));return 1==e.length?e[0]:{type:"choice",exprs:e}}function _(t){var e=[];do{e.push(W(t))}while(t.next&&")"!=t.next&&"|"!=t.next);return 1==e.length?e[0]:{type:"seq",exprs:e}}function W(t){for(var e=H(t);;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else{if(!t.eat("{"))break;e=U(t,e)}return e}function $(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");var e=Number(t.next);return t.pos++,e}function U(t,e){var n=$(t),r=n;return t.eat(",")&&(r="}"!=t.next?$(t):-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function V(t,e){var n=t.nodeTypes,r=n[e];if(r)return[r];var i=[];for(var o in n){var s=n[o];s.groups.indexOf(e)>-1&&i.push(s)}return 0==i.length&&t.err("No node type or group '"+e+"' found"),i}function H(t){if(t.eat("(")){var e=L(t);return t.eat(")")||t.err("Missing closing paren"),e}if(!/\W/.test(t.next)){var n=V(t,t.next).map(function(e){return null==t.inline?t.inline=e.isInline:t.inline!=e.isInline&&t.err("Mixing inline and block content"),{type:"name",value:e}});return t.pos++,1==n.length?n[0]:{type:"choice",exprs:n}}t.err("Unexpected token '"+t.next+"'")}function G(t){var e=[[]];return i(function t(e,o){if("choice"==e.type)return e.exprs.reduce(function(e,n){return e.concat(t(n,o))},[]);if("seq"==e.type)for(var s=0;;s++){var a=t(e.exprs[s],o);if(s==e.exprs.length-1)return a;i(a,o=n())}else{if("star"==e.type){var h=n();return r(o,h),i(t(e.expr,h),h),[r(h)]}if("plus"==e.type){var p=n();return i(t(e.expr,o),p),i(t(e.expr,p),p),[r(p)]}if("opt"==e.type)return[r(o)].concat(t(e.expr,o));if("range"==e.type){for(var c=o,u=0;u<e.min;u++){var f=n();i(t(e.expr,c),f),c=f}if(-1==e.max)i(t(e.expr,c),c);else for(var l=e.min;l<e.max;l++){var d=n();r(c,d),i(t(e.expr,c),d),c=d}return[r(c)]}if("name"==e.type)return[r(o,null,e.value)]}}(t,0),n()),e;function n(){return e.push([])-1}function r(t,n,r){var i={term:r,to:n};return e[t].push(i),i}function i(t,e){t.forEach(function(t){return t.to=e})}}function K(t,e){return e-t}function Q(t,e){var n=[];return function e(r){var i=t[r];if(1==i.length&&!i[0].term)return e(i[0].to);n.push(r);for(var o=0;o<i.length;o++){var s=i[o],a=s.term,h=s.to;a||-1!=n.indexOf(h)||e(h)}}(e),n.sort(K)}function X(t){var e=Object.create(null);return function n(r){var i=[];r.forEach(function(e){t[e].forEach(function(e){var n=e.term,r=e.to;if(n){var o=i.indexOf(n),s=o>-1&&i[o+1];Q(t,r).forEach(function(t){s||i.push(n,s=[]),-1==s.indexOf(t)&&s.push(t)})}})});var o=e[r.join(",")]=new D(r.indexOf(t.length-1)>-1);for(var s=0;s<i.length;s+=2){var a=i[s+1].sort(K);o.next.push(i[s],e[a.join(",")]||n(a))}return o}(Q(t,0))}function Y(t,e){for(var n=0,r=[t];n<r.length;n++){for(var i=r[n],o=!i.validEnd,s=[],a=0;a<i.next.length;a+=2){var h=i.next[a],p=i.next[a+1];s.push(h.name),!o||h.isText||h.hasRequiredAttrs()||(o=!1),-1==r.indexOf(p)&&r.push(p)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position")}}function Z(t){var e=Object.create(null);for(var n in t){var r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function tt(t,e){var n=Object.create(null);for(var r in t){var i=e&&e[r];if(void 0===i){var o=t[r];if(!o.hasDefault)throw new RangeError("No value supplied for attribute "+r);i=o.default}n[r]=i}return n}function et(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new it(t[n]);return e}q.next.get=function(){return this.tokens[this.pos]},J.prototype.eat=function(t){return this.next==t&&(this.pos++||!0)},J.prototype.err=function(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")},Object.defineProperties(J.prototype,q);var nt=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.groups=n.group?n.group.split(" "):[],this.attrs=et(n.attrs),this.defaultAttrs=Z(this.attrs),this.contentMatch=null,this.markSet=null,this.inlineContent=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t};exports.NodeType=nt;var rt={isInline:{configurable:!0},isTextblock:{configurable:!0},isLeaf:{configurable:!0},isAtom:{configurable:!0}};rt.isInline.get=function(){return!this.isBlock},rt.isTextblock.get=function(){return this.isBlock&&this.inlineContent},rt.isLeaf.get=function(){return this.contentMatch==D.empty},rt.isAtom.get=function(){return this.isLeaf||this.spec.atom},nt.prototype.hasRequiredAttrs=function(t){for(var e in this.attrs)if(this.attrs[e].isRequired&&(!t||!(e in t)))return!0;return!1},nt.prototype.compatibleContent=function(t){return this==t||this.contentMatch.compatible(t.contentMatch)},nt.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:tt(this.attrs,t)},nt.prototype.create=function(t,e,n){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new R(this,this.computeAttrs(t),i.from(e),p.setFrom(n))},nt.prototype.createChecked=function(t,e,n){if(e=i.from(e),!this.validContent(e))throw new RangeError("Invalid content for node "+this.name);return new R(this,this.computeAttrs(t),e,p.setFrom(n))},nt.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),(e=i.from(e)).size){var r=this.contentMatch.fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentMatch.matchFragment(e).fillBefore(i.empty,!0);return o?new R(this,t,e.append(o),p.setFrom(n)):null},nt.prototype.validContent=function(t){var e=this.contentMatch.matchFragment(t);if(!e||!e.validEnd)return!1;for(var n=0;n<t.childCount;n++)if(!this.allowsMarks(t.child(n).marks))return!1;return!0},nt.prototype.allowsMarkType=function(t){return null==this.markSet||this.markSet.indexOf(t)>-1},nt.prototype.allowsMarks=function(t){if(null==this.markSet)return!0;for(var e=0;e<t.length;e++)if(!this.allowsMarkType(t[e].type))return!1;return!0},nt.prototype.allowedMarks=function(t){if(null==this.markSet)return t;for(var e,n=0;n<t.length;n++)this.allowsMarkType(t[n].type)?e&&e.push(t[n]):e||(e=t.slice(0,n));return e?e.length?e:p.empty:t},nt.compile=function(t,e){var n=Object.create(null);t.forEach(function(t,r){return n[t]=new nt(t,e,r)});var r=e.spec.topNode||"doc";if(!n[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!n.text)throw new RangeError("Every schema needs a 'text' type");for(var i in n.text.attrs)throw new RangeError("The text node type should not have attributes");return n},Object.defineProperties(nt.prototype,rt);var it=function(t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default},ot={isRequired:{configurable:!0}};ot.isRequired.get=function(){return!this.hasDefault},Object.defineProperties(it.prototype,ot);var st=function(t,e,n,r){this.name=t,this.schema=n,this.spec=r,this.attrs=et(r.attrs),this.rank=e,this.excluded=null;var i=Z(this.attrs);this.instance=i&&new p(this,i)};exports.MarkType=st,st.prototype.create=function(t){return!t&&this.instance?this.instance:new p(this,tt(this.attrs,t))},st.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach(function(t,i){return n[t]=new st(t,r++,e,i)}),n},st.prototype.removeFromSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t.slice(0,e).concat(t.slice(e+1));return t},st.prototype.isInSet=function(t){for(var e=0;e<t.length;e++)if(t[e].type==this)return t[e]},st.prototype.excludes=function(t){return this.excluded.indexOf(t)>-1};var at=function(e){for(var n in this.spec={},e)this.spec[n]=e[n];this.spec.nodes=t.default.from(e.nodes),this.spec.marks=t.default.from(e.marks),this.nodes=nt.compile(this.spec.nodes,this),this.marks=st.compile(this.spec.marks,this);var r=Object.create(null);for(var i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");var o=this.nodes[i],s=o.spec.content||"",a=o.spec.marks;o.contentMatch=r[s]||(r[s]=D.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.markSet="_"==a?null:a?ht(this,a.split(" ")):""!=a&&o.inlineContent?null:[]}for(var h in this.marks){var p=this.marks[h],c=p.spec.excludes;p.excluded=null==c?[p]:""==c?[]:ht(this,c.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached=Object.create(null),this.cached.wrappings=Object.create(null)};function ht(t,e){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=t.marks[i],s=o;if(o)n.push(o);else for(var a in t.marks){var h=t.marks[a];("_"==i||h.spec.group&&h.spec.group.split(" ").indexOf(i)>-1)&&n.push(s=h)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}exports.Schema=at,at.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof nt))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},at.prototype.text=function(t,e){var n=this.nodes.text;return new F(n,n.defaultAttrs,t,p.setFrom(e))},at.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},at.prototype.nodeFromJSON=function(t){return R.fromJSON(this,t)},at.prototype.markFromJSON=function(t){return p.fromJSON(this,t)},at.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e};var pt=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})};exports.DOMParser=pt,pt.prototype.parse=function(t,e){void 0===e&&(e={});var n=new gt(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},pt.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new gt(this,e,!0);return n.addAll(t,null,e.from,e.to),u.maxOpen(n.finish())},pt.prototype.matchTag=function(t,e){for(var n=0;n<this.tags.length;n++){var r=this.tags[n];if(wt(t,r.tag)&&(void 0===r.namespace||t.namespaceURI==r.namespace)&&(!r.context||e.matchesContext(r.context))){if(r.getAttrs){var i=r.getAttrs(t);if(!1===i)continue;r.attrs=i}return r}}},pt.prototype.matchStyle=function(t,e,n){for(var r=0;r<this.styles.length;r++){var i=this.styles[r];if(!(0!=i.style.indexOf(t)||i.context&&!n.matchesContext(i.context)||i.style.length>t.length&&(61!=i.style.charCodeAt(t.length)||i.style.slice(t.length+1)!=e))){if(i.getAttrs){var o=i.getAttrs(e);if(!1===o)continue;i.attrs=o}return i}}},pt.schemaRules=function(t){var e=[];function n(t){for(var n=null==t.priority?50:t.priority,r=0;r<e.length;r++){var i=e[r];if((null==i.priority?50:i.priority)<n)break}e.splice(r,0,t)}var r=function(e){var r=t.marks[e].spec.parseDOM;r&&r.forEach(function(t){n(t=bt(t)),t.mark=e})};for(var i in t.marks)r(i);var o;for(var s in t.nodes)o=void 0,(o=t.nodes[s].spec.parseDOM)&&o.forEach(function(t){n(t=bt(t)),t.node=s});return e},pt.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new pt(t,pt.schemaRules(t)))};var ct={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ut={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ft={ol:!0,ul:!0},lt=1,dt=2,yt=4;function vt(t){return(t?lt:0)|("full"===t?dt:0)}var mt=function(t,e,n,r,i,o){this.type=t,this.attrs=e,this.solid=r,this.match=i||(o&yt?null:t.contentMatch),this.options=o,this.content=[],this.marks=n,this.activeMarks=p.none};mt.prototype.findWrapping=function(t){if(!this.match){if(!this.type)return[];var e=this.type.contentMatch.fillBefore(i.from(t));if(!e){var n,r=this.type.contentMatch;return(n=r.findWrapping(t.type))?(this.match=r,n):null}this.match=this.type.contentMatch.matchFragment(e)}return this.match.findWrapping(t.type)},mt.prototype.finish=function(t){if(!(this.options&lt)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/[ \t\r\n\u000c]+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=i.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(i.empty,!0))),this.type?this.type.create(this.attrs,r,this.marks):r};var gt=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n,this.pendingMarks=[];var r,i=e.topNode,o=vt(e.preserveWhitespace)|(n?yt:0);r=i?new mt(i.type,i.attrs,p.none,!0,e.topMatch||i.type.contentMatch,o):new mt(n?null:t.schema.topNodeType,null,p.none,!0,null,o),this.nodes=[r],this.open=0,this.find=e.findPositions,this.needsBlock=!1},xt={top:{configurable:!0},currentPos:{configurable:!0}};function kt(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null;r&&ft.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function wt(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function St(t){for(var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];e=n.exec(t);)r.push(e[1],e[2].trim());return r}function bt(t){var e={};for(var n in t)e[n]=t[n];return e}xt.top.get=function(){return this.nodes[this.open]},gt.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style"),n=e?this.readStyles(St(e)):null;if(null!=n)for(var r=0;r<n.length;r++)this.addPendingMark(n[r]);if(this.addElement(t),null!=n)for(var i=0;i<n.length;i++)this.removePendingMark(n[i])}},gt.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if((n.type?n.type.inlineContent:n.content.length&&n.content[0].isInline)||/[^ \t\r\n\u000c]/.test(e)){if(n.options&lt)n.options&dt||(e=e.replace(/\r?\n|\r/g," "));else if(e=e.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(e)&&this.open==this.nodes.length-1){var r=n.content[n.content.length-1],i=t.previousSibling;(!r||i&&"BR"==i.nodeName||r.isText&&/[ \t\r\n\u000c]$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e)),this.findInText(t)}else this.findInside(t)},gt.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();ft.hasOwnProperty(e)&&kt(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t,this);if(n?n.ignore:ut.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip){n&&n.skip.nodeType&&(t=n.skip);var r,i=this.top,o=this.needsBlock;if(ct.hasOwnProperty(e))r=!0,i.type||(this.needsBlock=!0);else if(!t.firstChild)return void this.leafFallback(t);this.addAll(t),r&&this.sync(i),this.needsBlock=o}else this.addElementByRule(t,n)},gt.prototype.leafFallback=function(t){"BR"==t.nodeName&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode("\n"))},gt.prototype.readStyles=function(t){for(var e=p.none,n=0;n<t.length;n+=2){var r=this.parser.matchStyle(t[n],t[n+1],this);if(r){if(r.ignore)return null;e=this.parser.schema.marks[r.mark].create(r.attrs).addToSet(e)}}return e},gt.prototype.addElementByRule=function(t,e){var n,r,i,o=this;e.node?(r=this.parser.schema.nodes[e.node]).isLeaf?this.insertNode(r.create(e.attrs))||this.leafFallback(t):n=this.enter(r,e.attrs,e.preserveWhitespace):(i=this.parser.schema.marks[e.mark].create(e.attrs),this.addPendingMark(i));var s=this.top;if(r&&r.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t,this.parser.schema).forEach(function(t){return o.insertNode(t)});else{var a=e.contentElement;"string"==typeof a?a=t.querySelector(a):"function"==typeof a&&(a=a(t)),a||(a=t),this.findAround(t,a,!0),this.addAll(a,n)}n&&(this.sync(s),this.open--),i&&this.removePendingMark(i)},gt.prototype.addAll=function(t,e,n,r){for(var i=n||0,o=n?t.childNodes[n]:t.firstChild,s=null==r?null:t.childNodes[r];o!=s;o=o.nextSibling,++i)this.findAtPoint(t,i),this.addDOM(o),e&&ct.hasOwnProperty(o.nodeName.toLowerCase())&&this.sync(e);this.findAtPoint(t,i)},gt.prototype.findPlace=function(t){for(var e,n,r=this.open;r>=0;r--){var i=this.nodes[r],o=i.findWrapping(t);if(o&&(!e||e.length>o.length)&&(e=o,n=i,!o.length))break;if(i.solid)break}if(!e)return!1;this.sync(n);for(var s=0;s<e.length;s++)this.enterInner(e[s],null,!1);return!0},gt.prototype.insertNode=function(t){if(t.isInline&&this.needsBlock&&!this.top.type){var e=this.textblockFromContext();e&&this.enterInner(e)}if(this.findPlace(t)){this.closeExtra();var n=this.top;this.applyPendingMarks(n),n.match&&(n.match=n.match.matchType(t.type));for(var r=n.activeMarks,i=0;i<t.marks.length;i++)n.type&&!n.type.allowsMarkType(t.marks[i].type)||(r=t.marks[i].addToSet(r));return n.content.push(t.mark(r)),!0}return!1},gt.prototype.applyPendingMarks=function(t){for(var e=0;e<this.pendingMarks.length;e++){var n=this.pendingMarks[e];t.type&&!t.type.allowsMarkType(n.type)||n.isInSet(t.activeMarks)||(t.activeMarks=n.addToSet(t.activeMarks),this.pendingMarks.splice(e--,1))}},gt.prototype.enter=function(t,e,n){var r=this.findPlace(t.create(e));return r&&(this.applyPendingMarks(this.top),this.enterInner(t,e,!0,n)),r},gt.prototype.enterInner=function(t,e,n,r){this.closeExtra();var i=this.top;i.match=i.match&&i.match.matchType(t,e);var o=null==r?i.options&~yt:vt(r);i.options&yt&&0==i.content.length&&(o|=yt),this.nodes.push(new mt(t,e,i.activeMarks,n,null,o)),this.open++},gt.prototype.closeExtra=function(t){var e=this.nodes.length-1;if(e>this.open){for(;e>this.open;e--)this.nodes[e-1].content.push(this.nodes[e].finish(t));this.nodes.length=this.open+1}},gt.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},gt.prototype.sync=function(t){for(var e=this.open;e>=0;e--)if(this.nodes[e]==t)return void(this.open=e)},gt.prototype.addPendingMark=function(t){this.pendingMarks.push(t)},gt.prototype.removePendingMark=function(t){var e=this.pendingMarks.lastIndexOf(t);if(e>-1)this.pendingMarks.splice(e,1);else{var n=this.top;n.activeMarks=t.removeFromSet(n.activeMarks)}},xt.currentPos.get=function(){this.closeExtra();for(var t=0,e=this.open;e>=0;e--){for(var n=this.nodes[e].content,r=n.length-1;r>=0;r--)t+=n[r].nodeSize;e&&t++}return t},gt.prototype.findAtPoint=function(t,e){if(this.find)for(var n=0;n<this.find.length;n++)this.find[n].node==t&&this.find[n].offset==e&&(this.find[n].pos=this.currentPos)},gt.prototype.findInside=function(t){if(this.find)for(var e=0;e<this.find.length;e++)null==this.find[e].pos&&1==t.nodeType&&t.contains(this.find[e].node)&&(this.find[e].pos=this.currentPos)},gt.prototype.findAround=function(t,e,n){if(t!=e&&this.find)for(var r=0;r<this.find.length;r++){if(null==this.find[r].pos&&1==t.nodeType&&t.contains(this.find[r].node))e.compareDocumentPosition(this.find[r].node)&(n?2:4)&&(this.find[r].pos=this.currentPos)}},gt.prototype.findInText=function(t){if(this.find)for(var e=0;e<this.find.length;e++)this.find[e].node==t&&(this.find[e].pos=this.currentPos-(t.nodeValue.length-this.find[e].offset))},gt.prototype.matchesContext=function(t){var e=this;if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);var n=t.split("/"),r=this.options.context,i=!(this.isOpen||r&&r.parent.type!=this.nodes[0].type),o=-(r?r.depth+1:0)+(i?0:1),s=function(t,a){for(;t>=0;t--){var h=n[t];if(""==h){if(t==n.length-1||0==t)continue;for(;a>=o;a--)if(s(t-1,a))return!0;return!1}var p=a>0||0==a&&i?e.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!p||p.name!=h&&-1==p.groups.indexOf(h))return!1;a--}return!0};return s(n.length-1,this.open)},gt.prototype.textblockFromContext=function(){var t=this.options.context;if(t)for(var e=t.depth;e>=0;e--){var n=t.node(e).contentMatchAt(t.indexAfter(e)).defaultType;if(n&&n.isTextblock&&n.defaultAttrs)return n}for(var r in this.parser.schema.nodes){var i=this.parser.schema.nodes[r];if(i.isTextblock&&i.defaultAttrs)return i}},Object.defineProperties(gt.prototype,xt);var Ct=function(t,e){this.nodes=t||{},this.marks=e||{}};function Ot(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Mt(t){return t.document||window.document}exports.DOMSerializer=Ct,Ct.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=Mt(e).createDocumentFragment());var i=n,o=null;return t.forEach(function(t){if(o||t.marks.length){o||(o=[]);for(var n=0,s=0;n<o.length&&s<t.marks.length;){var a=t.marks[s];if(r.marks[a.type.name]){if(!a.eq(o[n])||!1===a.type.spec.spanning)break;n+=2,s++}else s++}for(;n<o.length;)i=o.pop(),o.pop();for(;s<t.marks.length;){var h=t.marks[s++],p=r.serializeMark(h,t.isInline,e);p&&(o.push(h,i),i.appendChild(p.dom),i=p.contentDOM||p.dom)}}i.appendChild(r.serializeNode(t,e))}),n},Ct.prototype.serializeNode=function(t,e){void 0===e&&(e={});var n=Ct.renderSpec(Mt(e),this.nodes[t.type.name](t)),r=n.dom,i=n.contentDOM;if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");e.onContent?e.onContent(t,i,e):this.serializeFragment(t.content,e,i)}return r},Ct.prototype.serializeNodeAndMarks=function(t,e){void 0===e&&(e={});for(var n=this.serializeNode(t,e),r=t.marks.length-1;r>=0;r--){var i=this.serializeMark(t.marks[r],t.isInline,e);i&&((i.contentDOM||i.dom).appendChild(n),n=i.dom)}return n},Ct.prototype.serializeMark=function(t,e,n){void 0===n&&(n={});var r=this.marks[t.type.name];return r&&Ct.renderSpec(Mt(n),r(t,e))},Ct.renderSpec=function(t,e){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var n=t.createElement(e[0]),r=null,i=e[1],o=1;if(i&&"object"==typeof i&&null==i.nodeType&&!Array.isArray(i))for(var s in o=2,i)null!=i[s]&&n.setAttribute(s,i[s]);for(var a=o;a<e.length;a++){var h=e[a];if(0===h){if(a<e.length-1||a>o)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var p=Ct.renderSpec(t,h),c=p.dom,u=p.contentDOM;if(n.appendChild(c),u){if(r)throw new RangeError("Multiple content holes");r=u}}return{dom:n,contentDOM:r}},Ct.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new Ct(this.nodesFromSchema(t),this.marksFromSchema(t)))},Ct.nodesFromSchema=function(t){var e=Ot(t.nodes);return e.text||(e.text=function(t){return t.text}),e},Ct.marksFromSchema=function(t){return Ot(t.marks)};
},{"orderedmap":"zVnv"}],"etvU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransformError=c,exports.canJoin=E,exports.canSplit=b,exports.dropPoint=O,exports.findWrapping=x,exports.insertPoint=A,exports.joinPoint=F,exports.liftTarget=w,exports.replaceStep=_,exports.Transform=exports.StepResult=exports.StepMap=exports.Step=exports.ReplaceStep=exports.ReplaceAroundStep=exports.RemoveMarkStep=exports.Mapping=exports.MapResult=exports.AddMarkStep=void 0;var t=require("prosemirror-model"),e=65535,r=Math.pow(2,16);function n(t,e){return t+e*r}function o(t){return t&e}function i(t){return(t-(t&e))/r}var p=function(t,e,r){void 0===e&&(e=!1),void 0===r&&(r=null),this.pos=t,this.deleted=e,this.recover=r};exports.MapResult=p;var a=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};exports.StepMap=a,a.prototype.recover=function(t){var e=0,r=o(t);if(!this.inverted)for(var n=0;n<r;n++)e+=this.ranges[3*n+2]-this.ranges[3*n+1];return this.ranges[3*r]+e+i(t)},a.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},a.prototype.map=function(t,e){return void 0===e&&(e=1),this._map(t,e,!0)},a.prototype._map=function(t,e,r){for(var o=0,i=this.inverted?2:1,a=this.inverted?1:2,s=0;s<this.ranges.length;s+=3){var c=this.ranges[s]-(this.inverted?o:0);if(c>t)break;var h=this.ranges[s+i],f=this.ranges[s+a],l=c+h;if(t<=l){var u=c+o+((h?t==c?-1:t==l?1:e:e)<0?0:f);if(r)return u;var d=n(s/3,t-c);return new p(u,e<0?t!=c:t!=l,d)}o+=f-h}return r?t+o:new p(t+o)},a.prototype.touches=function(t,e){for(var r=0,n=o(e),i=this.inverted?2:1,p=this.inverted?1:2,a=0;a<this.ranges.length;a+=3){var s=this.ranges[a]-(this.inverted?r:0);if(s>t)break;var c=this.ranges[a+i];if(t<=s+c&&a==3*n)return!0;r+=this.ranges[a+p]-c}return!1},a.prototype.forEach=function(t){for(var e=this.inverted?2:1,r=this.inverted?1:2,n=0,o=0;n<this.ranges.length;n+=3){var i=this.ranges[n],p=i-(this.inverted?o:0),a=i+(this.inverted?0:o),s=this.ranges[n+e],c=this.ranges[n+r];t(p,p+s,a,a+c),o+=c-s}},a.prototype.invert=function(){return new a(this.ranges,!this.inverted)},a.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},a.offset=function(t){return 0==t?a.empty:new a(t<0?[0,-t,0]:[0,0,t])},a.empty=new a([]);var s=function(t,e,r,n){this.maps=t||[],this.from=r||0,this.to=null==n?this.maps.length:n,this.mirror=e};function c(t){var e=Error.call(this,t);return e.__proto__=c.prototype,e}exports.Mapping=s,s.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new s(this.maps,this.mirror,t,e)},s.prototype.copy=function(){return new s(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},s.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},s.prototype.appendMapping=function(t){for(var e=0,r=this.maps.length;e<t.maps.length;e++){var n=t.getMirror(e);this.appendMap(t.maps[e],null!=n&&n<e?r+n:null)}},s.prototype.getMirror=function(t){if(this.mirror)for(var e=0;e<this.mirror.length;e++)if(this.mirror[e]==t)return this.mirror[e+(e%2?-1:1)]},s.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},s.prototype.appendMappingInverted=function(t){for(var e=t.maps.length-1,r=this.maps.length+t.maps.length;e>=0;e--){var n=t.getMirror(e);this.appendMap(t.maps[e].invert(),null!=n&&n>e?r-n-1:null)}},s.prototype.invert=function(){var t=new s;return t.appendMappingInverted(this),t},s.prototype.map=function(t,e){if(void 0===e&&(e=1),this.mirror)return this._map(t,e,!0);for(var r=this.from;r<this.to;r++)t=this.maps[r].map(t,e);return t},s.prototype.mapResult=function(t,e){return void 0===e&&(e=1),this._map(t,e,!1)},s.prototype._map=function(t,e,r){for(var n=!1,o=null,i=this.from;i<this.to;i++){var a=this.maps[i],s=o&&o[i];if(null!=s&&a.touches(t,s))t=a.recover(s);else{var c=a.mapResult(t,e);if(null!=c.recover){var h=this.getMirror(i);if(null!=h&&h>i&&h<this.to){if(c.deleted){i=h,t=this.maps[h].recover(c.recover);continue}(o||(o=Object.create(null)))[h]=c.recover}}c.deleted&&(n=!0),t=c.pos}}return r?t:new p(t,n)},c.prototype=Object.create(Error.prototype),c.prototype.constructor=c,c.prototype.name="TransformError";var h=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new s};exports.Transform=h;var f={before:{configurable:!0},docChanged:{configurable:!0}};function l(){throw new Error("Override me")}f.before.get=function(){return this.docs.length?this.docs[0]:this.doc},h.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new c(e.failed);return this},h.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},f.docChanged.get=function(){return this.steps.length>0},h.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(h.prototype,f);var u=Object.create(null),d=function(){};exports.Step=d,d.prototype.apply=function(t){return l()},d.prototype.getMap=function(){return a.empty},d.prototype.invert=function(t){return l()},d.prototype.map=function(t){return l()},d.prototype.merge=function(t){return null},d.prototype.toJSON=function(){return l()},d.fromJSON=function(t,e){if(!e||!e.stepType)throw new RangeError("Invalid input for Step.fromJSON");var r=u[e.stepType];if(!r)throw new RangeError("No step type "+e.stepType+" defined");return r.fromJSON(t,e)},d.jsonID=function(t,e){if(t in u)throw new RangeError("Duplicate use of step JSON ID "+t);return u[t]=e,e.prototype.jsonID=t,e};var m=function(t,e){this.doc=t,this.failed=e};exports.StepResult=m,m.ok=function(t){return new m(t,null)},m.fail=function(t){return new m(null,t)},m.fromReplace=function(e,r,n,o){try{return m.ok(e.replace(r,n,o))}catch(i){if(i instanceof t.ReplaceError)return m.fail(i.message);throw i}};var v=function(e){function r(t,r,n,o){e.call(this),this.from=t,this.to=r,this.slice=n,this.structure=!!o}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(t){return this.structure&&g(t,this.from,this.to)?m.fail("Structure replace would overwrite content"):m.fromReplace(t,this.from,this.to,this.slice)},r.prototype.getMap=function(){return new a([this.from,this.to-this.from,this.slice.size])},r.prototype.invert=function(t){return new r(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted?null:new r(e.pos,Math.max(e.pos,n.pos),this.slice)},r.prototype.merge=function(e){if(!(e instanceof r)||e.structure!=this.structure)return null;if(this.from+this.slice.size!=e.from||this.slice.openEnd||e.slice.openStart){if(e.to!=this.from||this.slice.openStart||e.slice.openEnd)return null;var n=this.slice.size+e.slice.size==0?t.Slice.empty:new t.Slice(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new r(e.from,this.to,n,this.structure)}var o=this.slice.size+e.slice.size==0?t.Slice.empty:new t.Slice(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new r(this.from,this.to+(e.to-e.from),o,this.structure)},r.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},r.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to)throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new r(n.from,n.to,t.Slice.fromJSON(e,n.slice),!!n.structure)},r}(d);exports.ReplaceStep=v,d.jsonID("replace",v);var y=function(e){function r(t,r,n,o,i,p,a){e.call(this),this.from=t,this.to=r,this.gapFrom=n,this.gapTo=o,this.slice=i,this.insert=p,this.structure=!!a}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(t){if(this.structure&&(g(t,this.from,this.gapFrom)||g(t,this.gapTo,this.to)))return m.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openStart||e.openEnd)return m.fail("Gap is not a flat range");var r=this.slice.insertAt(this.insert,e.content);return r?m.fromReplace(t,this.from,this.to,r):m.fail("Content does not fit in gap")},r.prototype.getMap=function(){return new a([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},r.prototype.invert=function(t){var e=this.gapTo-this.gapFrom;return new r(this.from,this.from+this.slice.size+e,this.from+this.insert,this.from+this.insert+e,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return e.deleted&&n.deleted||o<e.pos||i>n.pos?null:new r(e.pos,n.pos,o,i,this.slice,this.insert,this.structure)},r.prototype.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},r.fromJSON=function(e,n){if("number"!=typeof n.from||"number"!=typeof n.to||"number"!=typeof n.gapFrom||"number"!=typeof n.gapTo||"number"!=typeof n.insert)throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new r(n.from,n.to,n.gapFrom,n.gapTo,t.Slice.fromJSON(e,n.slice),n.insert,!!n.structure)},r}(d);function g(t,e,r){for(var n=t.resolve(e),o=r-e,i=n.depth;o>0&&i>0&&n.indexAfter(i)==n.node(i).childCount;)i--,o--;if(o>0)for(var p=n.node(i).maybeChild(n.indexAfter(i));o>0;){if(!p||p.isLeaf)return!0;p=p.firstChild,o--}return!1}function S(t,e,r){return(0==e||t.canReplace(e,t.childCount))&&(r==t.childCount||t.canReplace(0,r))}function w(t){for(var e=t.parent.content.cutByIndex(t.startIndex,t.endIndex),r=t.depth;;--r){var n=t.$from.node(r),o=t.$from.index(r),i=t.$to.indexAfter(r);if(r<t.depth&&n.canReplace(o,i,e))return r;if(0==r||n.type.spec.isolating||!S(n,o,i))break}}function x(t,e,r,n){void 0===n&&(n=t);var o=M(t,e),i=o&&C(n,e);return i?o.map(k).concat({type:e,attrs:r}).concat(i.map(k)):null}function k(t){return{type:t,attrs:null}}function M(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.contentMatchAt(n).findWrapping(e);if(!i)return null;var p=i.length?i[0]:e;return r.canReplaceWith(n,o,p)?i:null}function C(t,e){var r=t.parent,n=t.startIndex,o=t.endIndex,i=r.child(n),p=e.contentMatch.findWrapping(i.type);if(!p)return null;for(var a=(p.length?p[p.length-1]:e).contentMatch,s=n;a&&s<o;s++)a=a.matchType(r.child(s).type);return a&&a.validEnd?p:null}function R(t,e,r){var n=t.resolve(e),o=n.index();return n.parent.canReplaceWith(o,o+1,r)}function b(t,e,r,n){void 0===r&&(r=1);var o=t.resolve(e),i=o.depth-r,p=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!p.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,s=r-2;a>i;a--,s--){var c=o.node(a),h=o.index(a);if(c.type.spec.isolating)return!1;var f=c.content.cutByIndex(h,c.childCount),l=n&&n[s]||c;if(l!=c&&(f=f.replaceChild(0,l.type.create(l.attrs))),!c.canReplace(h+1,c.childCount)||!l.type.validContent(f))return!1}var u=o.indexAfter(i),d=n&&n[0];return o.node(i).canReplaceWith(u,u,d?d.type:o.node(i+1).type)}function E(t,e){var r=t.resolve(e),n=r.index();return T(r.nodeBefore,r.nodeAfter)&&r.parent.canReplace(n,n+1)}function T(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function F(t,e,r){void 0===r&&(r=-1);for(var n=t.resolve(e),o=n.depth;;o--){var i=void 0,p=void 0,a=n.index(o);if(o==n.depth?(i=n.nodeBefore,p=n.nodeAfter):r>0?(i=n.node(o+1),a++,p=n.node(o).maybeChild(a)):(i=n.node(o).maybeChild(a-1),p=n.node(o+1)),i&&!i.isTextblock&&T(i,p)&&n.node(o).canReplace(a,a+1))return e;if(0==o)break;e=r<0?n.before(o):n.after(o)}}function A(t,e,r){var n=t.resolve(e);if(n.parent.canReplaceWith(n.index(),n.index(),r))return e;if(0==n.parentOffset)for(var o=n.depth-1;o>=0;o--){var i=n.index(o);if(n.node(o).canReplaceWith(i,i,r))return n.before(o+1);if(i>0)return null}if(n.parentOffset==n.parent.content.size)for(var p=n.depth-1;p>=0;p--){var a=n.indexAfter(p);if(n.node(p).canReplaceWith(a,a,r))return n.after(p+1);if(a<n.node(p).childCount)return null}}function O(t,e,r){var n=t.resolve(e);if(!r.content.size)return e;for(var o=r.content,i=0;i<r.openStart;i++)o=o.firstChild.content;for(var p=1;p<=(0==r.openStart&&r.size?2:1);p++)for(var a=n.depth;a>=0;a--){var s=a==n.depth?0:n.pos<=(n.start(a+1)+n.end(a+1))/2?-1:1,c=n.index(a)+(s>0?1:0);if(1==p?n.node(a).canReplace(c,c,o):n.node(a).contentMatchAt(c).findWrapping(o.firstChild.type))return 0==s?n.pos:s<0?n.before(a+1):n.after(a+1)}return null}function I(e,r,n){for(var o=[],i=0;i<e.childCount;i++){var p=e.child(i);p.content.size&&(p=p.copy(I(p.content,r,p))),p.isInline&&(p=r(p,n,i)),o.push(p)}return t.Fragment.fromArray(o)}exports.ReplaceAroundStep=y,d.jsonID("replaceAround",y),h.prototype.lift=function(e,r){for(var n=e.$from,o=e.$to,i=e.depth,p=n.before(i+1),a=o.after(i+1),s=p,c=a,h=t.Fragment.empty,f=0,l=i,u=!1;l>r;l--)u||n.index(l)>0?(u=!0,h=t.Fragment.from(n.node(l).copy(h)),f++):s--;for(var d=t.Fragment.empty,m=0,v=i,g=!1;v>r;v--)g||o.after(v+1)<o.end(v)?(g=!0,d=t.Fragment.from(o.node(v).copy(d)),m++):c++;return this.step(new y(s,c,p,a,new t.Slice(h.append(d),f,m),h.size-f,!0))},h.prototype.wrap=function(e,r){for(var n=t.Fragment.empty,o=r.length-1;o>=0;o--)n=t.Fragment.from(r[o].type.create(r[o].attrs,n));var i=e.start,p=e.end;return this.step(new y(i,p,i,p,new t.Slice(n,0,0),r.length,!0))},h.prototype.setBlockType=function(e,r,n,o){var i=this;if(void 0===r&&(r=e),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var p=this.steps.length;return this.doc.nodesBetween(e,r,function(e,r){if(e.isTextblock&&!e.hasMarkup(n,o)&&R(i.doc,i.mapping.slice(p).map(r),n)){i.clearIncompatible(i.mapping.slice(p).map(r,1),n);var a=i.mapping.slice(p),s=a.map(r,1),c=a.map(r+e.nodeSize,1);return i.step(new y(s,c,s+1,c-1,new t.Slice(t.Fragment.from(n.create(o,null,e.marks)),0,0),1,!0)),!1}}),this},h.prototype.setNodeMarkup=function(e,r,n,o){var i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");r||(r=i.type);var p=r.create(n,null,o||i.marks);if(i.isLeaf)return this.replaceWith(e,e+i.nodeSize,p);if(!r.validContent(i.content))throw new RangeError("Invalid content for node type "+r.name);return this.step(new y(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new t.Slice(t.Fragment.from(p),0,0),1,!0))},h.prototype.split=function(e,r,n){void 0===r&&(r=1);for(var o=this.doc.resolve(e),i=t.Fragment.empty,p=t.Fragment.empty,a=o.depth,s=o.depth-r,c=r-1;a>s;a--,c--){i=t.Fragment.from(o.node(a).copy(i));var h=n&&n[c];p=t.Fragment.from(h?h.type.create(h.attrs,p):o.node(a).copy(p))}return this.step(new v(e,e,new t.Slice(i.append(p),r,r),!0))},h.prototype.join=function(e,r){void 0===r&&(r=1);var n=new v(e-r,e+r,t.Slice.empty,!0);return this.step(n)};var z=function(e){function r(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(e){var r=this,n=e.slice(this.from,this.to),o=e.resolve(this.from),i=o.node(o.sharedDepth(this.to)),p=new t.Slice(I(n.content,function(t,e){return e.type.allowsMarkType(r.mark.type)?t.mark(r.mark.addToSet(t.marks)):t},i),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,p)},r.prototype.invert=function(){return new N(this.from,this.to,this.mark)},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new r(e.pos,n.pos,this.mark)},r.prototype.merge=function(t){if(t instanceof r&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new r(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},r.prototype.toJSON=function(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},r.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new r(e.from,e.to,t.markFromJSON(e.mark))},r}(d);exports.AddMarkStep=z,d.jsonID("addMark",z);var N=function(e){function r(t,r,n){e.call(this),this.from=t,this.to=r,this.mark=n}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.apply=function(e){var r=this,n=e.slice(this.from,this.to),o=new t.Slice(I(n.content,function(t){return t.mark(r.mark.removeFromSet(t.marks))}),n.openStart,n.openEnd);return m.fromReplace(e,this.from,this.to,o)},r.prototype.invert=function(){return new z(this.from,this.to,this.mark)},r.prototype.map=function(t){var e=t.mapResult(this.from,1),n=t.mapResult(this.to,-1);return e.deleted&&n.deleted||e.pos>=n.pos?null:new r(e.pos,n.pos,this.mark)},r.prototype.merge=function(t){if(t instanceof r&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new r(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},r.prototype.toJSON=function(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}},r.fromJSON=function(t,e){if("number"!=typeof e.from||"number"!=typeof e.to)throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new r(e.from,e.to,t.markFromJSON(e.mark))},r}(d);function _(e,r,n,o){if(void 0===n&&(n=r),void 0===o&&(o=t.Slice.empty),r==n&&!o.size)return null;var i=e.resolve(r),p=e.resolve(n);if($(i,p,o))return new v(r,n,o);var a=J(i,H(i,o)),s=P(i,p,a);if(!s)return null;if(a.size!=s.size&&L(i,p,a)){for(var c=p.depth,h=p.after(c);c>1&&h==p.end(--c);)++h;var f=P(i,e.resolve(h),a);if(f)return new y(r,h,n,p.end(),f,a.size)}return s.size||r!=n?new v(r,n,s):null}function B(e,r,n,o){var i=t.Fragment.empty,p=0,a=n[r];if(e.depth>r){var s=B(e,r+1,n,o||a);p=s.openEnd+1,i=t.Fragment.from(e.node(r+1).copy(s.content))}return a&&(i=i.append(a.content),p=a.openEnd),o&&(i=i.append(e.node(r).contentMatchAt(e.indexAfter(r)).fillBefore(t.Fragment.empty,!0)),p=0),{content:i,openEnd:p}}function J(e,r){var n=B(e,0,r,!1),o=n.content,i=n.openEnd;return new t.Slice(o,e.depth,i||0)}function j(t,e,r,n,o,i,p){var a,s=t.childCount,c=s-(p>0?1:0),h=i<0?e:r.node(o);a=i<0?h.contentMatchAt(c):1==s&&p>0?h.contentMatchAt(i?r.index(o):r.indexAfter(o)):h.contentMatchAt(r.indexAfter(o)).matchFragment(t,s>0&&i?1:0,c);var f=n.node(o);if(p>0&&o<n.depth){var l=f.content.cutByIndex(n.indexAfter(o)).addToStart(t.lastChild),u=a.fillBefore(l,!0);if(u&&u.size&&i>0&&1==s&&(u=null),u){var d=j(t.lastChild.content,t.lastChild,r,n,o+1,1==s?i-1:-1,p-1);if(d){var m=t.lastChild.copy(d);return u.size?t.cutByIndex(0,s-1).append(u).addToEnd(m):t.replaceChild(s-1,m)}}}p>0&&(a=a.matchType((1==s&&i>0?r.node(o+1):t.lastChild).type));var v=n.index(o);if(v==f.childCount&&!f.type.compatibleContent(e.type))return null;for(var y=a.fillBefore(f.content,!0,v),g=v;y&&g<f.content.childCount;g++)h.type.allowsMarks(f.content.child(g).marks)||(y=null);if(!y)return null;if(p>0){var S=W(t.lastChild,p-1,r,o+1,1==s?i-1:-1);t=t.replaceChild(s-1,S)}return t=t.append(y),n.depth>o&&(t=t.addToEnd(D(n,o+1))),t}function W(e,r,n,o,i){var p,a=e.content,s=a.childCount;if(p=i>=0?n.node(o).contentMatchAt(n.indexAfter(o)).matchFragment(a,i>0?1:0,s):e.contentMatchAt(s),r>0){var c=W(a.lastChild,r-1,n,o+1,1==s?i-1:-1);a=a.replaceChild(s-1,c)}return e.copy(a.append(p.fillBefore(t.Fragment.empty,!0)))}function D(t,e){var r=t.node(e),n=r.contentMatchAt(0).fillBefore(r.content,!0,t.index(e));return t.depth>e&&(n=n.addToEnd(D(t,e+1))),r.copy(n)}function q(e,r,n){for(;r>0&&n>0&&1==e.childCount;)e=e.firstChild.content,r--,n--;return new t.Slice(e,r,n)}function P(t,e,r){var n=j(r.content,t.node(0),t,e,0,r.openStart,r.openEnd);return n?q(n,r.openStart,e.depth):null}function $(t,e,r){return!r.openStart&&!r.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),r.content)}function L(t,e,r){if(!e.parent.isTextblock)return!1;var n,o=r.openEnd?G(r.content,r.openEnd):t.node(t.depth-(r.openStart-r.openEnd));if(!o.isTextblock)return!1;for(var i=e.index();i<e.parent.childCount;i++)if(!o.type.allowsMarks(e.parent.child(i).marks))return!1;return r.openEnd?n=o.contentMatchAt(o.childCount):(n=o.contentMatchAt(o.childCount),r.size&&(n=n.matchFragment(r.content,r.openStart?1:0))),(n=n.matchFragment(e.parent.content,e.index()))&&n.validEnd}function G(t,e){for(var r=1;r<e;r++)t=t.lastChild.content;return t.lastChild}function H(t,e){for(var r=new K(t),n=1;e.size&&n<=3;n++){var o=r.placeSlice(e.content,e.openStart,e.openEnd,n);3==n&&o!=e&&o.size&&(n=0),e=o}for(;r.open.length;)r.closeNode();return r.placed}exports.RemoveMarkStep=N,d.jsonID("removeMark",N),h.prototype.addMark=function(t,e,r){var n=this,o=[],i=[],p=null,a=null;return this.doc.nodesBetween(t,e,function(n,s,c){if(n.isInline){var h=n.marks;if(!r.isInSet(h)&&c.type.allowsMarkType(r.type)){for(var f=Math.max(s,t),l=Math.min(s+n.nodeSize,e),u=r.addToSet(h),d=0;d<h.length;d++)h[d].isInSet(u)||(p&&p.to==f&&p.mark.eq(h[d])?p.to=l:o.push(p=new N(f,l,h[d])));a&&a.to==f?a.to=l:i.push(a=new z(f,l,r))}}}),o.forEach(function(t){return n.step(t)}),i.forEach(function(t){return n.step(t)}),this},h.prototype.removeMark=function(e,r,n){var o=this;void 0===n&&(n=null);var i=[],p=0;return this.doc.nodesBetween(e,r,function(o,a){if(o.isInline){p++;var s=null;if(n instanceof t.MarkType){var c=n.isInSet(o.marks);c&&(s=[c])}else n?n.isInSet(o.marks)&&(s=[n]):s=o.marks;if(s&&s.length)for(var h=Math.min(a+o.nodeSize,r),f=0;f<s.length;f++){for(var l=s[f],u=void 0,d=0;d<i.length;d++){var m=i[d];m.step==p-1&&l.eq(i[d].style)&&(u=m)}u?(u.to=h,u.step=p):i.push({style:l,from:Math.max(a,e),to:h,step:p})}}}),i.forEach(function(t){return o.step(new N(t.from,t.to,t.style))}),this},h.prototype.clearIncompatible=function(e,r,n){void 0===n&&(n=r.contentMatch);for(var o=this.doc.nodeAt(e),i=[],p=e+1,a=0;a<o.childCount;a++){var s=o.child(a),c=p+s.nodeSize,h=n.matchType(s.type,s.attrs);if(h){n=h;for(var f=0;f<s.marks.length;f++)r.allowsMarkType(s.marks[f].type)||this.step(new N(p,c,s.marks[f]))}else i.push(new v(p,c,t.Slice.empty));p=c}if(!n.validEnd){var l=n.fillBefore(t.Fragment.empty,!0);this.replace(p,p,new t.Slice(l,0,0))}for(var u=i.length-1;u>=0;u--)this.step(i[u]);return this},h.prototype.replace=function(e,r,n){void 0===r&&(r=e),void 0===n&&(n=t.Slice.empty);var o=_(this.doc,e,r,n);return o&&this.step(o),this},h.prototype.replaceWith=function(e,r,n){return this.replace(e,r,new t.Slice(t.Fragment.from(n),0,0))},h.prototype.delete=function(e,r){return this.replace(e,r,t.Slice.empty)},h.prototype.insert=function(t,e){return this.replaceWith(t,t,e)};var K=function(e){this.open=[];for(var r=0;r<=e.depth;r++){var n=e.node(r),o=n.contentMatchAt(e.indexAfter(r));this.open.push({parent:n,match:o,content:t.Fragment.empty,wrapper:!1,openEnd:0,depth:r})}this.placed=[]};function Q(t,e,r){var n=t.content;if(e>1){var o=Q(t.firstChild,e-1,1==t.childCount?r-1:0);n=t.content.replaceChild(0,o)}var i=t.type.contentMatch.fillBefore(n,0==r);return t.copy(i.append(n))}function U(e,r){var n=e.content;if(r>1){var o=U(e.lastChild,r-1);n=e.content.replaceChild(e.childCount-1,o)}var i=e.contentMatchAt(e.childCount).fillBefore(t.Fragment.empty,!0);return e.copy(n.append(i))}function V(t,e){return e?t.replaceChild(t.childCount-1,U(t.lastChild,e)):t}function X(e,r,n,o,i){if(r<n){var p=e.firstChild;e=e.replaceChild(0,p.copy(X(p.content,r+1,n,o,p)))}if(r>o){var a=i.contentMatchAt(0),s=a.fillBefore(e).append(e);e=s.append(a.matchFragment(s).fillBefore(t.Fragment.empty,!0))}return e}function Y(t,e){for(var r=[],n=Math.min(t.depth,e.depth);n>=0;n--){var o=t.start(n);if(o<t.pos-(t.depth-n)||e.end(n)>e.pos+(e.depth-n)||t.node(n).type.spec.isolating||e.node(n).type.spec.isolating)break;o==e.start(n)&&r.push(n)}return r}K.prototype.placeSlice=function(e,r,n,o,i){if(r>0){var p=e.firstChild,a=this.placeSlice(p.content,Math.max(0,r-1),n&&1==e.childCount?n-1:0,o,p);a.content!=p.content&&(a.content.size?(e=e.replaceChild(0,p.copy(a.content)),r=a.openStart+1):(1==e.childCount&&(n=0),e=e.cutByIndex(1),r=0))}var s=this.placeContent(e,r,n,o,i);if(o>2&&s.size&&0==r){var c=s.content.firstChild,h=1==s.content.childCount;this.placeContent(c.content,0,n&&h?n-1:0,o,c),s=h?t.Fragment.empty:new t.Slice(s.content.cutByIndex(1),0,n)}return s},K.prototype.placeContent=function(e,r,n,o,i){for(var p=0;p<e.childCount;p++){for(var a=e.child(p),s=!1,c=p==e.childCount-1,h=this.open.length-1;h>=0;h--){var f=this.open[h],l=void 0;if(o>1&&(l=f.match.findWrapping(a.type))&&(!i||!l.length||l[l.length-1]!=i.type)){for(;this.open.length-1>h;)this.closeNode();for(var u=0;u<l.length;u++)f.match=f.match.matchType(l[u]),h++,f={parent:l[u].create(),match:l[u].contentMatch,content:t.Fragment.empty,wrapper:!0,openEnd:0,depth:h+u},this.open.push(f)}var d=f.match.matchType(a.type);if(!d){var m=f.match.fillBefore(t.Fragment.from(a));if(!m){if(i&&f.match.matchType(i.type))break;continue}for(var v=0;v<m.childCount;v++){var y=m.child(v);this.addNode(f,y,0),d=f.match.matchFragment(y)}}for(;this.open.length-1>h;)this.closeNode();a=a.mark(f.parent.type.allowedMarks(a.marks)),r&&(a=Q(a,r,c?n:0),r=0),this.addNode(f,a,c?n:0),f.match=d,c&&(n=0),s=!0;break}if(!s)break}return this.open.length>1&&(p>0&&p==e.childCount||i&&this.open[this.open.length-1].parent.type==i.type)&&this.closeNode(),new t.Slice(e.cutByIndex(p),r,n)},K.prototype.addNode=function(t,e,r){t.content=V(t.content,t.openEnd).addToEnd(e),t.openEnd=r},K.prototype.closeNode=function(){var t=this.open.pop();0==t.content.size||(t.wrapper?this.addNode(this.open[this.open.length-1],t.parent.copy(t.content),t.openEnd+1):this.placed[t.depth]={depth:t.depth,content:t.content,openEnd:t.openEnd})},h.prototype.replaceRange=function(e,r,n){if(!n.size)return this.deleteRange(e,r);var o=this.doc.resolve(e),i=this.doc.resolve(r);if($(o,i,n))return this.step(new v(e,r,n));var p=Y(o,this.doc.resolve(r));0==p[p.length-1]&&p.pop();var a=-(o.depth+1);p.unshift(a);for(var s=o.depth,c=o.pos-1;s>0;s--,c--){var h=o.node(s).type.spec;if(h.defining||h.isolating)break;p.indexOf(s)>-1?a=s:o.before(s)==c&&p.splice(1,0,-s)}for(var f=p.indexOf(a),l=[],u=n.openStart,d=n.content,m=0;;m++){var y=d.firstChild;if(l.push(y),m==n.openStart)break;d=y.content}u>0&&l[u-1].type.spec.defining&&o.node(f).type!=l[u-1].type?u-=1:u>=2&&l[u-1].isTextblock&&l[u-2].type.spec.defining&&o.node(f).type!=l[u-2].type&&(u-=2);for(var g=n.openStart;g>=0;g--){var S=(g+u+1)%(n.openStart+1),w=l[S];if(w)for(var x=0;x<p.length;x++){var k=p[(x+f)%p.length],M=!0;k<0&&(M=!1,k=-k);var C=o.node(k-1),R=o.index(k-1);if(C.canReplaceWith(R,R,w.type,w.marks))return this.replace(o.before(k),M?i.after(k):r,new t.Slice(X(n.content,0,n.openStart,S),S,n.openEnd))}}for(var b=this.steps.length,E=p.length-1;E>=0&&(this.replace(e,r,n),!(this.steps.length>b));E--){var T=p[E];E<0||(e=o.before(T),r=i.after(T))}return this},h.prototype.replaceRangeWith=function(e,r,n){if(!n.isInline&&e==r&&this.doc.resolve(e).parent.content.size){var o=A(this.doc,e,n.type);null!=o&&(e=r=o)}return this.replaceRange(e,r,new t.Slice(t.Fragment.from(n),0,0))},h.prototype.deleteRange=function(t,e){for(var r=this.doc.resolve(t),n=this.doc.resolve(e),o=Y(r,n),i=0;i<o.length;i++){var p=o[i],a=i==o.length-1;if(a&&0==p||r.node(p).type.contentMatch.validEnd)return this.delete(r.start(p),n.end(p));if(p>0&&(a||r.node(p-1).canReplace(r.index(p-1),n.indexAfter(p-1))))return this.delete(r.before(p),n.after(p))}for(var s=1;s<=r.depth&&s<=n.depth;s++)if(t-r.start(s)==r.depth-s&&e>r.end(s)&&n.end(s)-e!=n.depth-s)return this.delete(r.before(s),e);return this.delete(t,e)};
},{"prosemirror-model":"cBJM"}],"vbBo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transaction=exports.TextSelection=exports.SelectionRange=exports.Selection=exports.PluginKey=exports.Plugin=exports.NodeSelection=exports.EditorState=exports.AllSelection=void 0;var e=require("prosemirror-model"),t=require("prosemirror-transform"),n=Object.create(null),r=function(e,t,n){this.ranges=n||[new i(e.min(t),e.max(t))],this.$anchor=e,this.$head=t};exports.Selection=r;var o={anchor:{configurable:!0},head:{configurable:!0},from:{configurable:!0},to:{configurable:!0},$from:{configurable:!0},$to:{configurable:!0},empty:{configurable:!0}};o.anchor.get=function(){return this.$anchor.pos},o.head.get=function(){return this.$head.pos},o.from.get=function(){return this.$from.pos},o.to.get=function(){return this.$to.pos},o.$from.get=function(){return this.ranges[0].$from},o.$to.get=function(){return this.ranges[0].$to},o.empty.get=function(){for(var e=this.ranges,t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0},r.prototype.content=function(){return this.$from.node(0).slice(this.from,this.to,!0)},r.prototype.replace=function(t,n){void 0===n&&(n=e.Slice.empty);for(var r=n.content.lastChild,o=null,i=0;i<n.openEnd;i++)o=r,r=r.lastChild;for(var s=t.steps.length,a=this.ranges,c=0;c<a.length;c++){var p=a[c],u=p.$from,l=p.$to,h=t.mapping.slice(s);t.replaceRange(h.map(u.pos),h.map(l.pos),c?e.Slice.empty:n),0==c&&f(t,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}},r.prototype.replaceWith=function(e,t){for(var n=e.steps.length,r=this.ranges,o=0;o<r.length;o++){var i=r[o],s=i.$from,a=i.$to,c=e.mapping.slice(n),p=c.map(s.pos),u=c.map(a.pos);o?e.deleteRange(p,u):(e.replaceRangeWith(p,u,t),f(e,n,t.isInline?-1:1))}},r.findFrom=function(e,t,n){var r=e.parent.inlineContent?new s(e):h(e.node(0),e.parent,e.pos,e.index(),t,n);if(r)return r;for(var o=e.depth-1;o>=0;o--){var i=t<0?h(e.node(0),e.node(o),e.before(o+1),e.index(o),t,n):h(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,t,n);if(i)return i}},r.near=function(e,t){return void 0===t&&(t=1),this.findFrom(e,t)||this.findFrom(e,-t)||new u(e.node(0))},r.atStart=function(e){return h(e,e,0,0,1)||new u(e)},r.atEnd=function(e){return h(e,e,e.content.size,e.childCount,-1)||new u(e)},r.fromJSON=function(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");var r=n[t.type];if(!r)throw new RangeError("No selection type "+t.type+" defined");return r.fromJSON(e,t)},r.jsonID=function(e,t){if(e in n)throw new RangeError("Duplicate use of selection JSON ID "+e);return n[e]=t,t.prototype.jsonID=e,t},r.prototype.getBookmark=function(){return s.between(this.$anchor,this.$head).getBookmark()},Object.defineProperties(r.prototype,o),r.prototype.visible=!0;var i=function(e,t){this.$from=e,this.$to=t};exports.SelectionRange=i;var s=function(t){function n(e,n){void 0===n&&(n=e),t.call(this,e,n)}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var r={$cursor:{configurable:!0}};return r.$cursor.get=function(){return this.$anchor.pos==this.$head.pos?this.$head:null},n.prototype.map=function(e,r){var o=e.resolve(r.map(this.head));if(!o.parent.inlineContent)return t.near(o);var i=e.resolve(r.map(this.anchor));return new n(i.parent.inlineContent?i:o,o)},n.prototype.replace=function(n,r){if(void 0===r&&(r=e.Slice.empty),t.prototype.replace.call(this,n,r),r==e.Slice.empty){var o=this.$from.marksAcross(this.$to);o&&n.ensureMarks(o)}},n.prototype.eq=function(e){return e instanceof n&&e.anchor==this.anchor&&e.head==this.head},n.prototype.getBookmark=function(){return new a(this.anchor,this.head)},n.prototype.toJSON=function(){return{type:"text",anchor:this.anchor,head:this.head}},n.fromJSON=function(e,t){if("number"!=typeof t.anchor||"number"!=typeof t.head)throw new RangeError("Invalid input for TextSelection.fromJSON");return new n(e.resolve(t.anchor),e.resolve(t.head))},n.create=function(e,t,n){void 0===n&&(n=t);var r=e.resolve(t);return new this(r,n==t?r:e.resolve(n))},n.between=function(e,r,o){var i=e.pos-r.pos;if(o&&!i||(o=i>=0?1:-1),!r.parent.inlineContent){var s=t.findFrom(r,o,!0)||t.findFrom(r,-o,!0);if(!s)return t.near(r,o);r=s.$head}return e.parent.inlineContent||(0==i?e=r:(e=(t.findFrom(e,-o,!0)||t.findFrom(e,o,!0)).$anchor).pos<r.pos!=i<0&&(e=r)),new n(e,r)},Object.defineProperties(n.prototype,r),n}(r);exports.TextSelection=s,r.jsonID("text",s);var a=function(e,t){this.anchor=e,this.head=t};a.prototype.map=function(e){return new a(e.map(this.anchor),e.map(this.head))},a.prototype.resolve=function(e){return s.between(e.resolve(this.anchor),e.resolve(this.head))};var c=function(t){function n(e){var n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);t.call(this,e,r),this.node=n}return t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n,n.prototype.map=function(e,r){var o=r.mapResult(this.anchor),i=o.deleted,s=o.pos,a=e.resolve(s);return i?t.near(a):new n(a)},n.prototype.content=function(){return new e.Slice(e.Fragment.from(this.node),0,0)},n.prototype.eq=function(e){return e instanceof n&&e.anchor==this.anchor},n.prototype.toJSON=function(){return{type:"node",anchor:this.anchor}},n.prototype.getBookmark=function(){return new p(this.anchor)},n.fromJSON=function(e,t){if("number"!=typeof t.anchor)throw new RangeError("Invalid input for NodeSelection.fromJSON");return new n(e.resolve(t.anchor))},n.create=function(e,t){return new this(e.resolve(t))},n.isSelectable=function(e){return!e.isText&&!1!==e.type.spec.selectable},n}(r);exports.NodeSelection=c,c.prototype.visible=!1,r.jsonID("node",c);var p=function(e){this.anchor=e};p.prototype.map=function(e){var t=e.mapResult(this.anchor),n=t.deleted,r=t.pos;return n?new a(r,r):new p(r)},p.prototype.resolve=function(e){var t=e.resolve(this.anchor),n=t.nodeAfter;return n&&c.isSelectable(n)?new c(t):r.near(t)};var u=function(e){function t(t){e.call(this,t.resolve(0),t.resolve(t.content.size))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.toJSON=function(){return{type:"all"}},t.fromJSON=function(e){return new t(e)},t.prototype.map=function(e){return new t(e)},t.prototype.eq=function(e){return e instanceof t},t.prototype.getBookmark=function(){return l},t}(r);exports.AllSelection=u,r.jsonID("all",u);var l={map:function(){return this},resolve:function(e){return new u(e)}};function h(e,t,n,r,o,i){if(t.inlineContent)return s.create(e,n);for(var a=r-(o>0?0:1);o>0?a<t.childCount:a>=0;a+=o){var p=t.child(a);if(p.isAtom){if(!i&&c.isSelectable(p))return c.create(e,n-(o<0?p.nodeSize:0))}else{var u=h(e,p,n+o,o<0?p.childCount:0,o,i);if(u)return u}n+=p.nodeSize*o}}function f(e,n,o){var i=e.steps.length-1;if(!(i<n)){var s,a=e.steps[i];if(a instanceof t.ReplaceStep||a instanceof t.ReplaceAroundStep)e.mapping.maps[i].forEach(function(e,t,n,r){null==s&&(s=r)}),e.setSelection(r.near(e.doc.resolve(s),o))}}var d=1,m=2,y=4,g=function(t){function n(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(n.__proto__=t),n.prototype=Object.create(t&&t.prototype),n.prototype.constructor=n;var o={selection:{configurable:!0},selectionSet:{configurable:!0},storedMarksSet:{configurable:!0},isGeneric:{configurable:!0},scrolledIntoView:{configurable:!0}};return o.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},n.prototype.setSelection=function(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|d)&~m,this.storedMarks=null,this},o.selectionSet.get=function(){return(this.updated&d)>0},n.prototype.setStoredMarks=function(e){return this.storedMarks=e,this.updated|=m,this},n.prototype.ensureMarks=function(t){return e.Mark.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this},n.prototype.addStoredMark=function(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))},n.prototype.removeStoredMark=function(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))},o.storedMarksSet.get=function(){return(this.updated&m)>0},n.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=this.updated&~m,this.storedMarks=null},n.prototype.setTime=function(e){return this.time=e,this},n.prototype.replaceSelection=function(e){return this.selection.replace(this,e),this},n.prototype.replaceSelectionWith=function(t,n){var r=this.selection;return!1!==n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||e.Mark.none))),r.replaceWith(this,t),this},n.prototype.deleteSelection=function(){return this.selection.replace(this),this},n.prototype.insertText=function(e,t,n){void 0===n&&(n=t);var o=this.doc.type.schema;if(null==t)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();if(!e)return this.deleteRange(t,n);var i=this.storedMarks;if(!i){var s=this.doc.resolve(t);i=n==t?s.marks():s.marksAcross(this.doc.resolve(n))}return this.replaceRangeWith(t,n,o.text(e,i)),this.selection.empty||this.setSelection(r.near(this.selection.$to)),this},n.prototype.setMeta=function(e,t){return this.meta["string"==typeof e?e:e.key]=t,this},n.prototype.getMeta=function(e){return this.meta["string"==typeof e?e:e.key]},o.isGeneric.get=function(){for(var e in this.meta)return!1;return!0},n.prototype.scrollIntoView=function(){return this.updated|=y,this},o.scrolledIntoView.get=function(){return(this.updated&y)>0},Object.defineProperties(n.prototype,o),n}(t.Transform);function v(e,t){return t&&e?e.bind(t):e}exports.Transaction=g;var S=function(e,t,n){this.name=e,this.init=v(t.init,n),this.apply=v(t.apply,n)},k=[new S("doc",{init:function(e){return e.doc||e.schema.topNodeType.createAndFill()},apply:function(e){return e.doc}}),new S("selection",{init:function(e,t){return e.selection||r.atStart(t.doc)},apply:function(e){return e.selection}}),new S("storedMarks",{init:function(e){return e.storedMarks||null},apply:function(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new S("scrollToSelection",{init:function(){return 0},apply:function(e,t){return e.scrolledIntoView?t+1:t}})],w=function(e,t){var n=this;this.schema=e,this.fields=k.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),t&&t.forEach(function(e){if(n.pluginsByKey[e.key])throw new RangeError("Adding different instances of a keyed plugin ("+e.key+")");n.plugins.push(e),n.pluginsByKey[e.key]=e,e.spec.state&&n.fields.push(new S(e.key,e.spec.state,e))})},b=function(e){this.config=e};exports.EditorState=b;var O={schema:{configurable:!0},plugins:{configurable:!0},tr:{configurable:!0}};O.schema.get=function(){return this.config.schema},O.plugins.get=function(){return this.config.plugins},b.prototype.apply=function(e){return this.applyTransaction(e).state},b.prototype.filterTransaction=function(e,t){void 0===t&&(t=-1);for(var n=0;n<this.config.plugins.length;n++)if(n!=t){var r=this.config.plugins[n];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0},b.prototype.applyTransaction=function(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};for(var t=[e],n=this.applyInner(e),r=null;;){for(var o=!1,i=0;i<this.config.plugins.length;i++){var s=this.config.plugins[i];if(s.spec.appendTransaction){var a=r?r[i].n:0,c=r?r[i].state:this,p=a<t.length&&s.spec.appendTransaction.call(s,a?t.slice(a):t,c,n);if(p&&n.filterTransaction(p,i)){if(p.setMeta("appendedTransaction",e),!r){r=[];for(var u=0;u<this.config.plugins.length;u++)r.push(u<i?{state:n,n:t.length}:{state:this,n:0})}t.push(p),n=n.applyInner(p),o=!0}r&&(r[i]={state:n,n:t.length})}}if(!o)return{state:n,transactions:t}}},b.prototype.applyInner=function(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var t=new b(this.config),n=this.config.fields,r=0;r<n.length;r++){var o=n[r];t[o.name]=o.apply(e,this[o.name],this,t)}for(var i=0;i<$.length;i++)$[i](this,e,t);return t},O.tr.get=function(){return new g(this)},b.create=function(e){for(var t=new w(e.schema||e.doc.type.schema,e.plugins),n=new b(t),r=0;r<t.fields.length;r++)n[t.fields[r].name]=t.fields[r].init(e,n);return n},b.prototype.reconfigure=function(e){for(var t=new w(e.schema||this.schema,e.plugins),n=t.fields,r=new b(t),o=0;o<n.length;o++){var i=n[o].name;r[i]=this.hasOwnProperty(i)?this[i]:n[o].init(e,r)}return r},b.prototype.toJSON=function(e){var t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(function(e){return e.toJSON()})),e&&"object"==typeof e)for(var n in e){if("doc"==n||"selection"==n)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var r=e[n],o=r.spec.state;o&&o.toJSON&&(t[n]=o.toJSON.call(r,this[r.key]))}return t},b.fromJSON=function(t,n,o){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");var i=new w(t.schema,t.plugins),s=new b(i);return i.fields.forEach(function(i){if("doc"==i.name)s.doc=e.Node.fromJSON(t.schema,n.doc);else if("selection"==i.name)s.selection=r.fromJSON(s.doc,n.selection);else if("storedMarks"==i.name)n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(o)for(var a in o){var c=o[a],p=c.spec.state;if(c.key==i.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(n,a))return void(s[i.name]=p.fromJSON.call(c,t,n[a],s))}s[i.name]=i.init(t,s)}}),s},b.addApplyListener=function(e){$.push(e)},b.removeApplyListener=function(e){var t=$.indexOf(e);t>-1&&$.splice(t,1)},Object.defineProperties(b.prototype,O);var $=[];function M(e,t,n){for(var r in e){var o=e[r];o instanceof Function?o=o.bind(t):"handleDOMEvents"==r&&(o=M(o,t,{})),n[r]=o}return n}var x=function(e){this.props={},e.props&&M(e.props,this,this.props),this.spec=e,this.key=e.key?e.key.key:J("plugin")};exports.Plugin=x,x.prototype.getState=function(e){return e[this.key]};var N=Object.create(null);function J(e){return e in N?e+"$"+ ++N[e]:(N[e]=0,e+"$")}var T=function(e){void 0===e&&(e="key"),this.key=J(e)};exports.PluginKey=T,T.prototype.get=function(e){return e.config.pluginsByKey[this.key]},T.prototype.getState=function(e){return e[this.key]};
},{"prosemirror-model":"cBJM","prosemirror-transform":"etvU"}],"gYg9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__endComposition=Jt,exports.__parseFromClipboard=ct,exports.__serializeForClipboard=at,exports.EditorView=exports.DecorationSet=exports.Decoration=void 0;var e=require("prosemirror-state"),t=require("prosemirror-model"),o=require("prosemirror-transform"),n={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var r=/Edge\/(\d+)/.exec(navigator.userAgent),i=/MSIE \d/.test(navigator.userAgent),s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);n.mac=/Mac/.test(navigator.platform);var a=n.ie=!!(i||s||r);n.ie_version=i?document.documentMode||6:s?+s[1]:r?+r[1]:null,n.gecko=!a&&/gecko\/(\d+)/i.test(navigator.userAgent),n.gecko_version=n.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var c=!a&&/Chrome\/(\d+)/.exec(navigator.userAgent);n.chrome=!!c,n.chrome_version=c&&+c[1],n.ios=!a&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n.android=/Android \d/.test(navigator.userAgent),n.webkit=!a&&"WebkitAppearance"in document.documentElement.style,n.safari=/Apple Computer/.test(navigator.vendor),n.webkit_version=n.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var l=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},d=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},f=function(e,t,o){var n=document.createRange();return n.setEnd(e,null==o?e.nodeValue.length:o),n.setStart(e,t||0),n},h=function(e,t,o,n){return o&&(u(e,t,o,n,-1)||u(e,t,o,n,1))},p=/^(img|br|input|textarea|hr)$/i;function u(e,t,o,n,r){for(;;){if(e==o&&t==n)return!0;if(t==(r<0?0:m(e))){var i=e.parentNode;if(1!=i.nodeType||v(e)||p.test(e.nodeName)||"false"==e.contentEditable)return!1;t=l(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(r<0?-1:0)],t=r<0?m(e):0}}}function m(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function v(e){for(var t,o=e;o&&!(t=o.pmViewDesc);o=o.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var g=function(e){var t=e.isCollapsed;return t&&n.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function y(e,t){var o=document.createEvent("Event");return o.initEvent("keydown",!0,!0),o.keyCode=e,o.key=o.code=t,o}function b(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function w(e,t){return"number"==typeof e?e:e[t]}function S(e,t,o){for(var n=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=i.defaultView,a=o||e.dom;a;a=d(a))if(1==a.nodeType){var c=a==i.body||1!=a.nodeType,l=c?b(s):a.getBoundingClientRect(),f=0,h=0;if(t.top<l.top+w(n,"top")?h=-(l.top-t.top+w(r,"top")):t.bottom>l.bottom-w(n,"bottom")&&(h=t.bottom-l.bottom+w(r,"bottom")),t.left<l.left+w(n,"left")?f=-(l.left-t.left+w(r,"left")):t.right>l.right-w(n,"right")&&(f=t.right-l.right+w(r,"right")),(f||h)&&(c?s.scrollBy(f,h):(h&&(a.scrollTop+=h),f&&(a.scrollLeft+=f))),c)break}}function D(e){for(var t,o,n=e.dom.getBoundingClientRect(),r=Math.max(0,n.top),i=(n.left+n.right)/2,s=r+1;s<Math.min(innerHeight,n.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=r-20){t=a,o=c.top;break}}}return{refDOM:t,refTop:o,stack:O(e.dom)}}function O(e){for(var t=[],o=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=o);e=d(e));return t}function N(e){var t=e.refDOM,o=e.refTop,n=e.stack,r=t?t.getBoundingClientRect().top:0;C(n,0==r?0:r-o)}function C(e,t){for(var o=0;o<e.length;o++){var n=e[o],r=n.dom,i=n.top,s=n.left;r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}var x=null;function M(e){if(e.setActive)return e.setActive();if(x)return e.focus(x);var t=O(e);e.focus(null==x?{get preventScroll(){return x={preventScroll:!0},!0}}:void 0),x||(x=!1,C(t,0))}function T(e,t){for(var o,n,r=2e8,i=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var d=void 0;if(1==c.nodeType)d=c.getClientRects();else{if(3!=c.nodeType)continue;d=f(c).getClientRects()}for(var h=0;h<d.length;h++){var p=d[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var u=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(u<r){o=c,r=u,n=u&&3==o.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==c.nodeType&&u&&(i=l+(t.left>=(p.left+p.right)/2?1:0));continue}}!o&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=l+1)}}return o&&3==o.nodeType?k(o,n):!o||r&&1==o.nodeType?{node:e,offset:i}:T(o,n)}function k(e,t){for(var o=e.nodeValue.length,n=document.createRange(),r=0;r<o;r++){n.setEnd(e,r+1),n.setStart(e,r);var i=B(n,1);if(i.top!=i.bottom&&A(t,i))return{node:e,offset:r+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function A(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function P(e,t){var o=e.parentNode;return o&&/^li$/i.test(o.nodeName)&&t.left<e.getBoundingClientRect().left?o:e}function V(e,t,o){var n=T(t,o),r=n.node,i=n.offset,s=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();s=a.left!=a.right&&o.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function E(e,t,o,n){for(var r=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)r=s.posBefore;else{if(!(a.right<n.left||a.bottom<n.top))break;r=s.posAfter}}i=s.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,o)}function R(e,t,o){var n=e.childNodes.length;if(n&&o.top<o.bottom)for(var r=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-o.top)/(o.bottom-o.top))-2)),i=r;;){var s=e.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(A(t,l))return R(s,t,l)}if((i=(i+1)%n)==r)break}return e}function z(e,t){var o,r,i,s,a=e.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(t.left,t.top);c&&(i=(o=c).offsetNode,s=o.offset)}catch(v){}if(!i&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(t.left,t.top);l&&(i=(r=l).startContainer,s=r.startOffset)}var d,f=a.elementFromPoint(t.left,t.top+1);if(!f||!e.dom.contains(1!=f.nodeType?f.parentNode:f)){var h=e.dom.getBoundingClientRect();if(!A(t,h))return null;if(!(f=R(e.dom,t,h)))return null}if(f=P(f,t),i){if(n.gecko&&1==i.nodeType&&(s=Math.min(s,i.childNodes.length))<i.childNodes.length){var p,u=i.childNodes[s];"IMG"==u.nodeName&&(p=u.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&s++}i==e.dom&&s==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?d=e.state.doc.content.size:0!=s&&1==i.nodeType&&"BR"==i.childNodes[s-1].nodeName||(d=E(e,i,s,t))}null==d&&(d=V(e,f,t));var m=e.docView.nearestDesc(f,!0);return{pos:d,inside:m?m.posAtStart-m.border:-1}}function B(e,t){var o=e.getClientRects();return o.length?o[t<0?0:o.length-1]:e.getBoundingClientRect()}function _(e,t){var o=e.docView.domFromPos(t),r=o.node,i=o.offset;if(3==r.nodeType&&(n.chrome||n.gecko)){var s=B(f(r,i,i),0);if(n.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var a=B(f(r,i-1,i-1),-1);if(Math.abs(a.left-s.left)<1&&a.top==s.top){var c=B(f(r,i,i+1),-1);return L(c,c.left<a.left)}}return s}if(1==r.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var l,d=!0;if(i<r.childNodes.length){var h=r.childNodes[i];1==h.nodeType&&(l=h.getBoundingClientRect())}if(!l&&i){var p=r.childNodes[i-1];1==p.nodeType&&(l=p.getBoundingClientRect(),d=!1)}return F(l||r.getBoundingClientRect(),d)}for(var u=-1;u<2;u+=2)if(u<0&&i){var v=void 0,g=3==r.nodeType?f(r,i-1,i):3==(v=r.childNodes[i-1]).nodeType?f(v):1==v.nodeType&&"BR"!=v.nodeName?v:null;if(g){var y=B(g,1);if(y.top<y.bottom)return L(y,!1)}}else if(u>0&&i<m(r)){var b=void 0,w=3==r.nodeType?f(r,i,i+1):3==(b=r.childNodes[i]).nodeType?f(b):1==b.nodeType?b:null;if(w){var S=B(w,-1);if(S.top<S.bottom)return L(S,!0)}}return L(B(3==r.nodeType?f(r):r,0),!1)}function L(e,t){if(0==e.width)return e;var o=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:o,right:o}}function F(e,t){if(0==e.height)return e;var o=t?e.top:e.bottom;return{top:o,bottom:o,left:e.left,right:e.right}}function I(e,t,o){var n=e.state,r=e.root.activeElement;n!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return o()}finally{n!=t&&e.updateState(n),r!=e.dom&&r.focus()}}function q(e,t,o){var n=t.selection,r="up"==o?n.$anchor.min(n.$head):n.$anchor.max(n.$head);return I(e,t,function(){for(var t=e.docView.domFromPos(r.pos).node;;){var n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}for(var i=_(e,r.pos),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==o?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0})}var $=/[\u0590-\u08ac]/;function K(e,t,o){var n=t.selection.$head;if(!n.parent.isTextblock)return!1;var r=n.parentOffset,i=!r,s=r==n.parent.content.size,a=getSelection();return $.test(n.parent.textContent)&&a.modify?I(e,t,function(){var t=a.getRangeAt(0),r=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",o,"character");var c=!(n.depth?e.docView.domAfterPos(n.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),c}):"left"==o||"backward"==o?i:s}var W=null,j=null,H=!1;function U(e,t,o){return W==t&&j==o?H:(W=t,j=o,H="up"==o||"down"==o?q(e,t,o):K(e,t,o))}var G=0,X=1,Y=2,J=3,Q=function(e,t,o,n){this.parent=e,this.children=t,this.dom=o,o.pmViewDesc=this,this.contentDOM=n,this.dirty=G},Z={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};Q.prototype.matchesWidget=function(){return!1},Q.prototype.matchesMark=function(){return!1},Q.prototype.matchesNode=function(){return!1},Q.prototype.matchesHack=function(){return!1},Z.beforePosition.get=function(){return!1},Q.prototype.parseRule=function(){return null},Q.prototype.stopEvent=function(){return!1},Z.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},Z.border.get=function(){return 0},Q.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},Q.prototype.posBeforeChild=function(e){for(var t=0,o=this.posAtStart;t<this.children.length;t++){var n=this.children[t];if(n==e)return o;o+=n.size}},Z.posBefore.get=function(){return this.parent.posBeforeChild(this)},Z.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},Z.posAfter.get=function(){return this.posBefore+this.size},Z.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Q.prototype.localPosFromDOM=function(e,t,o){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(o<0){var n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?o>0:a)?this.posAtEnd:this.posAtStart},Q.prototype.nearestDesc=function(e,t){for(var o=!0,n=e;n;n=n.parentNode){var r=this.getDesc(n);if(r&&(!t||r.node)){if(!o||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(e):r.nodeDOM==e))return r;o=!1}}},Q.prototype.getDesc=function(e){for(var t=e.pmViewDesc,o=t;o;o=o.parent)if(o==this)return t},Q.prototype.posFromDOM=function(e,t,o){for(var n=e;;n=n.parentNode){var r=this.getDesc(n);if(r)return r.localPosFromDOM(e,t,o)}},Q.prototype.descAt=function(e){for(var t=0,o=0;t<this.children.length;t++){var n=this.children[t],r=o+n.size;if(o==e&&r!=o){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(e<r)return n.descAt(e-o-n.border);o=r}},Q.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,o=0;;o++){if(t==e){for(;o<this.children.length&&(this.children[o].beforePosition||this.children[o].dom.parentNode!=this.contentDOM);)o++;return{node:this.contentDOM,offset:o==this.children.length?this.contentDOM.childNodes.length:l(this.children[o].dom)}}if(o==this.children.length)throw new Error("Invalid position "+e);var n=this.children[o],r=t+n.size;if(e<r)return n.domFromPos(e-t-n.border);t=r}},Q.prototype.parseRange=function(e,t,o){if(void 0===o&&(o=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,r=-1,i=o,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==n&&e<=c){var d=i+a.border;if(e>=d&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,d);e=i;for(var f=s;f>0;f--){var h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){n=l(h.dom)+1;break}e-=h.size}-1==n&&(n=0)}if(n>-1&&t<=c){t=c;for(var p=s+1;p<this.children.length;p++){var u=this.children[p];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){r=l(u.dom);break}t+=u.size}-1==r&&(r=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:r}},Q.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},Q.prototype.domAfterPos=function(e){var t=this.domFromPos(e),o=t.node,n=t.offset;if(1!=o.nodeType||n==o.childNodes.length)throw new RangeError("No node after pos "+e);return o.childNodes[n]},Q.prototype.setSelection=function(e,t,o,n){for(var r=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(r>a&&i<l)return c.setSelection(e-a-c.border,t-a-c.border,o,n);a=l}var d=this.domFromPos(e),f=this.domFromPos(t),p=o.getSelection(),u=document.createRange();if(n||!h(d.node,d.offset,p.anchorNode,p.anchorOffset)||!h(f.node,f.offset,p.focusNode,p.focusOffset)){if(p.extend)u.setEnd(d.node,d.offset),u.collapse(!1);else{if(e>t){var m=d;d=f,f=m}u.setEnd(f.node,f.offset),u.setStart(d.node,d.offset)}p.removeAllRanges(),p.addRange(u),p.extend&&p.extend(f.node,f.offset)}},Q.prototype.ignoreMutation=function(e){return!this.contentDOM},Z.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Q.prototype.markDirty=function(e,t){for(var o=0,n=0;n<this.children.length;n++){var r=this.children[n],i=o+r.size;if(o==i?e<=i&&t>=o:e<i&&t>o){var s=o+r.border,a=i-r.border;if(e>=s&&t<=a)return this.dirty=e==o||t==i?Y:X,void(e!=s||t!=a||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-s,t-s):r.dirty=J);r.dirty=J}o=i}this.dirty=Y},Q.prototype.markParentsDirty=function(){for(var e=this.parent;e;e=e.parent){var t=Y;e.dirty<t&&(e.dirty=t)}},Object.defineProperties(Q.prototype,Z);var ee=[],te=function(e){function t(t,o,n,r){var i,s=o.type.toDOM;if("function"==typeof s&&(s=s(n,function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:r})),!o.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,ee,s,null),this.widget=o,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var o={beforePosition:{configurable:!0}};return o.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return this.dirty==G&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},Object.defineProperties(t.prototype,o),t}(Q),oe=function(e){function t(t,o,n,r){e.call(this,t,ee,o,null),this.textDOM=n,this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var o={size:{configurable:!0}};return o.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,o),t}(Q),ne=function(e){function o(t,o,n,r){e.call(this,t,[],n,r),this.mark=o}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.create=function(e,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=t.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new o(e,n,a.dom,a.contentDOM||a.dom)},o.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},o.prototype.matchesMark=function(e){return this.dirty!=J&&this.mark.eq(e)},o.prototype.markDirty=function(t,o){if(e.prototype.markDirty.call(this,t,o),this.dirty!=G){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=G}},o.prototype.slice=function(e,t,n){var r=o.create(this.parent,this.mark,!0,n),i=this.children,s=this.size;t<s&&(i=Ce(i,t,s,n)),e>0&&(i=Ce(i,0,e,n));for(var a=0;a<i.length;a++)i[a].parent=r;return r.children=i,r},o}(Q),re=function(o){function r(e,t,n,r,i,s,a,c,l){o.call(this,e,t.isLeaf?ee:[],i,s),this.nodeDOM=a,this.node=t,this.outerDeco=n,this.innerDeco=r,s&&this.updateChildren(c,l)}o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r;var i={size:{configurable:!0},border:{configurable:!0}};return r.create=function(e,o,n,i,s,a){var c,l,d=s.nodeViews[o.type.name],f=d&&d(o,s,function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a},n),h=f&&f.dom,p=f&&f.contentDOM;if(o.isText)if(h){if(3!=h.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else h=document.createTextNode(o.text);else h||(h=(c=t.DOMSerializer.renderSpec(document,o.type.spec.toDOM(o))).dom,p=c.contentDOM);p||o.isText||"BR"==h.nodeName||(h.hasAttribute("contenteditable")||(h.contentEditable=!1),o.type.spec.draggable&&(h.draggable=!0));var u=h;return h=me(h,n,o),f?l=new ce(e,o,n,i,h,p,u,f,s,a+1):o.isText?new se(e,o,n,i,h,u,s):new r(e,o,n,i,h,p,u,s,a+1)},r.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var o={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(o.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?o.contentElement=this.contentDOM:o.getContent=function(){return e.contentDOM?t.Fragment.empty:e.node.content},o},r.prototype.matchesNode=function(e,t,o){return this.dirty==G&&e.eq(this.node)&&ve(t,this.outerDeco)&&o.eq(this.innerDeco)},i.size.get=function(){return this.node.nodeSize},i.border.get=function(){return this.node.isLeaf?0:1},r.prototype.updateChildren=function(e,o){var n=this,r=this.node.inlineContent,i=o,s=r&&e.composing&&this.localCompositionNode(e,o),a=new ye(this,s&&s.node);Se(this.node,this.innerDeco,function(o,s){o.spec.marks?a.syncToMarks(o.spec.marks,r,e):o.type.side>=0&&a.syncToMarks(s==n.node.childCount?t.Mark.none:n.node.child(s).marks,r,e),a.placeWidget(o,e,i)},function(t,o,n,s){a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,o,n,s)||a.updateNextNode(t,o,n,e,s)||a.addNode(t,o,n,e,i),i+=t.nodeSize}),a.syncToMarks(ee,r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==Y)&&(s&&this.protectLocalComposition(e,s),this.renderChildren())},r.prototype.renderChildren=function(){le(this.contentDOM,this.children),n.ios&&De(this.dom)},r.prototype.localCompositionNode=function(t,o){var n=t.state.selection,r=n.from,i=n.to;if(!(!(t.state.selection instanceof e.TextSelection)||r<o||i>o+this.node.content.size)){var s=t.root.getSelection(),a=Oe(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=Ne(this.node.content,c,r-o,i-o);return l<0?null:{node:a,pos:l,text:c}}}},r.prototype.protectLocalComposition=function(e,t){var o=t.node,n=t.pos,r=t.text;if(!this.getDesc(o)){for(var i=o;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new oe(this,i,o,r);e.compositionNodes.push(s),this.children=Ce(this.children,n,n+r.length,e,s)}},r.prototype.update=function(e,t,o,n){return!(this.dirty==J||!e.sameMarkup(this.node))&&(this.updateInner(e,t,o,n),!0)},r.prototype.updateInner=function(e,t,o,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=o,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=G},r.prototype.updateOuterDeco=function(e){if(!ve(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,o=this.dom;this.dom=pe(this.dom,this.nodeDOM,he(this.outerDeco,this.node,t),he(e,this.node,t)),this.dom!=o&&(o.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},r.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},r.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!1)},Object.defineProperties(r.prototype,i),r}(Q);function ie(e,t,o,n,r){return me(n,t,e),new re(null,e,t,o,n,n,n,r,0)}var se=function(e){function t(t,o,n,r,i,s,a){e.call(this,t,o,n,r,i,null,s,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},t.prototype.update=function(e,t){return!(this.dirty==J||this.dirty!=G&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==G&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=G,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,o,n){return t==this.nodeDOM?this.posAtStart+Math.min(o,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,o,n)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,o,n){var r=this.node.cut(e,o),i=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)},t}(re),ae=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return this.dirty==G},t}(Q),ce=function(e){function t(t,o,n,r,i,s,a,c,l,d){e.call(this,t,o,n,r,i,s,a,l,d),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,o,n,r){if(this.dirty==J)return!1;if(this.spec.update){var i=this.spec.update(t,o);return i&&this.updateInner(t,o,n,r),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,o,n,r)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,o,n,r){this.spec.setSelection?this.spec.setSelection(t,o,n):e.prototype.setSelection.call(this,t,o,n,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(re);function le(e,t){for(var o=e.firstChild,n=0;n<t.length;n++){var r=t[n],i=r.dom;if(i.parentNode==e){for(;i!=o;)o=ge(o);o=o.nextSibling}else e.insertBefore(i,o);if(r instanceof ne){var s=o?o.previousSibling:e.lastChild;le(r.contentDOM,r.children),o=s?s.nextSibling:e.firstChild}}for(;o;)o=ge(o)}function de(e){e&&(this.nodeName=e)}de.prototype=Object.create(null);var fe=[new de];function he(e,t,o){if(0==e.length)return fe;for(var n=o?fe[0]:new de,r=[n],i=0;i<e.length;i++){var s=e[i].type.attrs,a=n;if(s)for(var c in s.nodeName&&r.push(a=new de(s.nodeName)),s){var l=s[c];null!=l&&(o&&1==r.length&&r.push(a=n=new de(t.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return r}function pe(e,t,o,n){if(o==fe&&n==fe)return t;for(var r=t,i=0;i<n.length;i++){var s=n[i],a=o[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&r!=e&&(c=t.parentNode)&&c.tagName.toLowerCase()==s.nodeName?r=c:((c=document.createElement(s.nodeName)).appendChild(r),r=c)}ue(r,a||fe[0],s)}return r}function ue(e,t,o){for(var n in t)"class"==n||"style"==n||"nodeName"==n||n in o||e.removeAttribute(n);for(var r in o)"class"!=r&&"style"!=r&&"nodeName"!=r&&o[r]!=t[r]&&e.setAttribute(r,o[r]);if(t.class!=o.class){for(var i=t.class?t.class.split(" "):ee,s=o.class?o.class.split(" "):ee,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=o.style){if(t.style)for(var l,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=d.exec(t.style);)e.style[l[1].toLowerCase()]="";o.style&&(e.style.cssText+=o.style)}}function me(e,t,o){return pe(e,e,fe,he(t,o,1!=e.nodeType))}function ve(e,t){if(e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!e[o].type.eq(t[o].type))return!1;return!0}function ge(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var ye=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var o=be(e.node.content,e.children);this.preMatched=o.nodes,this.preMatchOffset=o.offset};function be(e,t){for(var o=[],n=e.childCount,r=t.length-1;n>0&&r>=0;r--){var i=t[r],s=i.node;if(s){if(s!=e.child(n-1))break;o.push(i),--n}}return{nodes:o.reverse(),offset:n}}function we(e,t){return e.type.side-t.type.side}function Se(e,t,o,n){var r=t.locals(e),i=0;if(0!=r.length)for(var s=0,a=[],c=null,l=0;;){if(s<r.length&&r[s].to==i){for(var d=r[s++],f=void 0;s<r.length&&r[s].to==i;)(f||(f=[d])).push(r[s++]);if(f){f.sort(we);for(var h=0;h<f.length;h++)o(f[h],l)}else o(d,l)}var p=void 0,u=void 0;if(c)u=-1,p=c,c=null;else{if(!(l<e.childCount))break;u=l,p=e.child(l++)}for(var m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);for(;s<r.length&&r[s].from==i;)a.push(r[s++]);var v=i+p.nodeSize;if(p.isText){var g=v;s<r.length&&r[s].from<g&&(g=r[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=p.cut(g-i),p=p.cut(0,g-i),v=g,u=-1)}n(p,a.length?a.slice():ee,t.forChild(i,p),u),i=v}else for(var b=0;b<e.childCount;b++){var w=e.child(b);n(w,r,t.forChild(i,w),b),i+=w.nodeSize}}function De(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Oe(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=m(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function Ne(e,t,o,n){for(var r="",i=0,s=0;i<e.childCount;i++){var a=e.child(i),c=s+a.nodeSize;if(a.isText){if(r+=a.text,c>=n){for(var l=c-r.length,d=r.lastIndexOf(t);d>-1&&l+d>o;)d=r.lastIndexOf(t,d-1);if(d>-1&&l+d+t.length>=n)return l+d;if(c>n)break}}else r="";s=c}return-1}function Ce(e,t,o,n,r){for(var i=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,d=a+=c.size;l>=o||d<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,n)),r&&(i.push(r),r=null),d>o&&i.push(c.slice(o-l,c.size,n)))}return i}function xe(t,o){var n=t.selection,r=n.$anchor,i=n.$head,s=o>0?r.max(i):r.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(o>0?s.after():s.before()):null:s;return a&&e.Selection.findFrom(a,o)}function Me(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Te(t,o,r){var i=t.state.selection;if(i instanceof e.TextSelection){if(!i.empty||r.indexOf("s")>-1)return!1;if(t.endOfTextblock(o>0?"right":"left")){var s=xe(t.state,o);return!!(s&&s instanceof e.NodeSelection)&&Me(t,s)}var a,c=i.$head,l=c.textOffset?null:o<0?c.nodeBefore:c.nodeAfter;if(!l||l.isText)return!1;var d=o<0?c.pos-l.nodeSize:c.pos;return!!(l.isAtom||(a=t.docView.descAt(d))&&!a.contentDOM)&&(e.NodeSelection.isSelectable(l)?Me(t,new e.NodeSelection(o<0?t.state.doc.resolve(c.pos-l.nodeSize):c)):!!n.webkit&&Me(t,new e.TextSelection(t.state.doc.resolve(o<0?d:d+l.nodeSize))))}if(i instanceof e.NodeSelection&&i.node.isInline)return Me(t,new e.TextSelection(o>0?i.$to:i.$from));var f=xe(t.state,o);return!!f&&Me(t,f)}function ke(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Ae(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Pe(e){var t=e.root.getSelection(),o=t.focusNode,r=t.focusOffset;if(o){var i,s,a=!1;for(n.gecko&&1==o.nodeType&&r<ke(o)&&Ae(o.childNodes[r])&&(a=!0);;)if(r>0){if(1!=o.nodeType)break;var c=o.childNodes[r-1];if(Ae(c))i=o,s=--r;else{if(3!=c.nodeType)break;r=(o=c).nodeValue.length}}else{if(Ee(o))break;for(var d=o.previousSibling;d&&Ae(d);)i=o.parentNode,s=l(d),d=d.previousSibling;if(d)r=ke(o=d);else{if((o=o.parentNode)==e.dom)break;r=0}}a?Re(e,t,o,r):i&&Re(e,t,i,s)}}function Ve(e){var t=e.root.getSelection(),o=t.focusNode,n=t.focusOffset;if(o){for(var r,i,s=ke(o);;)if(n<s){if(1!=o.nodeType)break;if(!Ae(o.childNodes[n]))break;r=o,i=++n}else{if(Ee(o))break;for(var a=o.nextSibling;a&&Ae(a);)r=a.parentNode,i=l(a)+1,a=a.nextSibling;if(a)n=0,s=ke(o=a);else{if((o=o.parentNode)==e.dom)break;n=s=0}}r&&Re(e,t,r,i)}}function Ee(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Re(e,t,o,n){if(g(t)){var r=document.createRange();r.setEnd(o,n),r.setStart(o,n),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(o,n);e.domObserver.setCurSelection()}function ze(t,o,n){var r=t.state.selection;if(r instanceof e.TextSelection&&!r.empty||n.indexOf("s")>-1)return!1;var i=r.$from,s=r.$to;if(!i.parent.inlineContent||t.endOfTextblock(o<0?"up":"down")){var a=xe(t.state,o);if(a&&a instanceof e.NodeSelection)return Me(t,a)}if(!i.parent.inlineContent){var c=e.Selection.findFrom(o<0?i:s,o);return!c||Me(t,c)}return!1}function Be(t,o){if(!(t.state.selection instanceof e.TextSelection))return!0;var n=t.state.selection,r=n.$head,i=n.$anchor,s=n.empty;if(!r.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(o>0?"forward":"backward"))return!0;var a=!r.textOffset&&(o<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return o<0?c.delete(r.pos-a.nodeSize,r.pos):c.delete(r.pos,r.pos+a.nodeSize),t.dispatch(c),!0}return!1}function _e(e,t,o){e.domObserver.stop(),t.contentEditable=o,e.domObserver.start()}function Le(e){if(n.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),o=t.focusNode,r=t.focusOffset;if(o&&1==o.nodeType&&0==r&&o.firstChild&&"false"==o.firstChild.contentEditable){var i=o.firstChild;_e(e,i,!0),setTimeout(function(){return _e(e,i,!1)},20)}}}function Fe(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function Ie(e,t){var o=t.keyCode,r=Fe(t);return 8==o||n.mac&&72==o&&"c"==r?Be(e,-1)||Pe(e):46==o||n.mac&&68==o&&"c"==r?Be(e,1)||Ve(e):13==o||27==o||(37==o?Te(e,-1,r)||Pe(e):39==o?Te(e,1,r)||Ve(e):38==o?ze(e,-1,r)||Pe(e):40==o?Le(e)||ze(e,1,r)||Ve(e):r==(n.mac?"m":"c")&&(66==o||73==o||89==o||90==o))}function qe(t,o){var n,r,i=t.root.getSelection(),s=t.state.doc,a=t.docView.nearestDesc(i.focusNode),c=a&&0==a.size,l=t.docView.posFromDOM(i.focusNode,i.focusOffset),d=s.resolve(l);if(g(i)){for(n=d;a&&!a.node;)a=a.parent;if(a&&a.node.isAtom&&e.NodeSelection.isSelectable(a.node)&&a.parent){var f=a.posBefore;r=new e.NodeSelection(l==f?d:s.resolve(f))}}else n=s.resolve(t.docView.posFromDOM(i.anchorNode,i.anchorOffset));r||(r=Xe(t,n,d,"pointer"==o||t.state.selection.head<d.pos&&!c?1:-1));return r}function $e(t,o){var n=t.state.selection;if(Ue(t,n),t.editable?t.hasFocus():Je(t)&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)He(t);else{var r,i,s=n.anchor,a=n.head;!Ke||n instanceof e.TextSelection||(n.$from.parent.inlineContent||(r=We(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=We(t,n.to))),t.docView.setSelection(s,a,t.root,o),Ke&&(r&&(r.contentEditable="false"),i&&(i.contentEditable="false")),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):s!=a&&(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&je(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}ye.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},ye.prototype.destroyBetween=function(e,t){if(e!=t){for(var o=e;o<t;o++)this.top.children[o].destroy();this.top.children.splice(e,t-e),this.changed=!0}},ye.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},ye.prototype.syncToMarks=function(e,t,o){for(var n=0,r=this.stack.length>>1,i=Math.min(r,e.length);n<i&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=G,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[r])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=ne.create(this.top,e[r],t,o);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,r++}},ye.prototype.findNodeMatch=function(e,t,o,n){var r=-1,i=n<0?void 0:this.getPreMatch(n),s=this.top.children;if(i&&i.matchesNode(e,t,o))r=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(e,t,o)&&this.preMatched.indexOf(l)<0){r=a;break}}return!(r<0)&&(this.destroyBetween(this.index,r),this.index++,!0)},ye.prototype.updateNextNode=function(e,t,o,n,r){if(this.index==this.top.children.length)return!1;var i=this.top.children[this.index];if(i instanceof re){var s=this.preMatched.indexOf(i);if(s>-1&&s+this.preMatchOffset!=r)return!1;var a=i.dom;if(!(this.lock&&(a==this.lock||1==a.nodeType&&a.contains(this.lock.parentNode))&&!(e.isText&&i.node&&i.node.isText&&i.nodeDOM.nodeValue==e.text&&i.dirty!=J&&ve(t,i.outerDeco)))&&i.update(e,t,o,n))return i.dom!=a&&(this.changed=!0),this.index++,!0}return!1},ye.prototype.addNode=function(e,t,o,n,r){this.top.children.splice(this.index++,0,re.create(this.top,e,t,o,n,r)),this.changed=!0},ye.prototype.placeWidget=function(e,t,o){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var n=new te(this.top,e,t,o);this.top.children.splice(this.index++,0,n),this.changed=!0}},ye.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof ne;)e=e.children[e.children.length-1];if(!e||!(e instanceof se)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new ae(this.top,ee,t,null)),this.changed=!0}};var Ke=n.safari||n.chrome&&n.chrome_version<63;function We(e,t){var o=e.docView.domFromPos(t),n=o.node,r=o.offset,i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(!(i&&"false"!=i.contentEditable||s&&"false"!=s.contentEditable)){if(i)return i.contentEditable="true",i;if(s)return s.contentEditable="true",s}}function je(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var o=e.root.getSelection(),n=o.anchorNode,r=o.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){o.anchorNode==n&&o.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}function He(e){var t=e.root.getSelection(),o=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?o.setEnd(r.parentNode,l(r)+1):o.setEnd(r,0),o.collapse(!1),t.removeAllRanges(),t.addRange(o),!i&&!e.state.selection.visible&&n.ie&&n.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function Ue(t,o){if(o instanceof e.NodeSelection){var n=t.docView.descAt(o.from);n!=t.lastSelectedViewDesc&&(Ge(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Ge(t)}function Ge(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Xe(t,o,n,r){return t.someProp("createSelectionBetween",function(e){return e(t,o,n)})||e.TextSelection.between(o,n,r)}function Ye(e){return(!e.editable||e.root.activeElement==e.dom)&&Je(e)}function Je(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(o){return!1}}function Qe(e){var t=e.docView.domFromPos(e.state.selection.anchor),o=e.root.getSelection();return h(t.node,t.offset,o.anchorNode,o.anchorOffset)}function Ze(e,o,r){var i=e.docView.parseRange(o,r),s=i.node,a=i.fromOffset,c=i.toOffset,l=i.from,d=i.to,f=e.root.getSelection(),h=null,p=f.anchorNode;if(p&&e.dom.contains(1==p.nodeType?p:p.parentNode)&&(h=[{node:p,offset:f.anchorOffset}],g(f)||h.push({node:f.focusNode,offset:f.focusOffset})),n.chrome&&8===e.lastKeyCode)for(var u=c;u>a;u--){var m=s.childNodes[u-1],v=m.pmViewDesc;if("BR"==m.nodeType&&!v){c=u;break}if(!v||v.size)break}var y=e.state.doc,b=e.someProp("domParser")||t.DOMParser.fromSchema(e.state.schema),w=y.resolve(l),S=null,D=b.parse(s,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!w.parent.type.spec.code||"full",editableContent:!0,findPositions:h,ruleFromNode:et(b,w),context:w});if(h&&null!=h[0].pos){var O=h[0].pos,N=h[1]&&h[1].pos;null==N&&(N=O),S={anchor:O+l,head:N+l}}return{doc:D,sel:S,from:l,to:d}}function et(e,t){return function(o){var r=o.pmViewDesc;if(r)return r.parseRule();if("BR"==o.nodeName&&o.parentNode){if(n.safari&&/^(ul|ol)$/i.test(o.parentNode.nodeName))return e.matchTag(document.createElement("li"),t);if(o.parentNode.lastChild==o||n.safari&&/^(tr|table)$/i.test(o.parentNode.nodeName))return{ignore:!0}}else if("IMG"==o.nodeName&&o.getAttribute("mark-placeholder"))return{ignore:!0}}}function tt(t,o,r,i){if(o<0){var s=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,a=qe(t,s);if(!t.state.selection.eq(a)){var c=t.state.tr.setSelection(a);"pointer"==s?c.setMeta("pointer",!0):"key"==s&&c.scrollIntoView(),t.dispatch(c)}}else{var l=t.state.doc.resolve(o),d=l.sharedDepth(r);o=l.before(d+1),r=t.state.doc.resolve(r).after(d+1);var f,h,p=t.state.selection,u=Ze(t,o,r),m=t.state.doc,v=m.slice(u.from,u.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.lastKeyCode=null;var g=st(v.content,u.doc.content,u.from,f,h);if(!g){if(!(i&&p instanceof e.TextSelection&&!p.empty&&p.$head.sameParent(p.$anchor))||t.composing||u.sel&&u.sel.anchor!=u.sel.head){if(u.sel){var b=ot(t,t.state.doc,u.sel);b&&!b.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(b))}return}g={start:p.from,endA:p.to,endB:p.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&g.start==g.endB&&t.state.selection instanceof e.TextSelection&&(g.start>t.state.selection.from&&g.start<=t.state.selection.from+2?g.start=t.state.selection.from:g.endA<t.state.selection.to&&g.endA>=t.state.selection.to-2&&(g.endB+=t.state.selection.to-g.endA,g.endA=t.state.selection.to)),n.ie&&n.ie_version<=11&&g.endB==g.start+1&&g.endA==g.start&&g.start>u.from&&"  "==u.doc.textBetween(g.start-u.from-1,g.start-u.from+1)&&(g.start--,g.endA--,g.endB--);var w,S=u.doc.resolveNoCache(g.start-u.from),D=u.doc.resolveNoCache(g.endB-u.from);if(!(!S.sameParent(D)&&S.pos<u.doc.content.size&&(w=e.Selection.findFrom(u.doc.resolve(S.pos+1),1,!0))&&w.head==D.pos&&t.someProp("handleKeyDown",function(e){return e(t,y(13,"Enter"))})))if(t.state.selection.anchor>g.start&&rt(m,g.start,g.endA,S,D)&&t.someProp("handleKeyDown",function(e){return e(t,y(8,"Backspace"))}))n.android&&n.chrome&&t.domObserver.suppressSelectionUpdates();else{var O,N,C,x,M=g.start,T=g.endA;if(S.sameParent(D)&&S.parent.inlineContent)if(S.pos==D.pos)n.ie&&n.ie_version<=11&&0==S.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout(function(){return $e(t)},20)),O=t.state.tr.delete(M,T),N=m.resolve(g.start).marksAcross(m.resolve(g.endA));else if(g.endA==g.endB&&(x=m.resolve(g.start))&&(C=nt(S.parent.content.cut(S.parentOffset,D.parentOffset),x.parent.content.cut(x.parentOffset,g.endA-x.start()))))O=t.state.tr,"add"==C.type?O.addMark(M,T,C.mark):O.removeMark(M,T,C.mark);else if(S.parent.child(S.index()).isText&&S.index()==D.index()-(D.textOffset?0:1)){var k=S.parent.textBetween(S.parentOffset,D.parentOffset);if(t.someProp("handleTextInput",function(e){return e(t,M,T,k)}))return;O=t.state.tr.insertText(k,M,T)}if(O||(O=t.state.tr.replace(M,T,u.doc.slice(g.start-u.from,g.endB-u.from))),u.sel){var A=ot(t,O.doc,u.sel);A&&!(n.chrome&&n.android&&t.composing&&A.empty&&A.head==M||n.ie&&A.empty&&A.head==M)&&O.setSelection(A)}N&&O.ensureMarks(N),t.dispatch(O.scrollIntoView())}}}function ot(e,t,o){return Math.max(o.anchor,o.head)>t.content.size?null:Xe(e,t.resolve(o.anchor),t.resolve(o.head))}function nt(e,o){for(var n,r,i,s=e.firstChild.marks,a=o.firstChild.marks,c=s,l=a,d=0;d<a.length;d++)c=a[d].removeFromSet(c);for(var f=0;f<s.length;f++)l=s[f].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var h=[],p=0;p<o.childCount;p++)h.push(i(o.child(p)));if(t.Fragment.from(h).eq(e))return{mark:r,type:n}}function rt(e,t,o,n,r){if(!n.parent.isTextblock||o-t<=r.pos-n.pos||it(n,!0,!1)<r.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(it(i,!0,!0));return!(!s.parent.isTextblock||s.pos>o||it(s,!0,!1)<o)&&n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function it(e,t,o){for(var n=e.depth,r=t?e.end():e.pos;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,r++,t=!1;if(o)for(var i=e.node(n).maybeChild(e.indexAfter(n));i&&!i.isLeaf;)i=i.firstChild,r++;return r}function st(e,t,o,n,r){var i=e.findDiffStart(t,o);if(null==i)return null;var s=e.findDiffEnd(t,o+e.size,o+t.size),a=s.a,c=s.b;"end"==r&&(n-=a+Math.max(0,i-Math.min(a,c))-i);if(a<i&&e.size<t.size)c=(i-=n<=i&&n>=a?i-n:0)+(c-a),a=i;else if(c<i){a=(i-=n<=i&&n>=c?i-n:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}function at(e,o){for(var n=[],r=o.content,i=o.openStart,s=o.openEnd;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||t.DOMSerializer.fromSchema(e.state.schema),l=gt(),d=l.createElement("div");d.appendChild(c.serializeFragment(r,{document:l}));for(var f,h=d.firstChild;h&&1==h.nodeType&&(f=mt[h.nodeName.toLowerCase()]);){for(var p=f.length-1;p>=0;p--){for(var u=l.createElement(f[p]);d.firstChild;)u.appendChild(d.firstChild);d.appendChild(u)}h=d.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:d,text:e.someProp("clipboardTextSerializer",function(e){return e(o)})||o.content.textBetween(0,o.content.size,"\n\n")}}function ct(e,o,n,r,i){var s,a,c=i.parent.type.spec.code;if(!n&&!o)return null;var l=o&&(r||c||!n);if(l){if(e.someProp("transformPastedText",function(e){o=e(o)}),c)return new t.Slice(t.Fragment.from(e.state.schema.text(o)),0,0);var d=e.someProp("clipboardTextParser",function(e){return e(o,i)});d?a=d:(s=document.createElement("div"),o.trim().split(/(?:\r\n?|\n)+/).forEach(function(e){s.appendChild(document.createElement("p")).textContent=e}))}else e.someProp("transformPastedHTML",function(e){n=e(n)}),s=yt(n);var f=s&&s.querySelector("[data-pm-slice]"),h=f&&/^(\d+) (\d+) (.*)/.exec(f.getAttribute("data-pm-slice"));if(!a){var p=e.someProp("clipboardParser")||e.someProp("domParser")||t.DOMParser.fromSchema(e.state.schema);a=p.parseSlice(s,{preserveWhitespace:!(!l&&!h),context:i})}return a=h?bt(ut(a,+h[1],+h[2]),h[3]):t.Slice.maxOpen(lt(a.content,i),!1),e.someProp("transformPasted",function(e){a=e(a)}),a}function lt(e,o){if(e.childCount<2)return e;for(var n=function(n){var r=o.node(n).contentMatchAt(o.index(n)),i=void 0,s=[];if(e.forEach(function(e){if(s){var t,o=r.findWrapping(e.type);if(!o)return s=null;if(t=s.length&&i.length&&ft(o,i,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=ht(s[s.length-1],i.length));var n=dt(e,o);s.push(n),r=r.matchType(n.type,n.attrs),i=o}}}),s)return{v:t.Fragment.from(s)}},r=o.depth;r>=0;r--){var i=n(r);if(i)return i.v}return e}function dt(e,o,n){void 0===n&&(n=0);for(var r=o.length-1;r>=n;r--)e=o[r].create(null,t.Fragment.from(e));return e}function ft(e,o,n,r,i){if(i<e.length&&i<o.length&&e[i]==o[i]){var s=ft(e,o,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(t.Fragment.from(dt(n,e,i+1))))}}function ht(e,o){if(0==o)return e;var n=e.content.replaceChild(e.childCount-1,ht(e.lastChild,o-1)),r=e.contentMatchAt(e.childCount).fillBefore(t.Fragment.empty,!0);return e.copy(n.append(r))}function pt(e,o,n,r,i,s){var a=o<0?e.firstChild:e.lastChild,c=a.content;return i<r-1&&(c=pt(c,o,n,r,i+1,s)),i>=n&&(c=o<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(t.Fragment.empty,!0))),e.replaceChild(o<0?0:e.childCount-1,a.copy(c))}function ut(e,o,n){return o<e.openStart&&(e=new t.Slice(pt(e.content,-1,o,e.openStart,0,e.openEnd),o,e.openEnd)),n<e.openEnd&&(e=new t.Slice(pt(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var mt={thead:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},vt=null;function gt(){return vt||(vt=document.implementation.createHTMLDocument("title"))}function yt(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var o,n=gt().createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(o=r&&mt[r[1].toLowerCase()])&&(e=o.map(function(e){return"<"+e+">"}).join("")+e+o.map(function(e){return"</"+e+">"}).reverse().join(""),i=o.length),n.innerHTML=e;for(var s=0;s<i;s++)n=n.firstChild;return n}function bt(e,o){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(o)}catch(d){return e}for(var i=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=t.Fragment.from(l.create(n[c+1],i)),s++,a++}return new t.Slice(i,s,a)}var wt={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},St=n.ie&&n.ie_version<=11,Dt=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Dt.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Dt.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var Ot=function(e,t){var o=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=!1,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){for(var t=0;t<e.length;t++)o.queue.push(e[t]);n.ie&&n.ie_version<=11&&e.some(function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length})?o.flushSoon():o.flush()}),this.currentSelection=new Dt,St&&(this.onCharData=function(e){o.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),o.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};Ot.prototype.flushSoon=function(){var e=this;this.flushingSoon||(this.flushingSoon=!0,window.setTimeout(function(){e.flushingSoon=!1,e.flush()},20))},Ot.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,wt),St&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},Ot.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var o=0;o<t.length;o++)this.queue.push(t[o]);window.setTimeout(function(){return e.flush()},20)}this.observer.disconnect()}St&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},Ot.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},Ot.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},Ot.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return e.suppressingSelectionUpdates=!1},50)},Ot.prototype.onSelectionChange=function(){if(Ye(this.view)){if(this.suppressingSelectionUpdates)return $e(this.view);if(n.ie&&n.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&h(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},Ot.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},Ot.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,o=this.view.docView.nearestDesc(t);return o&&o.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})},Ot.prototype.flush=function(){if(this.view.docView&&!this.flushingSoon){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&Je(this.view)&&!this.ignoreSelectionChange(t),n=-1,r=-1,i=!1,s=[];if(this.view.editable)for(var a=0;a<e.length;a++){var c=this.registerMutation(e[a],s);c&&(n=n<0?c.from:Math.min(c.from,n),r=r<0?c.to:Math.max(c.to,r),c.typeOver&&!this.view.composing&&(i=!0))}(n>-1||o)&&(n>-1&&(this.view.docView.markDirty(n,r),Ct(this.view)),this.handleDOMChange(n,r,i),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||$e(this.view))}},Ot.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var o=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(o==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!o||o.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,i=e.nextSibling;if(n.ie&&n.ie_version<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var a=e.addedNodes[s],c=a.previousSibling,d=a.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(r=c),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d)}for(var f=r&&r.parentNode==e.target?l(r)+1:0,h=o.localPosFromDOM(e.target,f,-1),p=i&&i.parentNode==e.target?l(i):e.target.childNodes.length,u=0;u<e.addedNodes.length;u++)t.push(e.addedNodes[u]);return{from:h,to:o.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:o.posAtStart-o.border,to:o.posAtEnd+o.border}:{from:o.posAtStart,to:o.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Nt=!1;function Ct(e){Nt||(Nt=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var xt={},Mt={};function Tt(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new Ot(e,function(t,o,n){return tt(e,t,o,n)}),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var o=xt[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!Et(e,t)||Vt(e,t)||!e.editable&&t.type in Mt||o(e,t)})};for(var o in xt)t(o);n.safari&&e.dom.addEventListener("input",function(){return null}),Pt(e)}function kt(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function At(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout)}function Pt(e){e.someProp("handleDOMEvents",function(t){for(var o in t)e.eventHandlers[o]||e.dom.addEventListener(o,e.eventHandlers[o]=function(t){return Vt(e,t)})})}function Vt(e,t){return e.someProp("handleDOMEvents",function(o){var n=o[t.type];return!!n&&(n(e,t)||t.defaultPrevented)})}function Et(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var o=t.target;o!=e.dom;o=o.parentNode)if(!o||11==o.nodeType||o.pmViewDesc&&o.pmViewDesc.stopEvent(t))return!1;return!0}function Rt(e,t){Vt(e,t)||!xt[t.type]||!e.editable&&t.type in Mt||xt[t.type](e,t)}function zt(e){return{left:e.clientX,top:e.clientY}}function Bt(e,t){var o=t.x-e.clientX,n=t.y-e.clientY;return o*o+n*n<100}function _t(e,t,o,n,r){if(-1==n)return!1;for(var i=e.state.doc.resolve(n),s=function(n){if(e.someProp(t,function(t){return n>i.depth?t(e,o,i.nodeAfter,i.before(n),r,!0):t(e,o,i.node(n),i.before(n),r,!1)}))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function Lt(e,t,o){e.focused||e.focus();var n=e.state.tr.setSelection(t);"pointer"==o&&n.setMeta("pointer",!0),e.dispatch(n)}function Ft(t,o){if(-1==o)return!1;var n=t.state.doc.resolve(o),r=n.nodeAfter;return!!(r&&r.isAtom&&e.NodeSelection.isSelectable(r))&&(Lt(t,new e.NodeSelection(n),"pointer"),!0)}function It(t,o){if(-1==o)return!1;var n,r,i=t.state.selection;i instanceof e.NodeSelection&&(n=i.node);for(var s=t.state.doc.resolve(o),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(e.NodeSelection.isSelectable(c)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=r&&(Lt(t,e.NodeSelection.create(t.state.doc,r),"pointer"),!0)}function qt(e,t,o,n,r){return _t(e,"handleClickOn",t,o,n)||e.someProp("handleClick",function(o){return o(e,t,n)})||(r?It(e,o):Ft(e,o))}function $t(e,t,o,n){return _t(e,"handleDoubleClickOn",t,o,n)||e.someProp("handleDoubleClick",function(o){return o(e,t,n)})}function Kt(e,t,o,n){return _t(e,"handleTripleClickOn",t,o,n)||e.someProp("handleTripleClick",function(o){return o(e,t,n)})||Wt(e,o)}function Wt(t,o){var n=t.state.doc;if(-1==o)return!!n.inlineContent&&(Lt(t,e.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(o),i=r.depth+1;i>0;i--){var s=i>r.depth?r.nodeAfter:r.node(i),a=r.before(i);if(s.inlineContent)Lt(t,e.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!e.NodeSelection.isSelectable(s))continue;Lt(t,e.NodeSelection.create(n,a),"pointer")}return!0}}function jt(e){return Jt(e)}Mt.keydown=function(e,t){e.shiftKey=16==t.keyCode||t.shiftKey,Gt(e,t)||(e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),e.someProp("handleKeyDown",function(o){return o(e,t)})||Ie(e,t)?t.preventDefault():kt(e,"key"))},Mt.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},Mt.keypress=function(t,o){if(!(Gt(t,o)||!o.charCode||o.ctrlKey&&!o.altKey||n.mac&&o.metaKey))if(t.someProp("handleKeyPress",function(e){return e(t,o)}))o.preventDefault();else{var r=t.state.selection;if(!(r instanceof e.TextSelection&&r.$from.sameParent(r.$to))){var i=String.fromCharCode(o.charCode);t.someProp("handleTextInput",function(e){return e(t,r.$from.pos,r.$to.pos,i)})||t.dispatch(t.state.tr.insertText(i).scrollIntoView()),o.preventDefault()}}};var Ht=n.mac?"metaKey":"ctrlKey";xt.mousedown=function(e,t){e.shiftKey=t.shiftKey;var o=jt(e),n=Date.now(),r="singleClick";n-e.lastClick.time<500&&Bt(t,e.lastClick)&&!t[Ht]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:n,x:t.clientX,y:t.clientY,type:r};var i=e.posAtCoords(zt(t));i&&("singleClick"==r?e.mouseDown=new Ut(e,i,t,o):("doubleClick"==r?$t:Kt)(e,i.pos,i.inside,t)?t.preventDefault():kt(e,"pointer"))};var Ut=function(t,o,r,i){var s,a,c=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=o,this.event=r,this.flushed=i,this.selectNode=r[Ht],this.allowDefault=r.shiftKey,o.inside>-1)s=t.state.doc.nodeAt(o.inside),a=o.inside;else{var l=t.state.doc.resolve(o.pos);s=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var d=i?null:r.target,f=d?t.docView.nearestDesc(d,!0):null;this.target=f?f.dom:null,(s.type.spec.draggable&&!1!==s.type.spec.selectable||t.state.selection instanceof e.NodeSelection&&a==t.state.selection.from)&&(this.mightDrag={node:s,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&n.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){return c.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),kt(t,"pointer")};function Gt(e,t){return!!e.composing||!!(n.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Ut.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!1),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Ut.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var o=this.pos;this.view.state.doc!=this.startDoc&&(o=this.view.posAtCoords(zt(t))),this.allowDefault||!o?kt(this.view,"pointer"):qt(this.view,o.pos,o.inside,t,this.selectNode)?t.preventDefault():!this.flushed&&(!n.chrome||this.view.state.selection instanceof e.TextSelection||o.pos!=this.view.state.selection.from&&o.pos!=this.view.state.selection.to)?kt(this.view,"pointer"):(Lt(this.view,e.Selection.near(this.view.state.doc.resolve(o.pos)),"pointer"),t.preventDefault())}},Ut.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),kt(this.view,"pointer")},xt.touchdown=function(e){jt(e),kt(e,"pointer")},xt.contextmenu=function(e){return jt(e)};var Xt=n.android?5e3:-1;function Yt(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout(function(){return Jt(e)},t))}function Jt(e,t){for(e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty();return!(!t&&!e.docView.dirty)&&(e.updateState(e.state),!0)}function Qt(e,t){var o=e.dom.ownerDocument,n=o.body.appendChild(o.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=o.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(function(){o.body.removeChild(n),e.focus()},50)}Mt.compositionstart=Mt.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,o=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!o.textOffset&&o.parentOffset&&o.nodeBefore.marks.some(function(e){return!1===e.type.spec.inclusive})))e.markCursor=e.state.storedMarks||o.marks(),Jt(e,!0),e.markCursor=null;else if(Jt(e),n.gecko&&t.selection.empty&&o.parentOffset&&!o.textOffset&&o.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,s=r.focusOffset;i&&1==i.nodeType&&0!=s;){var a=s<0?i.lastChild:i.childNodes[s-1];if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,s=-1}e.composing=!0}Yt(e,Xt)},Mt.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Yt(e,20))};var Zt=n.ie&&n.ie_version<15||n.ios&&n.webkit_version<604;function eo(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function to(e,t){var o=e.dom.ownerDocument,n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=o.body.appendChild(o.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(function(){e.focus(),o.body.removeChild(r),n?oo(e,r.value,null,t):oo(e,r.textContent,r.innerHTML,t)},50)}function oo(e,o,n,r){var i=ct(e,o,n,e.shiftKey,e.state.selection.$from);if(!e.someProp("handlePaste",function(o){return o(e,r,i||t.Slice.empty)})&&i){var s=eo(i),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(i);e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}xt.copy=Mt.cut=function(e,t){var o=e.state.selection,n="cut"==t.type;if(!o.empty){var r=Zt?null:t.clipboardData,i=at(e,o.content()),s=i.dom,a=i.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",a)):Qt(e,s),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},Mt.paste=function(e,t){var o=Zt?null:t.clipboardData,n=o&&o.getData("text/html"),r=o&&o.getData("text/plain");o&&(n||r||o.files.length)?(oo(e,r,n,t),t.preventDefault()):to(e,t)};var no=function(e,t){this.slice=e,this.move=t},ro=n.mac?"altKey":"ctrlKey";for(var io in xt.dragstart=function(t,o){var n=t.mouseDown;if(n&&n.done(),o.dataTransfer){var r=t.state.selection,i=r.empty?null:t.posAtCoords(zt(o));if(i&&i.pos>=r.from&&i.pos<=(r instanceof e.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(e.NodeSelection.create(t.state.doc,n.mightDrag.pos)));else if(o.target&&1==o.target.nodeType){var s=t.docView.nearestDesc(o.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(e.NodeSelection.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=at(t,a),l=c.dom,d=c.text;o.dataTransfer.clearData(),o.dataTransfer.setData(Zt?"Text":"text/html",l.innerHTML),Zt||o.dataTransfer.setData("text/plain",d),t.dragging=new no(a,!o[ro])}},xt.dragend=function(e){window.setTimeout(function(){return e.dragging=null},50)},Mt.dragover=Mt.dragenter=function(e,t){return t.preventDefault()},Mt.drop=function(t,n){var r=t.dragging;if(t.dragging=null,n.dataTransfer){var i=t.posAtCoords(zt(n));if(i){var s=t.state.doc.resolve(i.pos);if(s){var a=r&&r.slice||ct(t,n.dataTransfer.getData(Zt?"Text":"text/plain"),Zt?null:n.dataTransfer.getData("text/html"),!1,s);if(a&&(n.preventDefault(),!t.someProp("handleDrop",function(e){return e(t,n,a,r&&r.move)}))){var c=a?(0,o.dropPoint)(t.state.doc,s.pos,a):s.pos;null==c&&(c=s.pos);var l=t.state.tr;r&&r.move&&l.deleteSelection();var d=l.mapping.map(c),f=0==a.openStart&&0==a.openEnd&&1==a.content.childCount,h=l.doc;if(f?l.replaceRangeWith(d,d,a.content.firstChild):l.replaceRange(d,d,a),!l.doc.eq(h)){var p=l.doc.resolve(d);f&&e.NodeSelection.isSelectable(a.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(a.content.firstChild)?l.setSelection(new e.NodeSelection(p)):l.setSelection(Xe(t,p,l.doc.resolve(l.mapping.map(c)))),t.focus(),t.dispatch(l.setMeta("uiEvent","drop"))}}}}}},xt.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0)},xt.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},xt.beforeinput=function(e,t){if(n.chrome&&n.android&&"deleteContentBackward"==t.inputType){var o=e.domChangeCount;setTimeout(function(){if(e.domChangeCount==o&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",function(t){return t(e,y(8,"Backspace"))}))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}},50)}},Mt)xt[io]=Mt[io];function so(e,t){if(e==t)return!0;for(var o in e)if(e[o]!==t[o])return!1;for(var n in t)if(!(n in e))return!1;return!0}var ao=function(e,t){this.spec=t||uo,this.side=this.spec.side||0,this.toDOM=e};ao.prototype.map=function(e,t,o,n){var r=e.mapResult(t.from+n,this.side<0?-1:1),i=r.pos;return r.deleted?null:new fo(i-o,i-o,this)},ao.prototype.valid=function(){return!0},ao.prototype.eq=function(e){return this==e||e instanceof ao&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&so(this.spec,e.spec))};var co=function(e,t){this.spec=t||uo,this.attrs=e};co.prototype.map=function(e,t,o,n){var r=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-o,i=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-o;return r>=i?null:new fo(r,i,this)},co.prototype.valid=function(e,t){return t.from<t.to},co.prototype.eq=function(e){return this==e||e instanceof co&&so(this.attrs,e.attrs)&&so(this.spec,e.spec)},co.is=function(e){return e.type instanceof co};var lo=function(e,t){this.spec=t||uo,this.attrs=e};lo.prototype.map=function(e,t,o,n){var r=e.mapResult(t.from+n,1);if(r.deleted)return null;var i=e.mapResult(t.to+n,-1);return i.deleted||i.pos<=r.pos?null:new fo(r.pos-o,i.pos-o,this)},lo.prototype.valid=function(e,t){var o=e.content.findIndex(t.from),n=o.index,r=o.offset;return r==t.from&&r+e.child(n).nodeSize==t.to},lo.prototype.eq=function(e){return this==e||e instanceof lo&&so(this.attrs,e.attrs)&&so(this.spec,e.spec)};var fo=function(e,t,o){this.from=e,this.to=t,this.type=o};exports.Decoration=fo;var ho={spec:{configurable:!0}};fo.prototype.copy=function(e,t){return new fo(e,t,this.type)},fo.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},fo.prototype.map=function(e,t,o){return this.type.map(e,this,t,o)},fo.widget=function(e,t,o){return new fo(e,e,new ao(t,o))},fo.inline=function(e,t,o,n){return new fo(e,t,new co(o,n))},fo.node=function(e,t,o,n){return new fo(e,t,new lo(o,n))},ho.spec.get=function(){return this.type.spec},Object.defineProperties(fo.prototype,ho);var po=[],uo={},mo=function(e,t){this.local=e&&e.length?e:po,this.children=t&&t.length?t:po};exports.DecorationSet=mo,mo.create=function(e,t){return t.length?Oo(t,e,0,uo):vo},mo.prototype.find=function(e,t,o){var n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,o),n},mo.prototype.findInner=function(e,t,o,n,r){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&o.push(s.copy(s.from+n,s.to+n))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,o,n+c,r)}},mo.prototype.map=function(e,t,o){return this==vo||0==e.maps.length?this:this.mapInner(e,t,0,0,o||uo)},mo.prototype.mapInner=function(e,t,o,n,r){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,o,n);a&&a.type.valid(t,a)?(i||(i=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?yo(this.children,i,e,t,o,n,r):i?new mo(i.sort(No)):vo},mo.prototype.add=function(e,t){return t.length?this==vo?mo.create(e,t):this.addInner(e,t,0):this},mo.prototype.addInner=function(e,t,o){var n,r=this,i=0;e.forEach(function(e,s){var a,c=s+o;if(a=So(t,e,c)){for(n||(n=r.children.slice());i<n.length&&n[i]<s;)i+=3;n[i]==s?n[i+2]=n[i+2].addInner(e,a,c+1):n.splice(i,0,s,s+e.nodeSize,Oo(a,e,c+1,uo)),i+=3}});var s=bo(i?Do(t):t,-o);return new mo(s.length?this.local.concat(s).sort(No):this.local,n||this.children)},mo.prototype.remove=function(e){return 0==e.length||this==vo?this:this.removeInner(e,0)},mo.prototype.removeInner=function(e,t){for(var o=this.children,n=this.local,r=0;r<o.length;r+=3){for(var i=void 0,s=o[r]+t,a=o[r+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(i||(i=[])).push(l));if(i){o==this.children&&(o=this.children.slice());var d=o[r+2].removeInner(i,s+1);d!=vo?o[r+2]=d:(o.splice(r,3),r-=3)}}if(n.length)for(var f=0,h=void 0;f<e.length;f++)if(h=e[f])for(var p=0;p<n.length;p++)n[p].type.eq(h.type)&&(n==this.local&&(n=this.local.slice()),n.splice(p--,1));return o==this.children&&n==this.local?this:n.length||o.length?new mo(n,o):vo},mo.prototype.forChild=function(e,t){if(this==vo)return this;if(t.isLeaf)return mo.empty;for(var o,n,r=0;r<this.children.length;r+=3)if(this.children[r]>=e){this.children[r]==e&&(o=this.children[r+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof co){var l=Math.max(i,c.from)-i,d=Math.min(s,c.to)-i;l<d&&(n||(n=[])).push(c.copy(l,d))}}if(n){var f=new mo(n.sort(No));return o?new go([f,o]):f}return o||vo},mo.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof mo)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var o=0;o<this.children.length;o+=3)if(this.children[o]!=e.children[o]||this.children[o+1]!=e.children[o+1]||!this.children[o+2].eq(e.children[o+2]))return!1;return!0},mo.prototype.locals=function(e){return Co(this.localsInner(e))},mo.prototype.localsInner=function(e){if(this==vo)return po;if(e.inlineContent||!this.local.some(co.is))return this.local;for(var t=[],o=0;o<this.local.length;o++)this.local[o].type instanceof co||t.push(this.local[o]);return t};var vo=new mo;mo.empty=vo,mo.removeOverlap=Co;var go=function(e){this.members=e};function yo(e,t,o,n,r,i,s){for(var a=e.slice(),c=function(e,t,o,n){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+i||(t>=a[s]+i?a[s+1]=-1:(l=n-o-(t-e)+(i-r))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<o.maps.length;l++)o.maps[l].forEach(c);for(var d=!1,f=0;f<a.length;f+=3)if(-1==a[f+1]){var h=o.map(a[f]+i),p=h-r;if(p<0||p>=n.content.size){d=!0;continue}var u=o.map(e[f+1]+i,-1)-r,m=n.content.findIndex(p),v=m.index,g=m.offset,y=n.maybeChild(v);if(y&&g==p&&g+y.nodeSize==u){var b=a[f+2].mapInner(o,y,h+1,a[f]+i+1,s);b!=vo?(a[f]=p,a[f+1]=u,a[f+2]=b):(a[f+1]=-2,d=!0)}else d=!0}if(d){var w=Oo(wo(a,e,t||[],o,r,i,s),n,0,s);t=w.local;for(var S=0;S<a.length;S+=3)a[S+1]<0&&(a.splice(S,3),S-=3);for(var D=0,O=0;D<w.children.length;D+=3){for(var N=w.children[D];O<a.length&&a[O]<N;)O+=3;a.splice(O,0,w.children[D],w.children[D+1],w.children[D+2])}}return new mo(t&&t.sort(No),a)}function bo(e,t){if(!t||!e.length)return e;for(var o=[],n=0;n<e.length;n++){var r=e[n];o.push(new fo(r.from+t,r.to+t,r.type))}return o}function wo(e,t,o,n,r,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(n,r,t);c?o.push(c):s.onRemove&&s.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+i+1);return o}function So(e,t,o){if(t.isLeaf)return null;for(var n=o+t.nodeSize,r=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>o&&s.to<n&&((r||(r=[])).push(s),e[i]=null);return r}function Do(e){for(var t=[],o=0;o<e.length;o++)null!=e[o]&&t.push(e[o]);return t}function Oo(e,t,o,n){var r=[],i=!1;t.forEach(function(t,s){var a=So(e,t,s+o);if(a){i=!0;var c=Oo(a,t,o+s+1,n);c!=vo&&r.push(s,s+t.nodeSize,c)}});for(var s=bo(i?Do(e):e,-o).sort(No),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new mo(s,r):vo}function No(e,t){return e.from-t.from||e.to-t.to}function Co(e){for(var t=e,o=0;o<t.length-1;o++){var n=t[o];if(n.from!=n.to)for(var r=o+1;r<t.length;r++){var i=t[r];if(i.from!=n.from){i.from<n.to&&(t==e&&(t=e.slice()),t[o]=n.copy(n.from,i.from),xo(t,r,n.copy(i.from,n.to)));break}i.to!=n.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,n.to),xo(t,r+1,i.copy(n.to,i.to)))}}return t}function xo(e,t,o){for(;t<e.length&&No(o,e[t])>0;)t++;e.splice(t,0,o)}function Mo(e){var t=[];return e.someProp("decorations",function(o){var n=o(e.state);n&&n!=vo&&t.push(n)}),e.cursorWrapper&&t.push(mo.create(e.state.doc,[e.cursorWrapper.deco])),go.from(t)}go.prototype.forChild=function(e,t){if(t.isLeaf)return mo.empty;for(var o=[],n=0;n<this.members.length;n++){var r=this.members[n].forChild(e,t);r!=vo&&(r instanceof go?o=o.concat(r.members):o.push(r))}return go.from(o)},go.prototype.eq=function(e){if(!(e instanceof go)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},go.prototype.locals=function(e){for(var t,o=!0,n=0;n<this.members.length;n++){var r=this.members[n].localsInner(e);if(r.length)if(t){o&&(t=t.slice(),o=!1);for(var i=0;i<r.length;i++)t.push(r[i])}else t=r}return t?Co(o?t:t.sort(No)):po},go.from=function(e){switch(e.length){case 0:return vo;case 1:return e[0];default:return new go(e)}};var To=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Vo(this),this.markCursor=null,this.cursorWrapper=null,Po(this),this.nodeViews=zo(this),this.docView=ie(this.state.doc,Ao(this),Mo(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,Tt(this),this.pluginViews=[],this.updatePluginViews()};exports.EditorView=To;var ko={props:{configurable:!0},root:{configurable:!0}};function Ao(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",function(o){if("function"==typeof o&&(o=o(e.state)),o)for(var n in o)"class"==n?t.class+=" "+o[n]:t[n]||"contenteditable"==n||"nodeName"==n||(t[n]=String(o[n]))}),[fo.node(0,e.state.doc.content.size,t)]}function Po(e){var t=e.state.selection,o=t.$head,n=t.$anchor,r=t.visible;if(e.markCursor){var i=document.createElement("img");i.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:i,deco:fo.widget(o.pos,i,{raw:!0,marks:e.markCursor})}}else if(r||o.pos!=n.pos)e.cursorWrapper=null;else{var s;!e.cursorWrapper||e.cursorWrapper.dom.childNodes.length?((s=document.createElement("div")).style.position="absolute",s.style.left="-100000px"):e.cursorWrapper.deco.pos!=o.pos&&(s=e.cursorWrapper.dom),s&&(e.cursorWrapper={dom:s,deco:fo.widget(o.pos,s,{raw:!0})})}}function Vo(e){return!e.someProp("editable",function(t){return!1===t(e.state)})}function Eo(e){var t=e.getSelection(),o=t.focusOffset,n=t.focusNode;return n&&3!=n.nodeType?[n,o,1==n.nodeType?n.childNodes[o-1]:null,1==n.nodeType?n.childNodes[o]:null]:null}function Ro(e,t){var o=Eo(t);if(!o||3==o[0].nodeType)return!1;for(var n=0;n<e.length;n++)if(o[n]!=e[n])return!0;return!1}function zo(e){var t={};return e.someProp("nodeViews",function(e){for(var o in e)Object.prototype.hasOwnProperty.call(t,o)||(t[o]=e[o])}),t}function Bo(e,t){var o=0,n=0;for(var r in e){if(e[r]!=t[r])return!0;o++}for(var i in t)n++;return o!=n}ko.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},To.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Pt(this),this._props=e,this.updateStateInner(e.state,!0)},To.prototype.setProps=function(e){var t={};for(var o in this._props)t[o]=this._props[o];for(var n in t.state=this.state,e)t[n]=e[n];this.update(t)},To.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},To.prototype.updateStateInner=function(t,o){var r=this,i=this.state,s=!1;if(this.state=t,o){var a=zo(this);Bo(a,this.nodeViews)&&(this.nodeViews=a,s=!0),Pt(this)}this.editable=Vo(this),Po(this);var c=Mo(this),l=Ao(this),d=o?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(t.doc,l,c),h=f||!t.selection.eq(i.selection),p="preserve"==d&&h&&null==this.dom.style.overflowAnchor&&D(this);if(h){this.domObserver.stop();var u=!1;if(f){var m=n.chrome&&Eo(this.root);!s&&this.docView.update(t.doc,l,c,this)||(this.docView.destroy(),this.docView=ie(t.doc,l,c,this.dom,this)),m&&(u=!this.composing&&Ro(m,this.root)),n.ie&&n.ie_version<=11&&!i.selection.empty&&t.selection.empty&&t.doc.content.size<i.doc.content.size&&(u=!0)}u||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&Qe(this))?$e(this,u):(Ue(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(e){return e(r)})||(t.selection instanceof e.NodeSelection?S(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),v):S(this,this.coordsAtPos(t.selection.head),v))}else p&&N(p)},To.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},To.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var o=this.pluginViews[t];o.update&&o.update(this,e)}else{this.destroyPluginViews();for(var n=0;n<this.state.plugins.length;n++){var r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}},To.prototype.someProp=function(e,t){var o,n=this._props&&this._props[e];if(null!=n&&(o=t?t(n):n))return o;var r=this.state.plugins;if(r)for(var i=0;i<r.length;i++){var s=r[i].props[e];if(null!=s&&(o=t?t(s):s))return o}},To.prototype.hasFocus=function(){return this.root.activeElement==this.dom},To.prototype.focus=function(){this.domObserver.stop(),this.editable&&M(this.dom),$e(this),this.domObserver.start()},ko.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return this._root=t;return e||document},To.prototype.posAtCoords=function(e){return z(this,e)},To.prototype.coordsAtPos=function(e){return _(this,e)},To.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},To.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},To.prototype.posAtDOM=function(e,t,o){void 0===o&&(o=-1);var n=this.docView.posFromDOM(e,t,o);if(null==n)throw new RangeError("DOM position not inside the editor");return n},To.prototype.endOfTextblock=function(e,t){return U(this,t||this.state,e)},To.prototype.destroy=function(){this.docView&&(At(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Mo(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},To.prototype.dispatchEvent=function(e){return Rt(this,e)},To.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(To.prototype,ko);
},{"prosemirror-state":"vbBo","prosemirror-model":"cBJM","prosemirror-transform":"etvU"}],"PYP9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.dropCursor=o;var t=require("prosemirror-state"),e=require("prosemirror-transform");function o(e){return void 0===e&&(e={}),new t.Plugin({view:function(t){return new i(t,e)}})}var i=function(t,e){var o=this;this.editorView=t,this.width=e.width||1,this.color=e.color||"black",this.class=e.class,this.cursorPos=null,this.element=null,this.timeout=null,this.handlers=["dragover","dragend","drop","dragleave"].map(function(e){var i=function(t){return o[e](t)};return t.dom.addEventListener(e,i),{name:e,handler:i}})};i.prototype.destroy=function(){var t=this;this.handlers.forEach(function(e){var o=e.name,i=e.handler;return t.editorView.dom.removeEventListener(o,i)})},i.prototype.update=function(t,e){null!=this.cursorPos&&e.doc!=t.state.doc&&this.updateOverlay()},i.prototype.setCursor=function(t){t!=this.cursorPos&&(this.cursorPos=t,null==t?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())},i.prototype.updateOverlay=function(){var t,e=this.editorView.state.doc.resolve(this.cursorPos);if(!e.parent.inlineContent){var o=e.nodeBefore,i=e.nodeAfter;if(o||i){var r=this.editorView.nodeDOM(this.cursorPos-(o?o.nodeSize:0)).getBoundingClientRect(),s=o?r.bottom:r.top;o&&i&&(s=(s+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),t={left:r.left,right:r.right,top:s-this.width/2,bottom:s+this.width/2}}}if(!t){var n=this.editorView.coordsAtPos(this.cursorPos);t={left:n.left-this.width/2,right:n.left+this.width/2,top:n.top,bottom:n.bottom}}var l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none; background-color: "+this.color);var d=!l||l==document.body&&"static"==getComputedStyle(l).position?{left:-pageXOffset,top:-pageYOffset}:l.getBoundingClientRect();this.element.style.left=t.left-d.left+"px",this.element.style.top=t.top-d.top+"px",this.element.style.width=t.right-t.left+"px",this.element.style.height=t.bottom-t.top+"px"},i.prototype.scheduleRemoval=function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){return e.setCursor(null)},t)},i.prototype.dragover=function(t){if(this.editorView.editable){var o=this.editorView.posAtCoords({left:t.clientX,top:t.clientY});if(o){var i=o.pos;this.editorView.dragging&&this.editorView.dragging.slice&&null==(i=(0,e.dropPoint)(this.editorView.state.doc,i,this.editorView.dragging.slice))&&(i=o.pos),this.setCursor(i),this.scheduleRemoval(5e3)}}},i.prototype.dragend=function(){this.scheduleRemoval(20)},i.prototype.drop=function(){this.scheduleRemoval(20)},i.prototype.dragleave=function(t){t.target!=this.editorView.dom&&this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)};
},{"prosemirror-state":"vbBo","prosemirror-transform":"etvU"}],"lF2G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.shift=exports.keyName=exports.base=exports.default=void 0;var e={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},t=e;exports.base=t;var r={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},o=r;exports.shift=o;for(var a="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),n="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),i="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),s="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),d=a&&(f||+a[1]<57)||i&&f,p=0;p<10;p++)e[48+p]=e[96+p]=String(p);for(p=1;p<=24;p++)e[p+111]="F"+p;for(p=65;p<=90;p++)e[p]=String.fromCharCode(p+32),r[p]=String.fromCharCode(p);for(var g in e)r.hasOwnProperty(g)||(r[g]=e[g]);var v=function(t){var o=!(d&&(t.ctrlKey||t.altKey||t.metaKey)||(n||s)&&t.shiftKey&&t.key&&1==t.key.length)&&t.key||(t.shiftKey?r:e)[t.keyCode]||t.key||"Unidentified";return"Esc"==o&&(o="Escape"),"Del"==o&&(o="Delete"),"Left"==o&&(o="ArrowLeft"),"Up"==o&&(o="ArrowUp"),"Right"==o&&(o="ArrowRight"),"Down"==o&&(o="ArrowDown"),o};exports.keyName=v;var l={base:t,shift:o,keyName:v},y=l;exports.default=y;
},{}],"mh0X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.keydownHandler=o,exports.keymap=s;var e=require("w3c-keyname"),t=require("prosemirror-state"),r="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);function i(e){var t,i,n,a,s=e.split(/-(?!$)/),o=s[s.length-1];"Space"==o&&(o=" ");for(var f=0;f<s.length-1;f++){var l=s[f];if(/^(cmd|meta|m)$/i.test(l))a=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))i=!0;else if(/^s(hift)?$/i.test(l))n=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);r?a=!0:i=!0}}return t&&(o="Alt-"+o),i&&(o="Ctrl-"+o),a&&(o="Meta-"+o),n&&(o="Shift-"+o),o}function n(e){var t=Object.create(null);for(var r in e)t[i(r)]=e[r];return t}function a(e,t,r){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==r&&t.shiftKey&&(e="Shift-"+e),e}function s(e){return new t.Plugin({props:{handleKeyDown:o(e)}})}function o(t){var r=n(t);return function(t,i){var n,s=(0,e.keyName)(i),o=1==s.length&&" "!=s,f=r[a(s,i,!o)];if(f&&f(t.state,t.dispatch,t))return!0;if(o&&(i.shiftKey||i.altKey||i.metaKey)&&(n=e.base[i.keyCode])&&n!=s){var l=r[a(n,i,!0)];if(l&&l(t.state,t.dispatch,t))return!0}else if(o&&i.shiftKey){var u=r[a(s,i,!0)];if(u&&u(t.state,t.dispatch,t))return!0}return!1}}
},{"w3c-keyname":"lF2G","prosemirror-state":"vbBo"}],"VJHr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__endComposition=eo,exports.__parseFromClipboard=ft,exports.__serializeForClipboard=dt,exports.EditorView=exports.DecorationSet=exports.Decoration=void 0;var e=require("prosemirror-state"),t=require("prosemirror-model"),o=require("prosemirror-transform"),n={};if("undefined"!=typeof navigator&&"undefined"!=typeof document){var r=/Edge\/(\d+)/.exec(navigator.userAgent),i=/MSIE \d/.test(navigator.userAgent),s=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);n.mac=/Mac/.test(navigator.platform);var a=n.ie=!!(i||s||r);n.ie_version=i?document.documentMode||6:s?+s[1]:r?+r[1]:null,n.gecko=!a&&/gecko\/(\d+)/i.test(navigator.userAgent),n.gecko_version=n.gecko&&+(/Firefox\/(\d+)/.exec(navigator.userAgent)||[0,0])[1];var c=!a&&/Chrome\/(\d+)/.exec(navigator.userAgent);n.chrome=!!c,n.chrome_version=c&&+c[1],n.ios=!a&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),n.android=/Android \d/.test(navigator.userAgent),n.webkit="webkitFontSmoothing"in document.documentElement.style,n.safari=/Apple Computer/.test(navigator.vendor),n.webkit_version=n.webkit&&+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]}var l=function(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t},d=function(e){var t=e.parentNode;return t&&11==t.nodeType?t.host:t},f=function(e,t,o){var n=document.createRange();return n.setEnd(e,null==o?e.nodeValue.length:o),n.setStart(e,t||0),n},h=function(e,t,o,n){return o&&(u(e,t,o,n,-1)||u(e,t,o,n,1))},p=/^(img|br|input|textarea|hr)$/i;function u(e,t,o,n,r){for(;;){if(e==o&&t==n)return!0;if(t==(r<0?0:m(e))){var i=e.parentNode;if(1!=i.nodeType||g(e)||p.test(e.nodeName)||"false"==e.contentEditable)return!1;t=l(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType)return!1;if("false"==(e=e.childNodes[t+(r<0?-1:0)]).contentEditable)return!1;t=r<0?m(e):0}}}function m(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function v(e,t,o){for(var n=0==t,r=t==m(e);n||r;){if(e==o)return!0;var i=l(e);if(!(e=e.parentNode))return!1;n=n&&0==i,r=r&&i==m(e)}}function g(e){for(var t,o=e;o&&!(t=o.pmViewDesc);o=o.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}var y=function(e){var t=e.isCollapsed;return t&&n.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t};function b(e,t){var o=document.createEvent("Event");return o.initEvent("keydown",!0,!0),o.keyCode=e,o.key=o.code=t,o}function w(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function S(e,t){return"number"==typeof e?e:e[t]}function D(e,t,o){for(var n=e.someProp("scrollThreshold")||0,r=e.someProp("scrollMargin")||5,i=e.dom.ownerDocument,s=i.defaultView,a=o||e.dom;a;a=d(a))if(1==a.nodeType){var c=a==i.body||1!=a.nodeType,l=c?w(s):a.getBoundingClientRect(),f=0,h=0;if(t.top<l.top+S(n,"top")?h=-(l.top-t.top+S(r,"top")):t.bottom>l.bottom-S(n,"bottom")&&(h=t.bottom-l.bottom+S(r,"bottom")),t.left<l.left+S(n,"left")?f=-(l.left-t.left+S(r,"left")):t.right>l.right-S(n,"right")&&(f=t.right-l.right+S(r,"right")),f||h)if(c)s.scrollBy(f,h);else{var p=a.scrollLeft,u=a.scrollTop;h&&(a.scrollTop+=h),f&&(a.scrollLeft+=f);var m=a.scrollLeft-p,v=a.scrollTop-u;t={left:t.left-m,top:t.top-v,right:t.right-m,bottom:t.bottom-v}}if(c)break}}function O(e){for(var t,o,n=e.dom.getBoundingClientRect(),r=Math.max(0,n.top),i=(n.left+n.right)/2,s=r+1;s<Math.min(innerHeight,n.bottom);s+=5){var a=e.root.elementFromPoint(i,s);if(a!=e.dom&&e.dom.contains(a)){var c=a.getBoundingClientRect();if(c.top>=r-20){t=a,o=c.top;break}}}return{refDOM:t,refTop:o,stack:N(e.dom)}}function N(e){for(var t=[],o=e.ownerDocument;e&&(t.push({dom:e,top:e.scrollTop,left:e.scrollLeft}),e!=o);e=d(e));return t}function C(e){var t=e.refDOM,o=e.refTop,n=e.stack,r=t?t.getBoundingClientRect().top:0;x(n,0==r?0:r-o)}function x(e,t){for(var o=0;o<e.length;o++){var n=e[o],r=n.dom,i=n.top,s=n.left;r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}var M=null;function k(e){if(e.setActive)return e.setActive();if(M)return e.focus(M);var t=N(e);e.focus(null==M?{get preventScroll(){return M={preventScroll:!0},!0}}:void 0),M||(M=!1,x(t,0))}function T(e,t){for(var o,n,r=2e8,i=0,s=t.top,a=t.top,c=e.firstChild,l=0;c;c=c.nextSibling,l++){var d=void 0;if(1==c.nodeType)d=c.getClientRects();else{if(3!=c.nodeType)continue;d=f(c).getClientRects()}for(var h=0;h<d.length;h++){var p=d[h];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);var u=p.left>t.left?p.left-t.left:p.right<t.left?t.left-p.right:0;if(u<r){o=c,r=u,n=u&&3==o.nodeType?{left:p.right<t.left?p.right:p.left,top:t.top}:t,1==c.nodeType&&u&&(i=l+(t.left>=(p.left+p.right)/2?1:0));continue}}!o&&(t.left>=p.right&&t.top>=p.top||t.left>=p.left&&t.top>=p.bottom)&&(i=l+1)}}return o&&3==o.nodeType?A(o,n):!o||r&&1==o.nodeType?{node:e,offset:i}:T(o,n)}function A(e,t){for(var o=e.nodeValue.length,n=document.createRange(),r=0;r<o;r++){n.setEnd(e,r+1),n.setStart(e,r);var i=_(n,1);if(i.top!=i.bottom&&P(t,i))return{node:e,offset:r+(t.left>=(i.left+i.right)/2?1:0)}}return{node:e,offset:0}}function P(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function V(e,t){var o=e.parentNode;return o&&/^li$/i.test(o.nodeName)&&t.left<e.getBoundingClientRect().left?o:e}function E(e,t,o){var n=T(t,o),r=n.node,i=n.offset,s=-1;if(1==r.nodeType&&!r.firstChild){var a=r.getBoundingClientRect();s=a.left!=a.right&&o.left>(a.left+a.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function R(e,t,o,n){for(var r=-1,i=t;i!=e.dom;){var s=e.docView.nearestDesc(i,!0);if(!s)return null;if(s.node.isBlock&&s.parent){var a=s.dom.getBoundingClientRect();if(a.left>n.left||a.top>n.top)r=s.posBefore;else{if(!(a.right<n.left||a.bottom<n.top))break;r=s.posAfter}}i=s.dom.parentNode}return r>-1?r:e.docView.posFromDOM(t,o)}function B(e,t,o){var n=e.childNodes.length;if(n&&o.top<o.bottom)for(var r=Math.max(0,Math.min(n-1,Math.floor(n*(t.top-o.top)/(o.bottom-o.top))-2)),i=r;;){var s=e.childNodes[i];if(1==s.nodeType)for(var a=s.getClientRects(),c=0;c<a.length;c++){var l=a[c];if(P(t,l))return B(s,t,l)}if((i=(i+1)%n)==r)break}return e}function z(e,t){var o,r,i,s,a=e.root;if(a.caretPositionFromPoint)try{var c=a.caretPositionFromPoint(t.left,t.top);c&&(i=(o=c).offsetNode,s=o.offset)}catch(v){}if(!i&&a.caretRangeFromPoint){var l=a.caretRangeFromPoint(t.left,t.top);l&&(i=(r=l).startContainer,s=r.startOffset)}var d,f=a.elementFromPoint(t.left,t.top+1);if(!f||!e.dom.contains(1!=f.nodeType?f.parentNode:f)){var h=e.dom.getBoundingClientRect();if(!P(t,h))return null;if(!(f=B(e.dom,t,h)))return null}if(f=V(f,t),i){if(n.gecko&&1==i.nodeType&&(s=Math.min(s,i.childNodes.length))<i.childNodes.length){var p,u=i.childNodes[s];"IMG"==u.nodeName&&(p=u.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&s++}i==e.dom&&s==i.childNodes.length-1&&1==i.lastChild.nodeType&&t.top>i.lastChild.getBoundingClientRect().bottom?d=e.state.doc.content.size:0!=s&&1==i.nodeType&&"BR"==i.childNodes[s-1].nodeName||(d=R(e,i,s,t))}null==d&&(d=E(e,f,t));var m=e.docView.nearestDesc(f,!0);return{pos:d,inside:m?m.posAtStart-m.border:-1}}function _(e,t){var o=e.getClientRects();return o.length?o[t<0?0:o.length-1]:e.getBoundingClientRect()}function L(e,t){var o=e.docView.domFromPos(t),r=o.node,i=o.offset;if(3==r.nodeType&&(n.webkit||n.gecko)){var s=_(f(r,i,i),0);if(n.gecko&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){var a=_(f(r,i-1,i-1),-1);if(a.top==s.top){var c=_(f(r,i,i+1),-1);if(c.top!=s.top)return F(c,c.left<a.left)}}return s}if(1==r.nodeType&&!e.state.doc.resolve(t).parent.inlineContent){var l,d=!0;if(i<r.childNodes.length){var h=r.childNodes[i];1==h.nodeType&&(l=h.getBoundingClientRect())}if(!l&&i){var p=r.childNodes[i-1];1==p.nodeType&&(l=p.getBoundingClientRect(),d=!1)}return I(l||r.getBoundingClientRect(),d)}for(var u=-1;u<2;u+=2)if(u<0&&i){var v=void 0,g=3==r.nodeType?f(r,i-1,i):3==(v=r.childNodes[i-1]).nodeType?f(v):1==v.nodeType&&"BR"!=v.nodeName?v:null;if(g){var y=_(g,1);if(y.top<y.bottom)return F(y,!1)}}else if(u>0&&i<m(r)){var b=void 0,w=3==r.nodeType?f(r,i,i+1):3==(b=r.childNodes[i]).nodeType?f(b):1==b.nodeType?b:null;if(w){var S=_(w,-1);if(S.top<S.bottom)return F(S,!0)}}return F(_(3==r.nodeType?f(r):r,0),!1)}function F(e,t){if(0==e.width)return e;var o=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:o,right:o}}function I(e,t){if(0==e.height)return e;var o=t?e.top:e.bottom;return{top:o,bottom:o,left:e.left,right:e.right}}function $(e,t,o){var n=e.state,r=e.root.activeElement;n!=t&&e.updateState(t),r!=e.dom&&e.focus();try{return o()}finally{n!=t&&e.updateState(n),r!=e.dom&&r.focus()}}function q(e,t,o){var n=t.selection,r="up"==o?n.$anchor.min(n.$head):n.$anchor.max(n.$head);return $(e,t,function(){for(var t=e.docView.domFromPos(r.pos).node;;){var n=e.docView.nearestDesc(t,!0);if(!n)break;if(n.node.isBlock){t=n.dom;break}t=n.dom.parentNode}for(var i=L(e,r.pos),s=t.firstChild;s;s=s.nextSibling){var a=void 0;if(1==s.nodeType)a=s.getClientRects();else{if(3!=s.nodeType)continue;a=f(s,0,s.nodeValue.length).getClientRects()}for(var c=0;c<a.length;c++){var l=a[c];if(l.bottom>l.top&&("up"==o?l.bottom<i.top+1:l.top>i.bottom-1))return!1}}return!0})}var K=/[\u0590-\u08ac]/;function W(e,t,o){var n=t.selection.$head;if(!n.parent.isTextblock)return!1;var r=n.parentOffset,i=!r,s=r==n.parent.content.size,a=getSelection();return K.test(n.parent.textContent)&&a.modify?$(e,t,function(){var t=a.getRangeAt(0),r=a.focusNode,i=a.focusOffset,s=a.caretBidiLevel;a.modify("move",o,"character");var c=!(n.depth?e.docView.domAfterPos(n.before()):e.dom).contains(1==a.focusNode.nodeType?a.focusNode:a.focusNode.parentNode)||r==a.focusNode&&i==a.focusOffset;return a.removeAllRanges(),a.addRange(t),null!=s&&(a.caretBidiLevel=s),c}):"left"==o||"backward"==o?i:s}var j=null,H=null,U=!1;function G(e,t,o){return j==t&&H==o?U:(j=t,H=o,U="up"==o||"down"==o?q(e,t,o):W(e,t,o))}var X=0,Y=1,J=2,Q=3,Z=function(e,t,o,n){this.parent=e,this.children=t,this.dom=o,o.pmViewDesc=this,this.contentDOM=n,this.dirty=X},ee={beforePosition:{configurable:!0},size:{configurable:!0},border:{configurable:!0},posBefore:{configurable:!0},posAtStart:{configurable:!0},posAfter:{configurable:!0},posAtEnd:{configurable:!0},contentLost:{configurable:!0}};Z.prototype.matchesWidget=function(){return!1},Z.prototype.matchesMark=function(){return!1},Z.prototype.matchesNode=function(){return!1},Z.prototype.matchesHack=function(){return!1},ee.beforePosition.get=function(){return!1},Z.prototype.parseRule=function(){return null},Z.prototype.stopEvent=function(){return!1},ee.size.get=function(){for(var e=0,t=0;t<this.children.length;t++)e+=this.children[t].size;return e},ee.border.get=function(){return 0},Z.prototype.destroy=function(){this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)this.children[e].destroy()},Z.prototype.posBeforeChild=function(e){for(var t=0,o=this.posAtStart;t<this.children.length;t++){var n=this.children[t];if(n==e)return o;o+=n.size}},ee.posBefore.get=function(){return this.parent.posBeforeChild(this)},ee.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},ee.posAfter.get=function(){return this.posBefore+this.size},ee.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},Z.prototype.localPosFromDOM=function(e,t,o){if(this.contentDOM&&this.contentDOM.contains(1==e.nodeType?e:e.parentNode)){if(o<0){var n,r;if(e==this.contentDOM)n=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;n=e.previousSibling}for(;n&&(!(r=n.pmViewDesc)||r.parent!=this);)n=n.previousSibling;return n?this.posBeforeChild(r)+r.size:this.posAtStart}var i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&(!(s=i.pmViewDesc)||s.parent!=this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}var a;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))a=2&e.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==t)for(var c=e;;c=c.parentNode){if(c==this.dom){a=!1;break}if(c.parentNode.firstChild!=c)break}if(null==a&&t==e.childNodes.length)for(var l=e;;l=l.parentNode){if(l==this.dom){a=!0;break}if(l.parentNode.lastChild!=l)break}}return(null==a?o>0:a)?this.posAtEnd:this.posAtStart},Z.prototype.nearestDesc=function(e,t){for(var o=!0,n=e;n;n=n.parentNode){var r=this.getDesc(n);if(r&&(!t||r.node)){if(!o||!r.nodeDOM||(1==r.nodeDOM.nodeType?r.nodeDOM.contains(1==e.nodeType?e:e.parentNode):r.nodeDOM==e))return r;o=!1}}},Z.prototype.getDesc=function(e){for(var t=e.pmViewDesc,o=t;o;o=o.parent)if(o==this)return t},Z.prototype.posFromDOM=function(e,t,o){for(var n=e;;n=n.parentNode){var r=this.getDesc(n);if(r)return r.localPosFromDOM(e,t,o)}},Z.prototype.descAt=function(e){for(var t=0,o=0;t<this.children.length;t++){var n=this.children[t],r=o+n.size;if(o==e&&r!=o){for(;!n.border&&n.children.length;)n=n.children[0];return n}if(e<r)return n.descAt(e-o-n.border);o=r}},Z.prototype.domFromPos=function(e){if(!this.contentDOM)return{node:this.dom,offset:0};for(var t=0,o=0;;o++){if(t==e){for(;o<this.children.length&&(this.children[o].beforePosition||this.children[o].dom.parentNode!=this.contentDOM);)o++;return{node:this.contentDOM,offset:o==this.children.length?this.contentDOM.childNodes.length:l(this.children[o].dom)}}if(o==this.children.length)throw new Error("Invalid position "+e);var n=this.children[o],r=t+n.size;if(e<r)return n.domFromPos(e-t-n.border);t=r}},Z.prototype.parseRange=function(e,t,o){if(void 0===o&&(o=0),0==this.children.length)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};for(var n=-1,r=-1,i=o,s=0;;s++){var a=this.children[s],c=i+a.size;if(-1==n&&e<=c){var d=i+a.border;if(e>=d&&t<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,t,d);e=i;for(var f=s;f>0;f--){var h=this.children[f-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){n=l(h.dom)+1;break}e-=h.size}-1==n&&(n=0)}if(n>-1&&t<=c){t=c;for(var p=s+1;p<this.children.length;p++){var u=this.children[p];if(u.size&&u.dom.parentNode==this.contentDOM&&!u.emptyChildAt(-1)){r=l(u.dom);break}t+=u.size}-1==r&&(r=this.contentDOM.childNodes.length);break}i=c}return{node:this.contentDOM,from:e,to:t,fromOffset:n,toOffset:r}},Z.prototype.emptyChildAt=function(e){if(this.border||!this.contentDOM||!this.children.length)return!1;var t=this.children[e<0?0:this.children.length-1];return 0==t.size||t.emptyChildAt(e)},Z.prototype.domAfterPos=function(e){var t=this.domFromPos(e),o=t.node,n=t.offset;if(1!=o.nodeType||n==o.childNodes.length)throw new RangeError("No node after pos "+e);return o.childNodes[n]},Z.prototype.setSelection=function(e,t,o,n){for(var r=Math.min(e,t),i=Math.max(e,t),s=0,a=0;s<this.children.length;s++){var c=this.children[s],l=a+c.size;if(r>a&&i<l)return c.setSelection(e-a-c.border,t-a-c.border,o,n);a=l}var d=this.domFromPos(e),f=this.domFromPos(t),p=o.getSelection();if(n||!h(d.node,d.offset,p.anchorNode,p.anchorOffset)||!h(f.node,f.offset,p.focusNode,p.focusOffset))if(p.extend||e==t)p.collapse(d.node,d.offset),e!=t&&p.extend(f.node,f.offset);else{if(e>t){var u=d;d=f,f=u}var m=document.createRange();m.setEnd(f.node,f.offset),m.setStart(d.node,d.offset),p.removeAllRanges(),p.addRange(m)}},Z.prototype.ignoreMutation=function(e){return!this.contentDOM&&"selection"!=e.type},ee.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},Z.prototype.markDirty=function(e,t){for(var o=0,n=0;n<this.children.length;n++){var r=this.children[n],i=o+r.size;if(o==i?e<=i&&t>=o:e<i&&t>o){var s=o+r.border,a=i-r.border;if(e>=s&&t<=a)return this.dirty=e==o||t==i?J:Y,void(e!=s||t!=a||!r.contentLost&&r.dom.parentNode==this.contentDOM?r.markDirty(e-s,t-s):r.dirty=Q);r.dirty=Q}o=i}this.dirty=J},Z.prototype.markParentsDirty=function(){for(var e=1,t=this.parent;t;t=t.parent,e++){var o=1==e?J:Y;t.dirty<o&&(t.dirty=o)}},Object.defineProperties(Z.prototype,ee);var te=[],oe=function(e){function t(t,o,n,r){var i,s=o.type.toDOM;if("function"==typeof s&&(s=s(n,function(){return i?i.parent?i.parent.posBeforeChild(i):void 0:r})),!o.type.spec.raw){if(1!=s.nodeType){var a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable=!1,s.classList.add("ProseMirror-widget")}e.call(this,t,te,s,null),this.widget=o,i=this}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var o={beforePosition:{configurable:!0}};return o.beforePosition.get=function(){return this.widget.type.side<0},t.prototype.matchesWidget=function(e){return this.dirty==X&&e.type.eq(this.widget.type)},t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.stopEvent=function(e){var t=this.widget.spec.stopEvent;return!!t&&t(e)},t.prototype.ignoreMutation=function(e){return"selection"!=e.type||this.widget.spec.ignoreSelection},Object.defineProperties(t.prototype,o),t}(Z),ne=function(e){function t(t,o,n,r){e.call(this,t,te,o,null),this.textDOM=n,this.text=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var o={size:{configurable:!0}};return o.size.get=function(){return this.text.length},t.prototype.localPosFromDOM=function(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t},t.prototype.domFromPos=function(e){return{node:this.textDOM,offset:e}},t.prototype.ignoreMutation=function(e){return"characterData"===e.type&&e.target.nodeValue==e.oldValue},Object.defineProperties(t.prototype,o),t}(Z),re=function(e){function o(t,o,n,r){e.call(this,t,[],n,r),this.mark=o}return e&&(o.__proto__=e),o.prototype=Object.create(e&&e.prototype),o.prototype.constructor=o,o.create=function(e,n,r,i){var s=i.nodeViews[n.type.name],a=s&&s(n,i,r);return a&&a.dom||(a=t.DOMSerializer.renderSpec(document,n.type.spec.toDOM(n,r))),new o(e,n,a.dom,a.contentDOM||a.dom)},o.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},o.prototype.matchesMark=function(e){return this.dirty!=Q&&this.mark.eq(e)},o.prototype.markDirty=function(t,o){if(e.prototype.markDirty.call(this,t,o),this.dirty!=X){for(var n=this.parent;!n.node;)n=n.parent;n.dirty<this.dirty&&(n.dirty=this.dirty),this.dirty=X}},o.prototype.slice=function(e,t,n){var r=o.create(this.parent,this.mark,!0,n),i=this.children,s=this.size;t<s&&(i=xe(i,t,s,n)),e>0&&(i=xe(i,0,e,n));for(var a=0;a<i.length;a++)i[a].parent=r;return r.children=i,r},o}(Z),ie=function(o){function r(e,t,n,r,i,s,a,c,l){o.call(this,e,t.isLeaf?te:[],i,s),this.nodeDOM=a,this.node=t,this.outerDeco=n,this.innerDeco=r,s&&this.updateChildren(c,l)}o&&(r.__proto__=o),r.prototype=Object.create(o&&o.prototype),r.prototype.constructor=r;var i={size:{configurable:!0},border:{configurable:!0}};return r.create=function(e,o,n,i,s,a){var c,l,d=s.nodeViews[o.type.name],f=d&&d(o,s,function(){return l?l.parent?l.parent.posBeforeChild(l):void 0:a},n),h=f&&f.dom,p=f&&f.contentDOM;if(o.isText)if(h){if(3!=h.nodeType)throw new RangeError("Text must be rendered as a DOM text node")}else h=document.createTextNode(o.text);else h||(h=(c=t.DOMSerializer.renderSpec(document,o.type.spec.toDOM(o))).dom,p=c.contentDOM);p||o.isText||"BR"==h.nodeName||(h.hasAttribute("contenteditable")||(h.contentEditable=!1),o.type.spec.draggable&&(h.draggable=!0));var u=h;return h=ve(h,n,o),f?l=new le(e,o,n,i,h,p,u,f,s,a+1):o.isText?new ae(e,o,n,i,h,u,s):new r(e,o,n,i,h,p,u,s,a+1)},r.prototype.parseRule=function(){var e=this;if(this.node.type.spec.reparseInView)return null;var o={node:this.node.type.name,attrs:this.node.attrs};return this.node.type.spec.code&&(o.preserveWhitespace="full"),this.contentDOM&&!this.contentLost?o.contentElement=this.contentDOM:o.getContent=function(){return e.contentDOM?t.Fragment.empty:e.node.content},o},r.prototype.matchesNode=function(e,t,o){return this.dirty==X&&e.eq(this.node)&&ge(t,this.outerDeco)&&o.eq(this.innerDeco)},i.size.get=function(){return this.node.nodeSize},i.border.get=function(){return this.node.isLeaf?0:1},r.prototype.updateChildren=function(e,o){var n=this,r=this.node.inlineContent,i=o,s=r&&e.composing&&this.localCompositionNode(e,o),a=new be(this,s&&s.node);De(this.node,this.innerDeco,function(o,s,c){o.spec.marks?a.syncToMarks(o.spec.marks,r,e):o.type.side>=0&&!c&&a.syncToMarks(s==n.node.childCount?t.Mark.none:n.node.child(s).marks,r,e),a.placeWidget(o,e,i)},function(t,o,n,s){a.syncToMarks(t.marks,r,e),a.findNodeMatch(t,o,n,s)||a.updateNextNode(t,o,n,e,s)||a.addNode(t,o,n,e,i),i+=t.nodeSize}),a.syncToMarks(te,r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==J)&&(s&&this.protectLocalComposition(e,s),this.renderChildren())},r.prototype.renderChildren=function(){de(this.contentDOM,this.children),n.ios&&Oe(this.dom)},r.prototype.localCompositionNode=function(t,o){var n=t.state.selection,r=n.from,i=n.to;if(!(!(t.state.selection instanceof e.TextSelection)||r<o||i>o+this.node.content.size)){var s=t.root.getSelection(),a=Ne(s.focusNode,s.focusOffset);if(a&&this.dom.contains(a.parentNode)){var c=a.nodeValue,l=Ce(this.node.content,c,r-o,i-o);return l<0?null:{node:a,pos:l,text:c}}}},r.prototype.protectLocalComposition=function(e,t){var o=t.node,n=t.pos,r=t.text;if(!this.getDesc(o)){for(var i=o;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=null)}var s=new ne(this,i,o,r);e.compositionNodes.push(s),this.children=xe(this.children,n,n+r.length,e,s)}},r.prototype.update=function(e,t,o,n){return!(this.dirty==Q||!e.sameMarkup(this.node))&&(this.updateInner(e,t,o,n),!0)},r.prototype.updateInner=function(e,t,o,n){this.updateOuterDeco(t),this.node=e,this.innerDeco=o,this.contentDOM&&this.updateChildren(n,this.posAtStart),this.dirty=X},r.prototype.updateOuterDeco=function(e){if(!ge(e,this.outerDeco)){var t=1!=this.nodeDOM.nodeType,o=this.dom;this.dom=ue(this.dom,this.nodeDOM,pe(this.outerDeco,this.node,t),pe(e,this.node,t)),this.dom!=o&&(o.pmViewDesc=null,this.dom.pmViewDesc=this),this.outerDeco=e}},r.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||(this.dom.draggable=!0)},r.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode"),!this.contentDOM&&this.node.type.spec.draggable||this.dom.removeAttribute("draggable")},Object.defineProperties(r.prototype,i),r}(Z);function se(e,t,o,n,r){return ve(n,t,e),new ie(null,e,t,o,n,n,n,r,0)}var ae=function(e){function t(t,o,n,r,i,s,a){e.call(this,t,o,n,r,i,null,s,a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{skip:this.nodeDOM.parentNode||!0}},t.prototype.update=function(e,t){return!(this.dirty==Q||this.dirty!=X&&!this.inParent()||!e.sameMarkup(this.node))&&(this.updateOuterDeco(t),this.dirty==X&&e.text==this.node.text||e.text==this.nodeDOM.nodeValue||(this.nodeDOM.nodeValue=e.text),this.node=e,this.dirty=X,!0)},t.prototype.inParent=function(){for(var e=this.parent.contentDOM,t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1},t.prototype.domFromPos=function(e){return{node:this.nodeDOM,offset:e}},t.prototype.localPosFromDOM=function(t,o,n){return t==this.nodeDOM?this.posAtStart+Math.min(o,this.node.text.length):e.prototype.localPosFromDOM.call(this,t,o,n)},t.prototype.ignoreMutation=function(e){return"characterData"!=e.type&&"selection"!=e.type},t.prototype.slice=function(e,o,n){var r=this.node.cut(e,o),i=document.createTextNode(r.text);return new t(this.parent,r,this.outerDeco,this.innerDeco,i,i,n)},t}(ie),ce=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.parseRule=function(){return{ignore:!0}},t.prototype.matchesHack=function(){return this.dirty==X},t}(Z),le=function(e){function t(t,o,n,r,i,s,a,c,l,d){e.call(this,t,o,n,r,i,s,a,l,d),this.spec=c}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.update=function(t,o,n,r){if(this.dirty==Q)return!1;if(this.spec.update){var i=this.spec.update(t,o);return i&&this.updateInner(t,o,n,r),i}return!(!this.contentDOM&&!t.isLeaf)&&e.prototype.update.call(this,t,o,n,r)},t.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():e.prototype.selectNode.call(this)},t.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():e.prototype.deselectNode.call(this)},t.prototype.setSelection=function(t,o,n,r){this.spec.setSelection?this.spec.setSelection(t,o,n):e.prototype.setSelection.call(this,t,o,n,r)},t.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),e.prototype.destroy.call(this)},t.prototype.stopEvent=function(e){return!!this.spec.stopEvent&&this.spec.stopEvent(e)},t.prototype.ignoreMutation=function(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):e.prototype.ignoreMutation.call(this,t)},t}(ie);function de(e,t){for(var o=e.firstChild,n=0;n<t.length;n++){var r=t[n],i=r.dom;if(i.parentNode==e){for(;i!=o;)o=ye(o);o=o.nextSibling}else e.insertBefore(i,o);if(r instanceof re){var s=o?o.previousSibling:e.lastChild;de(r.contentDOM,r.children),o=s?s.nextSibling:e.firstChild}}for(;o;)o=ye(o)}function fe(e){e&&(this.nodeName=e)}fe.prototype=Object.create(null);var he=[new fe];function pe(e,t,o){if(0==e.length)return he;for(var n=o?he[0]:new fe,r=[n],i=0;i<e.length;i++){var s=e[i].type.attrs,a=n;if(s)for(var c in s.nodeName&&r.push(a=new fe(s.nodeName)),s){var l=s[c];null!=l&&(o&&1==r.length&&r.push(a=n=new fe(t.isInline?"span":"div")),"class"==c?a.class=(a.class?a.class+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}return r}function ue(e,t,o,n){if(o==he&&n==he)return t;for(var r=t,i=0;i<n.length;i++){var s=n[i],a=o[i];if(i){var c=void 0;a&&a.nodeName==s.nodeName&&r!=e&&(c=r.parentNode)&&c.tagName.toLowerCase()==s.nodeName?r=c:((c=document.createElement(s.nodeName)).appendChild(r),a=he[0],r=c)}me(r,a||he[0],s)}return r}function me(e,t,o){for(var n in t)"class"==n||"style"==n||"nodeName"==n||n in o||e.removeAttribute(n);for(var r in o)"class"!=r&&"style"!=r&&"nodeName"!=r&&o[r]!=t[r]&&e.setAttribute(r,o[r]);if(t.class!=o.class){for(var i=t.class?t.class.split(" "):te,s=o.class?o.class.split(" "):te,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&e.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&e.classList.add(s[c])}if(t.style!=o.style){if(t.style)for(var l,d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g;l=d.exec(t.style);)e.style.removeProperty(l[1]);o.style&&(e.style.cssText+=o.style)}}function ve(e,t,o){return ue(e,e,he,pe(t,o,1!=e.nodeType))}function ge(e,t){if(e.length!=t.length)return!1;for(var o=0;o<e.length;o++)if(!e[o].type.eq(t[o].type))return!1;return!0}function ye(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}var be=function(e,t){this.top=e,this.lock=t,this.index=0,this.stack=[],this.changed=!1;var o=we(e.node.content,e.children);this.preMatched=o.nodes,this.preMatchOffset=o.offset};function we(e,t){for(var o=[],n=e.childCount,r=t.length-1;n>0&&r>=0;r--){var i=t[r],s=i.node;if(s){if(s!=e.child(n-1))break;o.push(i),--n}}return{nodes:o.reverse(),offset:n}}function Se(e,t){return e.type.side-t.type.side}function De(e,t,o,n){var r=t.locals(e),i=0;if(0!=r.length)for(var s=0,a=[],c=null,l=0;;){if(s<r.length&&r[s].to==i){for(var d=r[s++],f=void 0;s<r.length&&r[s].to==i;)(f||(f=[d])).push(r[s++]);if(f){f.sort(Se);for(var h=0;h<f.length;h++)o(f[h],l,!!c)}else o(d,l,!!c)}var p=void 0,u=void 0;if(c)u=-1,p=c,c=null;else{if(!(l<e.childCount))break;u=l,p=e.child(l++)}for(var m=0;m<a.length;m++)a[m].to<=i&&a.splice(m--,1);for(;s<r.length&&r[s].from==i;)a.push(r[s++]);var v=i+p.nodeSize;if(p.isText){var g=v;s<r.length&&r[s].from<g&&(g=r[s].from);for(var y=0;y<a.length;y++)a[y].to<g&&(g=a[y].to);g<v&&(c=p.cut(g-i),p=p.cut(0,g-i),v=g,u=-1)}n(p,a.length?a.slice():te,t.forChild(i,p),u),i=v}else for(var b=0;b<e.childCount;b++){var w=e.child(b);n(w,r,t.forChild(i,w),b),i+=w.nodeSize}}function Oe(e){if("UL"==e.nodeName||"OL"==e.nodeName){var t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function Ne(e,t){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0){if(e.childNodes.length>t&&3==e.childNodes[t].nodeType)return e.childNodes[t];t=m(e=e.childNodes[t-1])}else{if(!(1==e.nodeType&&t<e.childNodes.length))return null;e=e.childNodes[t],t=0}}}function Ce(e,t,o,n){for(var r=0,i=0;r<e.childCount&&i<=n;){var s=e.child(r++),a=i;if(i+=s.nodeSize,s.isText){for(var c=s.text;r<e.childCount;){var l=e.child(r++);if(i+=l.nodeSize,!l.isText)break;c+=l.text}if(i>=o){var d=c.lastIndexOf(t,n-a);if(d>=0&&d+t.length+a>=o)return a+d}}}return-1}function xe(e,t,o,n,r){for(var i=[],s=0,a=0;s<e.length;s++){var c=e[s],l=a,d=a+=c.size;l>=o||d<=t?i.push(c):(l<t&&i.push(c.slice(0,t-l,n)),r&&(i.push(r),r=null),d>o&&i.push(c.slice(o-l,c.size,n)))}return i}function Me(t,o){var n=t.selection,r=n.$anchor,i=n.$head,s=o>0?r.max(i):r.min(i),a=s.parent.inlineContent?s.depth?t.doc.resolve(o>0?s.after():s.before()):null:s;return a&&e.Selection.findFrom(a,o)}function ke(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function Te(t,o,r){var i=t.state.selection;if(i instanceof e.TextSelection){if(!i.empty||r.indexOf("s")>-1)return!1;if(t.endOfTextblock(o>0?"right":"left")){var s=Me(t.state,o);return!!(s&&s instanceof e.NodeSelection)&&ke(t,s)}var a,c=i.$head,l=c.textOffset?null:o<0?c.nodeBefore:c.nodeAfter;if(!l||l.isText)return!1;var d=o<0?c.pos-l.nodeSize:c.pos;return!!(l.isAtom||(a=t.docView.descAt(d))&&!a.contentDOM)&&(e.NodeSelection.isSelectable(l)?ke(t,new e.NodeSelection(o<0?t.state.doc.resolve(c.pos-l.nodeSize):c)):!!n.webkit&&ke(t,new e.TextSelection(t.state.doc.resolve(o<0?d:d+l.nodeSize))))}if(i instanceof e.NodeSelection&&i.node.isInline)return ke(t,new e.TextSelection(o>0?i.$to:i.$from));var f=Me(t.state,o);return!!f&&ke(t,f)}function Ae(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Pe(e){var t=e.pmViewDesc;return t&&0==t.size&&(e.nextSibling||"BR"!=e.nodeName)}function Ve(e){var t=e.root.getSelection(),o=t.focusNode,r=t.focusOffset;if(o){var i,s,a=!1;for(n.gecko&&1==o.nodeType&&r<Ae(o)&&Pe(o.childNodes[r])&&(a=!0);;)if(r>0){if(1!=o.nodeType)break;var c=o.childNodes[r-1];if(Pe(c))i=o,s=--r;else{if(3!=c.nodeType)break;r=(o=c).nodeValue.length}}else{if(Re(o))break;for(var d=o.previousSibling;d&&Pe(d);)i=o.parentNode,s=l(d),d=d.previousSibling;if(d)r=Ae(o=d);else{if((o=o.parentNode)==e.dom)break;r=0}}a?Be(e,t,o,r):i&&Be(e,t,i,s)}}function Ee(e){var t=e.root.getSelection(),o=t.focusNode,n=t.focusOffset;if(o){for(var r,i,s=Ae(o);;)if(n<s){if(1!=o.nodeType)break;if(!Pe(o.childNodes[n]))break;r=o,i=++n}else{if(Re(o))break;for(var a=o.nextSibling;a&&Pe(a);)r=a.parentNode,i=l(a)+1,a=a.nextSibling;if(a)n=0,s=Ae(o=a);else{if((o=o.parentNode)==e.dom)break;n=s=0}}r&&Be(e,t,r,i)}}function Re(e){var t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function Be(e,t,o,n){if(y(t)){var r=document.createRange();r.setEnd(o,n),r.setStart(o,n),t.removeAllRanges(),t.addRange(r)}else t.extend&&t.extend(o,n);e.domObserver.setCurSelection()}function ze(t,o,n){var r=t.state.selection;if(r instanceof e.TextSelection&&!r.empty||n.indexOf("s")>-1)return!1;var i=r.$from,s=r.$to;if(!i.parent.inlineContent||t.endOfTextblock(o<0?"up":"down")){var a=Me(t.state,o);if(a&&a instanceof e.NodeSelection)return ke(t,a)}if(!i.parent.inlineContent){var c=e.Selection.findFrom(o<0?i:s,o);return!c||ke(t,c)}return!1}function _e(t,o){if(!(t.state.selection instanceof e.TextSelection))return!0;var n=t.state.selection,r=n.$head,i=n.$anchor,s=n.empty;if(!r.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(o>0?"forward":"backward"))return!0;var a=!r.textOffset&&(o<0?r.nodeBefore:r.nodeAfter);if(a&&!a.isText){var c=t.state.tr;return o<0?c.delete(r.pos-a.nodeSize,r.pos):c.delete(r.pos,r.pos+a.nodeSize),t.dispatch(c),!0}return!1}function Le(e,t,o){e.domObserver.stop(),t.contentEditable=o,e.domObserver.start()}function Fe(e){if(n.chrome&&!(e.state.selection.$head.parentOffset>0)){var t=e.root.getSelection(),o=t.focusNode,r=t.focusOffset;if(o&&1==o.nodeType&&0==r&&o.firstChild&&"false"==o.firstChild.contentEditable){var i=o.firstChild;Le(e,i,!0),setTimeout(function(){return Le(e,i,!1)},20)}}}function Ie(e){var t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function $e(e,t){var o=t.keyCode,r=Ie(t);return 8==o||n.mac&&72==o&&"c"==r?_e(e,-1)||Ve(e):46==o||n.mac&&68==o&&"c"==r?_e(e,1)||Ee(e):13==o||27==o||(37==o?Te(e,-1,r)||Ve(e):39==o?Te(e,1,r)||Ee(e):38==o?ze(e,-1,r)||Ve(e):40==o?Fe(e)||ze(e,1,r)||Ee(e):r==(n.mac?"m":"c")&&(66==o||73==o||89==o||90==o))}function qe(t,o){var n,r,i=t.root.getSelection(),s=t.state.doc,a=t.docView.nearestDesc(i.focusNode),c=a&&0==a.size,l=t.docView.posFromDOM(i.focusNode,i.focusOffset),d=s.resolve(l);if(y(i)){for(n=d;a&&!a.node;)a=a.parent;if(a&&a.node.isAtom&&e.NodeSelection.isSelectable(a.node)&&a.parent&&(!a.node.isInline||!v(i.focusNode,i.focusOffset,a.dom))){var f=a.posBefore;r=new e.NodeSelection(l==f?d:s.resolve(f))}}else n=s.resolve(t.docView.posFromDOM(i.anchorNode,i.anchorOffset));r||(r=Qe(t,n,d,"pointer"==o||t.state.selection.head<d.pos&&!c?1:-1));return r}function Ke(t,o){var n=t.state.selection;if(Ye(t,n),t.editable?t.hasFocus():et(t)&&document.activeElement.contains(t.dom)){if(t.domObserver.disconnectSelection(),t.cursorWrapper)Xe(t);else{var r,i,s=n.anchor,a=n.head;!We||n instanceof e.TextSelection||(n.$from.parent.inlineContent||(r=je(t,n.from)),n.empty||n.$from.parent.inlineContent||(i=je(t,n.to))),t.docView.setSelection(s,a,t.root,o),We&&(r&&Ue(r),i&&Ue(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):s!=a&&(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&Ge(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}be.prototype.getPreMatch=function(e){return e>=this.preMatchOffset?this.preMatched[e-this.preMatchOffset]:null},be.prototype.destroyBetween=function(e,t){if(e!=t){for(var o=e;o<t;o++)this.top.children[o].destroy();this.top.children.splice(e,t-e),this.changed=!0}},be.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},be.prototype.syncToMarks=function(e,t,o){for(var n=0,r=this.stack.length>>1,i=Math.min(r,e.length);n<i&&(n==r-1?this.top:this.stack[n+1<<1]).matchesMark(e[n])&&!1!==e[n].type.spec.spanning;)n++;for(;n<r;)this.destroyRest(),this.top.dirty=X,this.index=this.stack.pop(),this.top=this.stack.pop(),r--;for(;r<e.length;){this.stack.push(this.top,this.index+1);for(var s=-1,a=this.index;a<Math.min(this.index+3,this.top.children.length);a++)if(this.top.children[a].matchesMark(e[r])){s=a;break}if(s>-1)s>this.index&&(this.changed=!0,this.destroyBetween(this.index,s)),this.top=this.top.children[this.index];else{var c=re.create(this.top,e[r],t,o);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,r++}},be.prototype.findNodeMatch=function(e,t,o,n){var r=-1,i=n<0?void 0:this.getPreMatch(n),s=this.top.children;if(i&&i.matchesNode(e,t,o))r=s.indexOf(i);else for(var a=this.index,c=Math.min(s.length,a+5);a<c;a++){var l=s[a];if(l.matchesNode(e,t,o)&&this.preMatched.indexOf(l)<0){r=a;break}}return!(r<0)&&(this.destroyBetween(this.index,r),this.index++,!0)},be.prototype.updateNextNode=function(e,t,o,n,r){for(var i=this.index;i<this.top.children.length;i++){var s=this.top.children[i];if(s instanceof ie){var a=this.preMatched.indexOf(s);if(a>-1&&a+this.preMatchOffset!=r)return!1;var c=s.dom;if(!(this.lock&&(c==this.lock||1==c.nodeType&&c.contains(this.lock.parentNode))&&!(e.isText&&s.node&&s.node.isText&&s.nodeDOM.nodeValue==e.text&&s.dirty!=Q&&ge(t,s.outerDeco)))&&s.update(e,t,o,n))return this.destroyBetween(this.index,i),s.dom!=c&&(this.changed=!0),this.index++,!0;break}}return!1},be.prototype.addNode=function(e,t,o,n,r){this.top.children.splice(this.index++,0,ie.create(this.top,e,t,o,n,r)),this.changed=!0},be.prototype.placeWidget=function(e,t,o){if(this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(e))this.index++;else{var n=new oe(this.top,e,t,o);this.top.children.splice(this.index++,0,n),this.changed=!0}},be.prototype.addTextblockHacks=function(){for(var e=this.top.children[this.index-1];e instanceof re;)e=e.children[e.children.length-1];if(!e||!(e instanceof ae)||/\n$/.test(e.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var t=document.createElement("br");this.top.children.splice(this.index++,0,new ce(this.top,te,t,null)),this.changed=!0}};var We=n.safari||n.chrome&&n.chrome_version<63;function je(e,t){var o=e.docView.domFromPos(t),r=o.node,i=o.offset,s=i<r.childNodes.length?r.childNodes[i]:null,a=i?r.childNodes[i-1]:null;if(n.safari&&s&&"false"==s.contentEditable)return He(s);if(!(s&&"false"!=s.contentEditable||a&&"false"!=a.contentEditable)){if(s)return He(s);if(a)return He(a)}}function He(e){return e.contentEditable="true",n.safari&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function Ue(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function Ge(e){var t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.hideSelectionGuard);var o=e.root.getSelection(),n=o.anchorNode,r=o.anchorOffset;t.addEventListener("selectionchange",e.hideSelectionGuard=function(){o.anchorNode==n&&o.anchorOffset==r||(t.removeEventListener("selectionchange",e.hideSelectionGuard),e.dom.classList.remove("ProseMirror-hideselection"))})}function Xe(e){var t=e.root.getSelection(),o=document.createRange(),r=e.cursorWrapper.dom,i="IMG"==r.nodeName;i?o.setEnd(r.parentNode,l(r)+1):o.setEnd(r,0),o.collapse(!1),t.removeAllRanges(),t.addRange(o),!i&&!e.state.selection.visible&&n.ie&&n.ie_version<=11&&(r.disabled=!0,r.disabled=!1)}function Ye(t,o){if(o instanceof e.NodeSelection){var n=t.docView.descAt(o.from);n!=t.lastSelectedViewDesc&&(Je(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else Je(t)}function Je(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=null)}function Qe(t,o,n,r){return t.someProp("createSelectionBetween",function(e){return e(t,o,n)})||e.TextSelection.between(o,n,r)}function Ze(e){return(!e.editable||e.root.activeElement==e.dom)&&et(e)}function et(e){var t=e.root.getSelection();if(!t.anchorNode)return!1;try{return e.dom.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(3==t.focusNode.nodeType?t.focusNode.parentNode:t.focusNode))}catch(o){return!1}}function tt(e){var t=e.docView.domFromPos(e.state.selection.anchor),o=e.root.getSelection();return h(t.node,t.offset,o.anchorNode,o.anchorOffset)}function ot(e,o,r){var i=e.docView.parseRange(o,r),s=i.node,a=i.fromOffset,c=i.toOffset,l=i.from,d=i.to,f=e.root.getSelection(),h=null,p=f.anchorNode;if(p&&e.dom.contains(1==p.nodeType?p:p.parentNode)&&(h=[{node:p,offset:f.anchorOffset}],y(f)||h.push({node:f.focusNode,offset:f.focusOffset})),n.chrome&&8===e.lastKeyCode)for(var u=c;u>a;u--){var m=s.childNodes[u-1],v=m.pmViewDesc;if("BR"==m.nodeType&&!v){c=u;break}if(!v||v.size)break}var g=e.state.doc,b=e.someProp("domParser")||t.DOMParser.fromSchema(e.state.schema),w=g.resolve(l),S=null,D=b.parse(s,{topNode:w.parent,topMatch:w.parent.contentMatchAt(w.index()),topOpen:!0,from:a,to:c,preserveWhitespace:!w.parent.type.spec.code||"full",editableContent:!0,findPositions:h,ruleFromNode:nt,context:w});if(h&&null!=h[0].pos){var O=h[0].pos,N=h[1]&&h[1].pos;null==N&&(N=O),S={anchor:O+l,head:N+l}}return{doc:D,sel:S,from:l,to:d}}function nt(e){var t=e.pmViewDesc;if(t)return t.parseRule();if("BR"==e.nodeName&&e.parentNode){if(n.safari&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){var o=document.createElement("div");return o.appendChild(document.createElement("li")),{skip:o}}if(e.parentNode.lastChild==e||n.safari&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if("IMG"==e.nodeName&&e.getAttribute("mark-placeholder"))return{ignore:!0}}function rt(t,o,r,i,s){if(o<0){var a=t.lastSelectionTime>Date.now()-50?t.lastSelectionOrigin:null,c=qe(t,a);if(!t.state.selection.eq(c)){var l=t.state.tr.setSelection(c);"pointer"==a?l.setMeta("pointer",!0):"key"==a&&l.scrollIntoView(),t.dispatch(l)}}else{var d=t.state.doc.resolve(o),f=d.sharedDepth(r);o=d.before(f+1),r=t.state.doc.resolve(r).after(f+1);var h,p,u=t.state.selection,m=ot(t,o,r),v=t.state.doc,g=v.slice(m.from,m.to);8===t.lastKeyCode&&Date.now()-100<t.lastKeyCodeTime?(h=t.state.selection.to,p="end"):(h=t.state.selection.from,p="start"),t.lastKeyCode=null;var y=lt(g.content,m.doc.content,m.from,h,p);if(!y){if(!(i&&u instanceof e.TextSelection&&!u.empty&&u.$head.sameParent(u.$anchor))||t.composing||m.sel&&m.sel.anchor!=m.sel.head){if(m.sel){var w=it(t,t.state.doc,m.sel);w&&!w.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(w))}return}y={start:u.from,endA:u.to,endB:u.to}}t.domChangeCount++,t.state.selection.from<t.state.selection.to&&y.start==y.endB&&t.state.selection instanceof e.TextSelection&&(y.start>t.state.selection.from&&y.start<=t.state.selection.from+2?y.start=t.state.selection.from:y.endA<t.state.selection.to&&y.endA>=t.state.selection.to-2&&(y.endB+=t.state.selection.to-y.endA,y.endA=t.state.selection.to)),n.ie&&n.ie_version<=11&&y.endB==y.start+1&&y.endA==y.start&&y.start>m.from&&"  "==m.doc.textBetween(y.start-m.from-1,y.start-m.from+1)&&(y.start--,y.endA--,y.endB--);var S,D=m.doc.resolveNoCache(y.start-m.from),O=m.doc.resolveNoCache(y.endB-m.from);if((n.ios&&t.lastIOSEnter>Date.now()-100&&(!D.sameParent(O)||s.some(function(e){return"DIV"==e.nodeName}))||!D.sameParent(O)&&D.pos<m.doc.content.size&&(S=e.Selection.findFrom(m.doc.resolve(D.pos+1),1,!0))&&S.head==O.pos)&&t.someProp("handleKeyDown",function(e){return e(t,b(13,"Enter"))}))t.lastIOSEnter=0;else if(t.state.selection.anchor>y.start&&at(v,y.start,y.endA,D,O)&&t.someProp("handleKeyDown",function(e){return e(t,b(8,"Backspace"))}))n.android&&n.chrome&&t.domObserver.suppressSelectionUpdates();else{var N,C,x,M,k=y.start,T=y.endA;if(D.sameParent(O)&&D.parent.inlineContent)if(D.pos==O.pos)n.ie&&n.ie_version<=11&&0==D.parentOffset&&(t.domObserver.suppressSelectionUpdates(),setTimeout(function(){return Ke(t)},20)),N=t.state.tr.delete(k,T),C=v.resolve(y.start).marksAcross(v.resolve(y.endA));else if(y.endA==y.endB&&(M=v.resolve(y.start))&&(x=st(D.parent.content.cut(D.parentOffset,O.parentOffset),M.parent.content.cut(M.parentOffset,y.endA-M.start()))))N=t.state.tr,"add"==x.type?N.addMark(k,T,x.mark):N.removeMark(k,T,x.mark);else if(D.parent.child(D.index()).isText&&D.index()==O.index()-(O.textOffset?0:1)){var A=D.parent.textBetween(D.parentOffset,O.parentOffset);if(t.someProp("handleTextInput",function(e){return e(t,k,T,A)}))return;N=t.state.tr.insertText(A,k,T)}if(N||(N=t.state.tr.replace(k,T,m.doc.slice(y.start-m.from,y.endB-m.from))),m.sel){var P=it(t,N.doc,m.sel);P&&!(n.chrome&&n.android&&t.composing&&P.empty&&(P.head==k||P.head==N.mapping.map(T)-1)||n.ie&&P.empty&&P.head==k)&&N.setSelection(P)}C&&N.ensureMarks(C),t.dispatch(N.scrollIntoView())}}}function it(e,t,o){return Math.max(o.anchor,o.head)>t.content.size?null:Qe(e,t.resolve(o.anchor),t.resolve(o.head))}function st(e,o){for(var n,r,i,s=e.firstChild.marks,a=o.firstChild.marks,c=s,l=a,d=0;d<a.length;d++)c=a[d].removeFromSet(c);for(var f=0;f<s.length;f++)l=s[f].removeFromSet(l);if(1==c.length&&0==l.length)r=c[0],n="add",i=function(e){return e.mark(r.addToSet(e.marks))};else{if(0!=c.length||1!=l.length)return null;r=l[0],n="remove",i=function(e){return e.mark(r.removeFromSet(e.marks))}}for(var h=[],p=0;p<o.childCount;p++)h.push(i(o.child(p)));if(t.Fragment.from(h).eq(e))return{mark:r,type:n}}function at(e,t,o,n,r){if(!n.parent.isTextblock||o-t<=r.pos-n.pos||ct(n,!0,!1)<r.pos)return!1;var i=e.resolve(t);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=e.resolve(ct(i,!0,!0));return!(!s.parent.isTextblock||s.pos>o||ct(s,!0,!1)<o)&&n.parent.content.cut(n.parentOffset).eq(s.parent.content)}function ct(e,t,o){for(var n=e.depth,r=t?e.end():e.pos;n>0&&(t||e.indexAfter(n)==e.node(n).childCount);)n--,r++,t=!1;if(o)for(var i=e.node(n).maybeChild(e.indexAfter(n));i&&!i.isLeaf;)i=i.firstChild,r++;return r}function lt(e,t,o,n,r){var i=e.findDiffStart(t,o);if(null==i)return null;var s=e.findDiffEnd(t,o+e.size,o+t.size),a=s.a,c=s.b;"end"==r&&(n-=a+Math.max(0,i-Math.min(a,c))-i);if(a<i&&e.size<t.size)c=(i-=n<=i&&n>=a?i-n:0)+(c-a),a=i;else if(c<i){a=(i-=n<=i&&n>=c?i-n:0)+(a-c),c=i}return{start:i,endA:a,endB:c}}function dt(e,o){for(var n=[],r=o.content,i=o.openStart,s=o.openEnd;i>1&&s>1&&1==r.childCount&&1==r.firstChild.childCount;){i--,s--;var a=r.firstChild;n.push(a.type.name,a.type.hasRequiredAttrs()?a.attrs:null),r=a.content}var c=e.someProp("clipboardSerializer")||t.DOMSerializer.fromSchema(e.state.schema),l=wt(),d=l.createElement("div");d.appendChild(c.serializeFragment(r,{document:l}));for(var f,h=d.firstChild;h&&1==h.nodeType&&(f=yt[h.nodeName.toLowerCase()]);){for(var p=f.length-1;p>=0;p--){for(var u=l.createElement(f[p]);d.firstChild;)u.appendChild(d.firstChild);d.appendChild(u)}h=d.firstChild}return h&&1==h.nodeType&&h.setAttribute("data-pm-slice",i+" "+s+" "+JSON.stringify(n)),{dom:d,text:e.someProp("clipboardTextSerializer",function(e){return e(o)})||o.content.textBetween(0,o.content.size,"\n\n")}}function ft(e,o,n,r,i){var s,a,c=i.parent.type.spec.code;if(!n&&!o)return null;var l=o&&(r||c||!n);if(l){if(e.someProp("transformPastedText",function(e){o=e(o)}),c)return new t.Slice(t.Fragment.from(e.state.schema.text(o)),0,0);var d=e.someProp("clipboardTextParser",function(e){return e(o,i)});d?a=d:(s=document.createElement("div"),o.trim().split(/(?:\r\n?|\n)+/).forEach(function(e){s.appendChild(document.createElement("p")).textContent=e}))}else e.someProp("transformPastedHTML",function(e){n=e(n)}),s=St(n);var f=s&&s.querySelector("[data-pm-slice]"),h=f&&/^(\d+) (\d+) (.*)/.exec(f.getAttribute("data-pm-slice"));if(!a){var p=e.someProp("clipboardParser")||e.someProp("domParser")||t.DOMParser.fromSchema(e.state.schema);a=p.parseSlice(s,{preserveWhitespace:!(!l&&!h),context:i})}return a=h?Dt(gt(a,+h[1],+h[2]),h[3]):t.Slice.maxOpen(ht(a.content,i),!1),e.someProp("transformPasted",function(e){a=e(a)}),a}function ht(e,o){if(e.childCount<2)return e;for(var n=function(n){var r=o.node(n).contentMatchAt(o.index(n)),i=void 0,s=[];if(e.forEach(function(e){if(s){var t,o=r.findWrapping(e.type);if(!o)return s=null;if(t=s.length&&i.length&&ut(o,i,e,s[s.length-1],0))s[s.length-1]=t;else{s.length&&(s[s.length-1]=mt(s[s.length-1],i.length));var n=pt(e,o);s.push(n),r=r.matchType(n.type,n.attrs),i=o}}}),s)return{v:t.Fragment.from(s)}},r=o.depth;r>=0;r--){var i=n(r);if(i)return i.v}return e}function pt(e,o,n){void 0===n&&(n=0);for(var r=o.length-1;r>=n;r--)e=o[r].create(null,t.Fragment.from(e));return e}function ut(e,o,n,r,i){if(i<e.length&&i<o.length&&e[i]==o[i]){var s=ut(e,o,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(t.Fragment.from(pt(n,e,i+1))))}}function mt(e,o){if(0==o)return e;var n=e.content.replaceChild(e.childCount-1,mt(e.lastChild,o-1)),r=e.contentMatchAt(e.childCount).fillBefore(t.Fragment.empty,!0);return e.copy(n.append(r))}function vt(e,o,n,r,i,s){var a=o<0?e.firstChild:e.lastChild,c=a.content;return i<r-1&&(c=vt(c,o,n,r,i+1,s)),i>=n&&(c=o<0?a.contentMatchAt(0).fillBefore(c,e.childCount>1||s<=i).append(c):c.append(a.contentMatchAt(a.childCount).fillBefore(t.Fragment.empty,!0))),e.replaceChild(o<0?0:e.childCount-1,a.copy(c))}function gt(e,o,n){return o<e.openStart&&(e=new t.Slice(vt(e.content,-1,o,e.openStart,0,e.openEnd),o,e.openEnd)),n<e.openEnd&&(e=new t.Slice(vt(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}var yt={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},bt=null;function wt(){return bt||(bt=document.implementation.createHTMLDocument("title"))}function St(e){var t=/(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));var o,n=wt().createElement("div"),r=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(e),i=0;(o=r&&yt[r[1].toLowerCase()])&&(e=o.map(function(e){return"<"+e+">"}).join("")+e+o.map(function(e){return"</"+e+">"}).reverse().join(""),i=o.length),n.innerHTML=e;for(var s=0;s<i;s++)n=n.firstChild;return n}function Dt(e,o){if(!e.size)return e;var n,r=e.content.firstChild.type.schema;try{n=JSON.parse(o)}catch(d){return e}for(var i=e.content,s=e.openStart,a=e.openEnd,c=n.length-2;c>=0;c-=2){var l=r.nodes[n[c]];if(!l||l.hasRequiredAttrs())break;i=t.Fragment.from(l.create(n[c+1],i)),s++,a++}return new t.Slice(i,s,a)}var Ot={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Nt=n.ie&&n.ie_version<=11,Ct=function(){this.anchorNode=this.anchorOffset=this.focusNode=this.focusOffset=null};Ct.prototype.set=function(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset},Ct.prototype.eq=function(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset};var xt=function(e,t){var o=this;this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=window.MutationObserver&&new window.MutationObserver(function(e){for(var t=0;t<e.length;t++)o.queue.push(e[t]);n.ie&&n.ie_version<=11&&e.some(function(e){return"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length})?o.flushSoon():o.flush()}),this.currentSelection=new Ct,Nt&&(this.onCharData=function(e){o.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),o.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.suppressingSelectionUpdates=!1};xt.prototype.flushSoon=function(){var e=this;this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(function(){e.flushingSoon=-1,e.flush()},20))},xt.prototype.forceFlush=function(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())},xt.prototype.start=function(){this.observer&&this.observer.observe(this.view.dom,Ot),Nt&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()},xt.prototype.stop=function(){var e=this;if(this.observer){var t=this.observer.takeRecords();if(t.length){for(var o=0;o<t.length;o++)this.queue.push(t[o]);window.setTimeout(function(){return e.flush()},20)}this.observer.disconnect()}Nt&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()},xt.prototype.connectSelection=function(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)},xt.prototype.disconnectSelection=function(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)},xt.prototype.suppressSelectionUpdates=function(){var e=this;this.suppressingSelectionUpdates=!0,setTimeout(function(){return e.suppressingSelectionUpdates=!1},50)},xt.prototype.onSelectionChange=function(){if(Ze(this.view)){if(this.suppressingSelectionUpdates)return Ke(this.view);if(n.ie&&n.ie_version<=11&&!this.view.state.selection.empty){var e=this.view.root.getSelection();if(e.focusNode&&h(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}},xt.prototype.setCurSelection=function(){this.currentSelection.set(this.view.root.getSelection())},xt.prototype.ignoreSelectionChange=function(e){if(0==e.rangeCount)return!0;var t=e.getRangeAt(0).commonAncestorContainer,o=this.view.docView.nearestDesc(t);return o&&o.ignoreMutation({type:"selection",target:3==t.nodeType?t.parentNode:t})?(this.setCurSelection(),!0):void 0},xt.prototype.flush=function(){if(this.view.docView&&!(this.flushingSoon>-1)){var e=this.observer?this.observer.takeRecords():[];this.queue.length&&(e=this.queue.concat(e),this.queue.length=0);var t=this.view.root.getSelection(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&et(this.view)&&!this.ignoreSelectionChange(t),r=-1,i=-1,s=!1,a=[];if(this.view.editable)for(var c=0;c<e.length;c++){var l=this.registerMutation(e[c],a);l&&(r=r<0?l.from:Math.min(l.from,r),i=i<0?l.to:Math.max(l.to,i),l.typeOver&&(s=!0))}if(n.gecko&&a.length>1){var d=a.filter(function(e){return"BR"==e.nodeName});if(2==d.length){var f=d[0],h=d[1];f.parentNode&&f.parentNode.parentNode==h.parentNode?h.remove():f.remove()}}(r>-1||o)&&(r>-1&&(this.view.docView.markDirty(r,i),kt(this.view)),this.handleDOMChange(r,i,s,a),this.view.docView.dirty?this.view.updateState(this.view.state):this.currentSelection.eq(t)||Ke(this.view))}},xt.prototype.registerMutation=function(e,t){if(t.indexOf(e.target)>-1)return null;var o=this.view.docView.nearestDesc(e.target);if("attributes"==e.type&&(o==this.view.docView||"contenteditable"==e.attributeName||"style"==e.attributeName&&!e.oldValue&&!e.target.getAttribute("style")))return null;if(!o||o.ignoreMutation(e))return null;if("childList"==e.type){var r=e.previousSibling,i=e.nextSibling;if(n.ie&&n.ie_version<=11&&e.addedNodes.length)for(var s=0;s<e.addedNodes.length;s++){var a=e.addedNodes[s],c=a.previousSibling,d=a.nextSibling;(!c||Array.prototype.indexOf.call(e.addedNodes,c)<0)&&(r=c),(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d)}for(var f=r&&r.parentNode==e.target?l(r)+1:0,h=o.localPosFromDOM(e.target,f,-1),p=i&&i.parentNode==e.target?l(i):e.target.childNodes.length,u=0;u<e.addedNodes.length;u++)t.push(e.addedNodes[u]);return{from:h,to:o.localPosFromDOM(e.target,p,1)}}return"attributes"==e.type?{from:o.posAtStart-o.border,to:o.posAtEnd+o.border}:{from:o.posAtStart,to:o.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}};var Mt=!1;function kt(e){Mt||(Mt=!0,"normal"==getComputedStyle(e.dom).whiteSpace&&console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."))}var Tt={},At={};function Pt(e){e.shiftKey=!1,e.mouseDown=null,e.lastKeyCode=null,e.lastKeyCodeTime=0,e.lastClick={time:0,x:0,y:0,type:""},e.lastSelectionOrigin=null,e.lastSelectionTime=0,e.lastIOSEnter=0,e.composing=!1,e.composingTimeout=null,e.compositionNodes=[],e.compositionEndedAt=-2e8,e.domObserver=new xt(e,function(t,o,n,r){return rt(e,t,o,n,r)}),e.domObserver.start(),e.domChangeCount=0,e.eventHandlers=Object.create(null);var t=function(t){var o=Tt[t];e.dom.addEventListener(t,e.eventHandlers[t]=function(t){!zt(e,t)||Bt(e,t)||!e.editable&&t.type in At||o(e,t)})};for(var o in Tt)t(o);n.safari&&e.dom.addEventListener("input",function(){return null}),Rt(e)}function Vt(e,t){e.lastSelectionOrigin=t,e.lastSelectionTime=Date.now()}function Et(e){for(var t in e.domObserver.stop(),e.eventHandlers)e.dom.removeEventListener(t,e.eventHandlers[t]);clearTimeout(e.composingTimeout)}function Rt(e){e.someProp("handleDOMEvents",function(t){for(var o in t)e.eventHandlers[o]||e.dom.addEventListener(o,e.eventHandlers[o]=function(t){return Bt(e,t)})})}function Bt(e,t){return e.someProp("handleDOMEvents",function(o){var n=o[t.type];return!!n&&(n(e,t)||t.defaultPrevented)})}function zt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(var o=t.target;o!=e.dom;o=o.parentNode)if(!o||11==o.nodeType||o.pmViewDesc&&o.pmViewDesc.stopEvent(t))return!1;return!0}function _t(e,t){Bt(e,t)||!Tt[t.type]||!e.editable&&t.type in At||Tt[t.type](e,t)}function Lt(e){return{left:e.clientX,top:e.clientY}}function Ft(e,t){var o=t.x-e.clientX,n=t.y-e.clientY;return o*o+n*n<100}function It(e,t,o,n,r){if(-1==n)return!1;for(var i=e.state.doc.resolve(n),s=function(n){if(e.someProp(t,function(t){return n>i.depth?t(e,o,i.nodeAfter,i.before(n),r,!0):t(e,o,i.node(n),i.before(n),r,!1)}))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function $t(e,t,o){e.focused||e.focus();var n=e.state.tr.setSelection(t);"pointer"==o&&n.setMeta("pointer",!0),e.dispatch(n)}function qt(t,o){if(-1==o)return!1;var n=t.state.doc.resolve(o),r=n.nodeAfter;return!!(r&&r.isAtom&&e.NodeSelection.isSelectable(r))&&($t(t,new e.NodeSelection(n),"pointer"),!0)}function Kt(t,o){if(-1==o)return!1;var n,r,i=t.state.selection;i instanceof e.NodeSelection&&(n=i.node);for(var s=t.state.doc.resolve(o),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(e.NodeSelection.isSelectable(c)){r=n&&i.$from.depth>0&&a>=i.$from.depth&&s.before(i.$from.depth+1)==i.$from.pos?s.before(i.$from.depth):s.before(a);break}}return null!=r&&($t(t,e.NodeSelection.create(t.state.doc,r),"pointer"),!0)}function Wt(e,t,o,n,r){return It(e,"handleClickOn",t,o,n)||e.someProp("handleClick",function(o){return o(e,t,n)})||(r?Kt(e,o):qt(e,o))}function jt(e,t,o,n){return It(e,"handleDoubleClickOn",t,o,n)||e.someProp("handleDoubleClick",function(o){return o(e,t,n)})}function Ht(e,t,o,n){return It(e,"handleTripleClickOn",t,o,n)||e.someProp("handleTripleClick",function(o){return o(e,t,n)})||Ut(e,o)}function Ut(t,o){var n=t.state.doc;if(-1==o)return!!n.inlineContent&&($t(t,e.TextSelection.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(o),i=r.depth+1;i>0;i--){var s=i>r.depth?r.nodeAfter:r.node(i),a=r.before(i);if(s.inlineContent)$t(t,e.TextSelection.create(n,a+1,a+1+s.content.size),"pointer");else{if(!e.NodeSelection.isSelectable(s))continue;$t(t,e.NodeSelection.create(n,a),"pointer")}return!0}}function Gt(e){return eo(e)}At.keydown=function(e,t){if(e.shiftKey=16==t.keyCode||t.shiftKey,!Jt(e,t))if(e.domObserver.forceFlush(),e.lastKeyCode=t.keyCode,e.lastKeyCodeTime=Date.now(),!n.ios||13!=t.keyCode||t.ctrlKey||t.altKey||t.metaKey)e.someProp("handleKeyDown",function(o){return o(e,t)})||$e(e,t)?t.preventDefault():Vt(e,"key");else{var o=Date.now();e.lastIOSEnter=o,setTimeout(function(){e.lastIOSEnter==o&&(e.someProp("handleKeyDown",function(t){return t(e,b(13,"Enter"))}),e.lastIOSEnter=0)},50)}},At.keyup=function(e,t){16==t.keyCode&&(e.shiftKey=!1)},At.keypress=function(t,o){if(!(Jt(t,o)||!o.charCode||o.ctrlKey&&!o.altKey||n.mac&&o.metaKey))if(t.someProp("handleKeyPress",function(e){return e(t,o)}))o.preventDefault();else{var r=t.state.selection;if(!(r instanceof e.TextSelection&&r.$from.sameParent(r.$to))){var i=String.fromCharCode(o.charCode);t.someProp("handleTextInput",function(e){return e(t,r.$from.pos,r.$to.pos,i)})||t.dispatch(t.state.tr.insertText(i).scrollIntoView()),o.preventDefault()}}};var Xt=n.mac?"metaKey":"ctrlKey";Tt.mousedown=function(e,t){e.shiftKey=t.shiftKey;var o=Gt(e),n=Date.now(),r="singleClick";n-e.lastClick.time<500&&Ft(t,e.lastClick)&&!t[Xt]&&("singleClick"==e.lastClick.type?r="doubleClick":"doubleClick"==e.lastClick.type&&(r="tripleClick")),e.lastClick={time:n,x:t.clientX,y:t.clientY,type:r};var i=e.posAtCoords(Lt(t));i&&("singleClick"==r?e.mouseDown=new Yt(e,i,t,o):("doubleClick"==r?jt:Ht)(e,i.pos,i.inside,t)?t.preventDefault():Vt(e,"pointer"))};var Yt=function(t,o,r,i){var s,a,c=this;if(this.view=t,this.startDoc=t.state.doc,this.pos=o,this.event=r,this.flushed=i,this.selectNode=r[Xt],this.allowDefault=r.shiftKey,o.inside>-1)s=t.state.doc.nodeAt(o.inside),a=o.inside;else{var l=t.state.doc.resolve(o.pos);s=l.parent,a=l.depth?l.before():0}this.mightDrag=null;var d=i?null:r.target,f=d?t.docView.nearestDesc(d,!0):null;this.target=f?f.dom:null,(s.type.spec.draggable&&!1!==s.type.spec.selectable||t.state.selection instanceof e.NodeSelection&&a==t.state.selection.from)&&(this.mightDrag={node:s,pos:a,addAttr:this.target&&!this.target.draggable,setUneditable:this.target&&n.gecko&&!this.target.hasAttribute("contentEditable")}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(function(){return c.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Vt(t,"pointer")};function Jt(e,t){return!!e.composing||!!(n.safari&&Math.abs(t.timeStamp-e.compositionEndedAt)<500)&&(e.compositionEndedAt=-2e8,!0)}Yt.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.view.mouseDown=null},Yt.prototype.up=function(t){if(this.done(),this.view.dom.contains(3==t.target.nodeType?t.target.parentNode:t.target)){var o=this.pos;this.view.state.doc!=this.startDoc&&(o=this.view.posAtCoords(Lt(t))),this.allowDefault||!o?Vt(this.view,"pointer"):Wt(this.view,o.pos,o.inside,t,this.selectNode)?t.preventDefault():!this.flushed&&(!n.chrome||this.view.state.selection instanceof e.TextSelection||o.pos!=this.view.state.selection.from&&o.pos!=this.view.state.selection.to)?Vt(this.view,"pointer"):($t(this.view,e.Selection.near(this.view.state.doc.resolve(o.pos)),"pointer"),t.preventDefault())}},Yt.prototype.move=function(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0),Vt(this.view,"pointer")},Tt.touchdown=function(e){Gt(e),Vt(e,"pointer")},Tt.contextmenu=function(e){return Gt(e)};var Qt=n.android?5e3:-1;function Zt(e,t){clearTimeout(e.composingTimeout),t>-1&&(e.composingTimeout=setTimeout(function(){return eo(e)},t))}function eo(e,t){for(e.domObserver.forceFlush(),e.composing=!1;e.compositionNodes.length>0;)e.compositionNodes.pop().markParentsDirty();if(t||e.docView.dirty){var o=qe(e);return o.eq(e.state.selection)?e.updateState(e.state):e.dispatch(e.state.tr.setSelection(o)),!0}return!1}function to(e,t){var o=e.dom.ownerDocument,n=o.body.appendChild(o.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";var r=getSelection(),i=o.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(function(){o.body.removeChild(n),e.focus()},50)}At.compositionstart=At.compositionupdate=function(e){if(!e.composing){e.domObserver.flush();var t=e.state,o=t.selection.$from;if(t.selection.empty&&(t.storedMarks||!o.textOffset&&o.parentOffset&&o.nodeBefore.marks.some(function(e){return!1===e.type.spec.inclusive})))e.markCursor=e.state.storedMarks||o.marks(),eo(e,!0),e.markCursor=null;else if(eo(e),n.gecko&&t.selection.empty&&o.parentOffset&&!o.textOffset&&o.nodeBefore.marks.length)for(var r=e.root.getSelection(),i=r.focusNode,s=r.focusOffset;i&&1==i.nodeType&&0!=s;){var a=s<0?i.lastChild:i.childNodes[s-1];if(!a)break;if(3==a.nodeType){r.collapse(a,a.nodeValue.length);break}i=a,s=-1}e.composing=!0}Zt(e,Qt)},At.compositionend=function(e,t){e.composing&&(e.composing=!1,e.compositionEndedAt=t.timeStamp,Zt(e,20))};var oo=n.ie&&n.ie_version<15||n.ios&&n.webkit_version<604;function no(e){return 0==e.openStart&&0==e.openEnd&&1==e.content.childCount?e.content.firstChild:null}function ro(e,t){var o=e.dom.ownerDocument,n=e.shiftKey||e.state.selection.$from.parent.type.spec.code,r=o.body.appendChild(o.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus(),setTimeout(function(){e.focus(),o.body.removeChild(r),n?io(e,r.value,null,t):io(e,r.textContent,r.innerHTML,t)},50)}function io(e,o,n,r){var i=ft(e,o,n,e.shiftKey,e.state.selection.$from);if(!e.someProp("handlePaste",function(o){return o(e,r,i||t.Slice.empty)})&&i){var s=no(i),a=s?e.state.tr.replaceSelectionWith(s,e.shiftKey):e.state.tr.replaceSelection(i);e.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste"))}}Tt.copy=At.cut=function(e,t){var o=e.state.selection,n="cut"==t.type;if(!o.empty){var r=oo?null:t.clipboardData,i=dt(e,o.content()),s=i.dom,a=i.text;r?(t.preventDefault(),r.clearData(),r.setData("text/html",s.innerHTML),r.setData("text/plain",a)):to(e,s),n&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))}},At.paste=function(e,t){var o=oo?null:t.clipboardData,n=o&&o.getData("text/html"),r=o&&o.getData("text/plain");o&&(n||r||o.files.length)?(io(e,r,n,t),t.preventDefault()):ro(e,t)};var so=function(e,t){this.slice=e,this.move=t},ao=n.mac?"altKey":"ctrlKey";for(var co in Tt.dragstart=function(t,o){var n=t.mouseDown;if(n&&n.done(),o.dataTransfer){var r=t.state.selection,i=r.empty?null:t.posAtCoords(Lt(o));if(i&&i.pos>=r.from&&i.pos<=(r instanceof e.NodeSelection?r.to-1:r.to));else if(n&&n.mightDrag)t.dispatch(t.state.tr.setSelection(e.NodeSelection.create(t.state.doc,n.mightDrag.pos)));else if(o.target&&1==o.target.nodeType){var s=t.docView.nearestDesc(o.target,!0);if(!s||!s.node.type.spec.draggable||s==t.docView)return;t.dispatch(t.state.tr.setSelection(e.NodeSelection.create(t.state.doc,s.posBefore)))}var a=t.state.selection.content(),c=dt(t,a),l=c.dom,d=c.text;o.dataTransfer.clearData(),o.dataTransfer.setData(oo?"Text":"text/html",l.innerHTML),oo||o.dataTransfer.setData("text/plain",d),t.dragging=new so(a,!o[ao])}},Tt.dragend=function(e){window.setTimeout(function(){return e.dragging=null},50)},At.dragover=At.dragenter=function(e,t){return t.preventDefault()},At.drop=function(n,r){var i=n.dragging;if(n.dragging=null,r.dataTransfer){var s=n.posAtCoords(Lt(r));if(s){var a=n.state.doc.resolve(s.pos);if(a){var c=i&&i.slice||ft(n,r.dataTransfer.getData(oo?"Text":"text/plain"),oo?null:r.dataTransfer.getData("text/html"),!1,a);if(n.someProp("handleDrop",function(e){return e(n,r,c||t.Slice.empty,i&&i.move)}))r.preventDefault();else if(c){r.preventDefault();var l=c?(0,o.dropPoint)(n.state.doc,a.pos,c):a.pos;null==l&&(l=a.pos);var d=n.state.tr;i&&i.move&&d.deleteSelection();var f=d.mapping.map(l),h=0==c.openStart&&0==c.openEnd&&1==c.content.childCount,p=d.doc;if(h?d.replaceRangeWith(f,f,c.content.firstChild):d.replaceRange(f,f,c),!d.doc.eq(p)){var u=d.doc.resolve(f);h&&e.NodeSelection.isSelectable(c.content.firstChild)&&u.nodeAfter&&u.nodeAfter.sameMarkup(c.content.firstChild)?d.setSelection(new e.NodeSelection(u)):d.setSelection(Qe(n,u,d.doc.resolve(d.mapping.map(l)))),n.focus(),n.dispatch(d.setMeta("uiEvent","drop"))}}}}}},Tt.focus=function(e){e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(function(){e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.root.getSelection())&&Ke(e)},20))},Tt.blur=function(e){e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),e.domObserver.currentSelection.set({}),e.focused=!1)},Tt.beforeinput=function(e,t){if(n.chrome&&n.android&&"deleteContentBackward"==t.inputType){var o=e.domChangeCount;setTimeout(function(){if(e.domChangeCount==o&&(e.dom.blur(),e.focus(),!e.someProp("handleKeyDown",function(t){return t(e,b(8,"Backspace"))}))){var t=e.state.selection.$cursor;t&&t.pos>0&&e.dispatch(e.state.tr.delete(t.pos-1,t.pos).scrollIntoView())}},50)}},At)Tt[co]=At[co];function lo(e,t){if(e==t)return!0;for(var o in e)if(e[o]!==t[o])return!1;for(var n in t)if(!(n in e))return!1;return!0}var fo=function(e,t){this.spec=t||go,this.side=this.spec.side||0,this.toDOM=e};fo.prototype.map=function(e,t,o,n){var r=e.mapResult(t.from+n,this.side<0?-1:1),i=r.pos;return r.deleted?null:new uo(i-o,i-o,this)},fo.prototype.valid=function(){return!0},fo.prototype.eq=function(e){return this==e||e instanceof fo&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&lo(this.spec,e.spec))};var ho=function(e,t){this.spec=t||go,this.attrs=e};ho.prototype.map=function(e,t,o,n){var r=e.map(t.from+n,this.spec.inclusiveStart?-1:1)-o,i=e.map(t.to+n,this.spec.inclusiveEnd?1:-1)-o;return r>=i?null:new uo(r,i,this)},ho.prototype.valid=function(e,t){return t.from<t.to},ho.prototype.eq=function(e){return this==e||e instanceof ho&&lo(this.attrs,e.attrs)&&lo(this.spec,e.spec)},ho.is=function(e){return e.type instanceof ho};var po=function(e,t){this.spec=t||go,this.attrs=e};po.prototype.map=function(e,t,o,n){var r=e.mapResult(t.from+n,1);if(r.deleted)return null;var i=e.mapResult(t.to+n,-1);return i.deleted||i.pos<=r.pos?null:new uo(r.pos-o,i.pos-o,this)},po.prototype.valid=function(e,t){var o=e.content.findIndex(t.from),n=o.index,r=o.offset;return r==t.from&&r+e.child(n).nodeSize==t.to},po.prototype.eq=function(e){return this==e||e instanceof po&&lo(this.attrs,e.attrs)&&lo(this.spec,e.spec)};var uo=function(e,t,o){this.from=e,this.to=t,this.type=o};exports.Decoration=uo;var mo={spec:{configurable:!0}};uo.prototype.copy=function(e,t){return new uo(e,t,this.type)},uo.prototype.eq=function(e){return this.type.eq(e.type)&&this.from==e.from&&this.to==e.to},uo.prototype.map=function(e,t,o){return this.type.map(e,this,t,o)},uo.widget=function(e,t,o){return new uo(e,e,new fo(t,o))},uo.inline=function(e,t,o,n){return new uo(e,t,new ho(o,n))},uo.node=function(e,t,o,n){return new uo(e,t,new po(o,n))},mo.spec.get=function(){return this.type.spec},Object.defineProperties(uo.prototype,mo);var vo=[],go={},yo=function(e,t){this.local=e&&e.length?e:vo,this.children=t&&t.length?t:vo};exports.DecorationSet=yo,yo.create=function(e,t){return t.length?xo(t,e,0,go):bo},yo.prototype.find=function(e,t,o){var n=[];return this.findInner(null==e?0:e,null==t?1e9:t,n,0,o),n},yo.prototype.findInner=function(e,t,o,n,r){for(var i=0;i<this.local.length;i++){var s=this.local[i];s.from<=t&&s.to>=e&&(!r||r(s.spec))&&o.push(s.copy(s.from+n,s.to+n))}for(var a=0;a<this.children.length;a+=3)if(this.children[a]<t&&this.children[a+1]>e){var c=this.children[a]+1;this.children[a+2].findInner(e-c,t-c,o,n+c,r)}},yo.prototype.map=function(e,t,o){return this==bo||0==e.maps.length?this:this.mapInner(e,t,0,0,o||go)},yo.prototype.mapInner=function(e,t,o,n,r){for(var i,s=0;s<this.local.length;s++){var a=this.local[s].map(e,o,n);a&&a.type.valid(t,a)?(i||(i=[])).push(a):r.onRemove&&r.onRemove(this.local[s].spec)}return this.children.length?So(this.children,i,e,t,o,n,r):i?new yo(i.sort(Mo)):bo},yo.prototype.add=function(e,t){return t.length?this==bo?yo.create(e,t):this.addInner(e,t,0):this},yo.prototype.addInner=function(e,t,o){var n,r=this,i=0;e.forEach(function(e,s){var a,c=s+o;if(a=No(t,e,c)){for(n||(n=r.children.slice());i<n.length&&n[i]<s;)i+=3;n[i]==s?n[i+2]=n[i+2].addInner(e,a,c+1):n.splice(i,0,s,s+e.nodeSize,xo(a,e,c+1,go)),i+=3}});var s=Do(i?Co(t):t,-o);return new yo(s.length?this.local.concat(s).sort(Mo):this.local,n||this.children)},yo.prototype.remove=function(e){return 0==e.length||this==bo?this:this.removeInner(e,0)},yo.prototype.removeInner=function(e,t){for(var o=this.children,n=this.local,r=0;r<o.length;r+=3){for(var i=void 0,s=o[r]+t,a=o[r+1]+t,c=0,l=void 0;c<e.length;c++)(l=e[c])&&l.from>s&&l.to<a&&(e[c]=null,(i||(i=[])).push(l));if(i){o==this.children&&(o=this.children.slice());var d=o[r+2].removeInner(i,s+1);d!=bo?o[r+2]=d:(o.splice(r,3),r-=3)}}if(n.length)for(var f=0,h=void 0;f<e.length;f++)if(h=e[f])for(var p=0;p<n.length;p++)n[p].type.eq(h.type)&&(n==this.local&&(n=this.local.slice()),n.splice(p--,1));return o==this.children&&n==this.local?this:n.length||o.length?new yo(n,o):bo},yo.prototype.forChild=function(e,t){if(this==bo)return this;if(t.isLeaf)return yo.empty;for(var o,n,r=0;r<this.children.length;r+=3)if(this.children[r]>=e){this.children[r]==e&&(o=this.children[r+2]);break}for(var i=e+1,s=i+t.content.size,a=0;a<this.local.length;a++){var c=this.local[a];if(c.from<s&&c.to>i&&c.type instanceof ho){var l=Math.max(i,c.from)-i,d=Math.min(s,c.to)-i;l<d&&(n||(n=[])).push(c.copy(l,d))}}if(n){var f=new yo(n.sort(Mo));return o?new wo([f,o]):f}return o||bo},yo.prototype.eq=function(e){if(this==e)return!0;if(!(e instanceof yo)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(var t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(var o=0;o<this.children.length;o+=3)if(this.children[o]!=e.children[o]||this.children[o+1]!=e.children[o+1]||!this.children[o+2].eq(e.children[o+2]))return!1;return!0},yo.prototype.locals=function(e){return ko(this.localsInner(e))},yo.prototype.localsInner=function(e){if(this==bo)return vo;if(e.inlineContent||!this.local.some(ho.is))return this.local;for(var t=[],o=0;o<this.local.length;o++)this.local[o].type instanceof ho||t.push(this.local[o]);return t};var bo=new yo;yo.empty=bo,yo.removeOverlap=ko;var wo=function(e){this.members=e};function So(e,t,o,n,r,i,s){for(var a=e.slice(),c=function(e,t,o,n){for(var s=0;s<a.length;s+=3){var c=a[s+1],l=void 0;-1==c||e>c+i||(t>=a[s]+i?a[s+1]=-1:(l=n-o-(t-e)+(i-r))&&(a[s]+=l,a[s+1]+=l))}},l=0;l<o.maps.length;l++)o.maps[l].forEach(c);for(var d=!1,f=0;f<a.length;f+=3)if(-1==a[f+1]){var h=o.map(a[f]+i),p=h-r;if(p<0||p>=n.content.size){d=!0;continue}var u=o.map(e[f+1]+i,-1)-r,m=n.content.findIndex(p),v=m.index,g=m.offset,y=n.maybeChild(v);if(y&&g==p&&g+y.nodeSize==u){var b=a[f+2].mapInner(o,y,h+1,a[f]+i+1,s);b!=bo?(a[f]=p,a[f+1]=u,a[f+2]=b):(a[f+1]=-2,d=!0)}else d=!0}if(d){var w=xo(Oo(a,e,t||[],o,r,i,s),n,0,s);t=w.local;for(var S=0;S<a.length;S+=3)a[S+1]<0&&(a.splice(S,3),S-=3);for(var D=0,O=0;D<w.children.length;D+=3){for(var N=w.children[D];O<a.length&&a[O]<N;)O+=3;a.splice(O,0,w.children[D],w.children[D+1],w.children[D+2])}}return new yo(t&&t.sort(Mo),a)}function Do(e,t){if(!t||!e.length)return e;for(var o=[],n=0;n<e.length;n++){var r=e[n];o.push(new uo(r.from+t,r.to+t,r.type))}return o}function Oo(e,t,o,n,r,i,s){function a(e,t){for(var i=0;i<e.local.length;i++){var c=e.local[i].map(n,r,t);c?o.push(c):s.onRemove&&s.onRemove(e.local[i].spec)}for(var l=0;l<e.children.length;l+=3)a(e.children[l+2],e.children[l]+t+1)}for(var c=0;c<e.length;c+=3)-1==e[c+1]&&a(e[c+2],t[c]+i+1);return o}function No(e,t,o){if(t.isLeaf)return null;for(var n=o+t.nodeSize,r=null,i=0,s=void 0;i<e.length;i++)(s=e[i])&&s.from>o&&s.to<n&&((r||(r=[])).push(s),e[i]=null);return r}function Co(e){for(var t=[],o=0;o<e.length;o++)null!=e[o]&&t.push(e[o]);return t}function xo(e,t,o,n){var r=[],i=!1;t.forEach(function(t,s){var a=No(e,t,s+o);if(a){i=!0;var c=xo(a,t,o+s+1,n);c!=bo&&r.push(s,s+t.nodeSize,c)}});for(var s=Do(i?Co(e):e,-o).sort(Mo),a=0;a<s.length;a++)s[a].type.valid(t,s[a])||(n.onRemove&&n.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new yo(s,r):bo}function Mo(e,t){return e.from-t.from||e.to-t.to}function ko(e){for(var t=e,o=0;o<t.length-1;o++){var n=t[o];if(n.from!=n.to)for(var r=o+1;r<t.length;r++){var i=t[r];if(i.from!=n.from){i.from<n.to&&(t==e&&(t=e.slice()),t[o]=n.copy(n.from,i.from),To(t,r,n.copy(i.from,n.to)));break}i.to!=n.to&&(t==e&&(t=e.slice()),t[r]=i.copy(i.from,n.to),To(t,r+1,i.copy(n.to,i.to)))}}return t}function To(e,t,o){for(;t<e.length&&Mo(o,e[t])>0;)t++;e.splice(t,0,o)}function Ao(e){var t=[];return e.someProp("decorations",function(o){var n=o(e.state);n&&n!=bo&&t.push(n)}),e.cursorWrapper&&t.push(yo.create(e.state.doc,[e.cursorWrapper.deco])),wo.from(t)}wo.prototype.forChild=function(e,t){if(t.isLeaf)return yo.empty;for(var o=[],n=0;n<this.members.length;n++){var r=this.members[n].forChild(e,t);r!=bo&&(r instanceof wo?o=o.concat(r.members):o.push(r))}return wo.from(o)},wo.prototype.eq=function(e){if(!(e instanceof wo)||e.members.length!=this.members.length)return!1;for(var t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0},wo.prototype.locals=function(e){for(var t,o=!0,n=0;n<this.members.length;n++){var r=this.members[n].localsInner(e);if(r.length)if(t){o&&(t=t.slice(),o=!1);for(var i=0;i<r.length;i++)t.push(r[i])}else t=r}return t?ko(o?t:t.sort(Mo)):vo},wo.from=function(e){switch(e.length){case 0:return bo;case 1:return e[0];default:return new wo(e)}};var Po=function(e,t){this._props=t,this.state=t.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):e.apply?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Bo(this),this.markCursor=null,this.cursorWrapper=null,Ro(this),this.nodeViews=_o(this),this.docView=se(this.state.doc,Eo(this),Ao(this),this.dom,this),this.lastSelectedViewDesc=null,this.dragging=null,Pt(this),this.pluginViews=[],this.updatePluginViews()};exports.EditorView=Po;var Vo={props:{configurable:!0},root:{configurable:!0}};function Eo(e){var t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",function(o){if("function"==typeof o&&(o=o(e.state)),o)for(var n in o)"class"==n?t.class+=" "+o[n]:t[n]||"contenteditable"==n||"nodeName"==n||(t[n]=String(o[n]))}),[uo.node(0,e.state.doc.content.size,t)]}function Ro(e){var t=e.state.selection,o=t.$head,n=t.$anchor,r=t.visible;if(e.markCursor){var i=document.createElement("img");i.setAttribute("mark-placeholder","true"),e.cursorWrapper={dom:i,deco:uo.widget(o.pos,i,{raw:!0,marks:e.markCursor})}}else if(r||o.pos!=n.pos)e.cursorWrapper=null;else{var s;!e.cursorWrapper||e.cursorWrapper.dom.childNodes.length?((s=document.createElement("div")).style.position="absolute",s.style.left="-100000px"):e.cursorWrapper.deco.pos!=o.pos&&(s=e.cursorWrapper.dom),s&&(e.cursorWrapper={dom:s,deco:uo.widget(o.pos,s,{raw:!0})})}}function Bo(e){return!e.someProp("editable",function(t){return!1===t(e.state)})}function zo(e,t){var o=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(o)!=t.$anchor.start(o)}function _o(e){var t={};return e.someProp("nodeViews",function(e){for(var o in e)Object.prototype.hasOwnProperty.call(t,o)||(t[o]=e[o])}),t}function Lo(e,t){var o=0,n=0;for(var r in e){if(e[r]!=t[r])return!0;o++}for(var i in t)n++;return o!=n}function Fo(e){var t=e.getSelection(),o=t.focusOffset,n=t.focusNode;return n&&1==n.nodeType?[n,o,n.childNodes[o-1],n.childNodes[o]]:null}function Io(e,t){var o=Fo(t);if(!o||3==o[0].nodeType)return!1;for(var n=0;n<e.length;n++)if(o[n]!=e[n])return!0;return!1}Vo.props.get=function(){if(this._props.state!=this.state){var e=this._props;for(var t in this._props={},e)this._props[t]=e[t];this._props.state=this.state}return this._props},Po.prototype.update=function(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Rt(this),this._props=e,this.updateStateInner(e.state,!0)},Po.prototype.setProps=function(e){var t={};for(var o in this._props)t[o]=this._props[o];for(var n in t.state=this.state,e)t[n]=e[n];this.update(t)},Po.prototype.updateState=function(e){this.updateStateInner(e,this.state.plugins!=e.plugins)},Po.prototype.updateStateInner=function(t,o){var r=this,i=this.state,s=!1;if(this.state=t,o){var a=_o(this);Lo(a,this.nodeViews)&&(this.nodeViews=a,s=!0),Rt(this)}this.editable=Bo(this),Ro(this);var c=Ao(this),l=Eo(this),d=o?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",f=s||!this.docView.matchesNode(t.doc,l,c),h=f||!t.selection.eq(i.selection),p="preserve"==d&&h&&null==this.dom.style.overflowAnchor&&O(this);if(h){this.domObserver.stop();var u=f&&(n.ie||n.chrome)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&zo(i.selection,t.selection);if(f){var m=n.chrome&&Fo(this.root);!s&&this.docView.update(t.doc,l,c,this)||(this.docView.updateOuterDeco([]),this.docView.destroy(),this.docView=se(t.doc,l,c,this.dom,this)),m&&Io(m,this.root)&&(u=!0)}u||!(this.mouseDown&&this.domObserver.currentSelection.eq(this.root.getSelection())&&tt(this))?Ke(this,u):(Ye(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}if(this.updatePluginViews(i),"reset"==d)this.dom.scrollTop=0;else if("to selection"==d){var v=this.root.getSelection().focusNode;this.someProp("handleScrollToSelection",function(e){return e(r)})||(t.selection instanceof e.NodeSelection?D(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect(),v):D(this,this.coordsAtPos(t.selection.head),v))}else p&&C(p)},Po.prototype.destroyPluginViews=function(){for(var e;e=this.pluginViews.pop();)e.destroy&&e.destroy()},Po.prototype.updatePluginViews=function(e){if(e&&e.plugins==this.state.plugins)for(var t=0;t<this.pluginViews.length;t++){var o=this.pluginViews[t];o.update&&o.update(this,e)}else{this.destroyPluginViews();for(var n=0;n<this.state.plugins.length;n++){var r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}},Po.prototype.someProp=function(e,t){var o,n=this._props&&this._props[e];if(null!=n&&(o=t?t(n):n))return o;var r=this.state.plugins;if(r)for(var i=0;i<r.length;i++){var s=r[i].props[e];if(null!=s&&(o=t?t(s):s))return o}},Po.prototype.hasFocus=function(){return this.root.activeElement==this.dom},Po.prototype.focus=function(){this.domObserver.stop(),this.editable&&k(this.dom),Ke(this),this.domObserver.start()},Vo.root.get=function(){var e=this._root;if(null==e)for(var t=this.dom.parentNode;t;t=t.parentNode)if(9==t.nodeType||11==t.nodeType&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=function(){return document.getSelection()}),this._root=t;return e||document},Po.prototype.posAtCoords=function(e){return z(this,e)},Po.prototype.coordsAtPos=function(e){return L(this,e)},Po.prototype.domAtPos=function(e){return this.docView.domFromPos(e)},Po.prototype.nodeDOM=function(e){var t=this.docView.descAt(e);return t?t.nodeDOM:null},Po.prototype.posAtDOM=function(e,t,o){void 0===o&&(o=-1);var n=this.docView.posFromDOM(e,t,o);if(null==n)throw new RangeError("DOM position not inside the editor");return n},Po.prototype.endOfTextblock=function(e,t){return G(this,t||this.state,e)},Po.prototype.destroy=function(){this.docView&&(Et(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ao(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null)},Po.prototype.dispatchEvent=function(e){return _t(this,e)},Po.prototype.dispatch=function(e){var t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))},Object.defineProperties(Po.prototype,Vo);
},{"prosemirror-state":"vbBo","prosemirror-model":"cBJM","prosemirror-transform":"etvU"}],"tBN2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gapCursor=exports.GapCursor=void 0;var e=require("prosemirror-keymap"),r=require("prosemirror-state"),t=require("prosemirror-view"),o=require("prosemirror-model"),n=function(e){function r(r){e.call(this,r,r)}return e&&(r.__proto__=e),r.prototype=Object.create(e&&e.prototype),r.prototype.constructor=r,r.prototype.map=function(t,o){var n=t.resolve(o.map(this.head));return r.valid(n)?new r(n):e.near(n)},r.prototype.content=function(){return o.Slice.empty},r.prototype.eq=function(e){return e instanceof r&&e.head==this.head},r.prototype.toJSON=function(){return{type:"gapcursor",pos:this.head}},r.fromJSON=function(e,t){if("number"!=typeof t.pos)throw new RangeError("Invalid input for GapCursor.fromJSON");return new r(e.resolve(t.pos))},r.prototype.getBookmark=function(){return new i(this.anchor)},r.valid=function(e){var r=e.parent;if(r.isTextblock||!a(e)||!u(e))return!1;var t=r.type.spec.allowGapCursor;if(null!=t)return t;var o=r.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock},r.findFrom=function(e,t,o){if(!o&&r.valid(e))return e;for(var n=e.pos,i=null,a=e.depth;;a--){var u=e.node(a);if(t>0?e.indexAfter(a)<u.childCount:e.index(a)>0){i=u.maybeChild(t>0?e.indexAfter(a):e.index(a)-1);break}if(0==a)return null;n+=t;var s=e.doc.resolve(n);if(r.valid(s))return s}for(;i=t>0?i.firstChild:i.lastChild;){n+=t;var l=e.doc.resolve(n);if(r.valid(l))return l}return null},r}(r.Selection);exports.GapCursor=n,n.prototype.visible=!1,r.Selection.jsonID("gapcursor",n);var i=function(e){this.pos=e};function a(e){for(var r=e.depth;r>=0;r--){var t=e.index(r);if(0!=t)for(var o=e.node(r).child(t-1);;o=o.lastChild){if(0==o.childCount&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function u(e){for(var r=e.depth;r>=0;r--){var t=e.indexAfter(r),o=e.node(r);if(t!=o.childCount)for(var n=o.child(t);;n=n.firstChild){if(0==n.childCount&&!n.inlineContent||n.isAtom||n.type.spec.isolating)return!0;if(n.inlineContent)return!1}}return!0}i.prototype.map=function(e){return new i(e.map(this.pos))},i.prototype.resolve=function(e){var t=e.resolve(this.pos);return n.valid(t)?new n(t):r.Selection.near(t)};var s=function(){return new r.Plugin({props:{decorations:f,createSelectionBetween:function(e,r,t){if(r.pos==t.pos&&n.valid(t))return new n(t)},handleClick:p,handleKeyDown:l}})};exports.gapCursor=s;var l=(0,e.keydownHandler)({ArrowLeft:c("horiz",-1),ArrowRight:c("horiz",1),ArrowUp:c("vert",-1),ArrowDown:c("vert",1)});function c(e,t){var o="vert"==e?t>0?"down":"up":t>0?"right":"left";return function(e,i,a){var u=e.selection,s=t>0?u.$to:u.$from,l=u.empty;if(u instanceof r.TextSelection){if(!a.endOfTextblock(o))return!1;l=!1,s=e.doc.resolve(t>0?s.after():s.before())}var c=n.findFrom(s,t,l);return!!c&&(i&&i(e.tr.setSelection(new n(c))),!0)}}function p(e,t,o){if(!e.editable)return!1;var i=e.state.doc.resolve(t);if(!n.valid(i))return!1;var a=e.posAtCoords({left:o.clientX,top:o.clientY}).inside;return!(a>-1&&r.NodeSelection.isSelectable(e.state.doc.nodeAt(a)))&&(e.dispatch(e.state.tr.setSelection(new n(i))),!0)}function f(e){if(!(e.selection instanceof n))return null;var r=document.createElement("div");return r.className="ProseMirror-gapcursor",t.DecorationSet.create(e.doc,[t.Decoration.widget(e.selection.head,r,{key:"gapcursor"})])}
},{"prosemirror-keymap":"mh0X","prosemirror-state":"vbBo","prosemirror-view":"VJHr","prosemirror-model":"cBJM"}],"JHGC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.autoJoin=T,exports.chainCommands=V,exports.createParagraphNear=x,exports.deleteSelection=n,exports.exitCode=m,exports.joinBackward=o,exports.joinDown=d,exports.joinForward=l,exports.joinUp=f,exports.lift=u,exports.liftEmptyBlock=h,exports.newlineInCode=v,exports.selectAll=y,exports.selectNodeBackward=a,exports.selectNodeForward=s,exports.selectParentNode=k,exports.setBlockType=M,exports.splitBlock=S,exports.splitBlockKeepMarks=g,exports.toggleMark=A,exports.wrapIn=I,exports.pcBaseKeymap=exports.macBaseKeymap=exports.baseKeymap=void 0;var e=require("prosemirror-transform"),t=require("prosemirror-model"),r=require("prosemirror-state");function n(e,t){return!e.selection.empty&&(t&&t(e.tr.deleteSelection().scrollIntoView()),!0)}function o(t,n,o){var a=t.selection.$cursor;if(!a||(o?!o.endOfTextblock("backward",t):a.parentOffset>0))return!1;var l=c(a);if(!l){var s=a.blockRange(),p=s&&(0,e.liftTarget)(s);return null!=p&&(n&&n(t.tr.lift(s,p).scrollIntoView()),!0)}var f=l.nodeBefore;if(!f.type.spec.isolating&&b(t,l,n))return!0;if(0==a.parent.content.size&&(i(f,"end")||r.NodeSelection.isSelectable(f))){if(n){var d=t.tr.deleteRange(a.before(),a.after());d.setSelection(i(f,"end")?r.Selection.findFrom(d.doc.resolve(d.mapping.map(l.pos,-1)),-1):r.NodeSelection.create(d.doc,l.pos-f.nodeSize)),n(d.scrollIntoView())}return!0}return!(!f.isAtom||l.depth!=a.depth-1)&&(n&&n(t.tr.delete(l.pos-f.nodeSize,l.pos).scrollIntoView()),!0)}function i(e,t){for(;e;e="start"==t?e.firstChild:e.lastChild)if(e.isTextblock)return!0;return!1}function a(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("backward",e):o.parentOffset>0))return!1;var i=c(o),a=i&&i.nodeBefore;return!(!a||!r.NodeSelection.isSelectable(a))&&(t&&t(e.tr.setSelection(r.NodeSelection.create(e.doc,i.pos-a.nodeSize)).scrollIntoView()),!0)}function c(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function l(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var a=p(o);if(!a)return!1;var c=a.nodeAfter;if(b(e,a,t))return!0;if(0==o.parent.content.size&&(i(c,"start")||r.NodeSelection.isSelectable(c))){if(t){var l=e.tr.deleteRange(o.before(),o.after());l.setSelection(i(c,"start")?r.Selection.findFrom(l.doc.resolve(l.mapping.map(a.pos)),1):r.NodeSelection.create(l.doc,l.mapping.map(a.pos))),t(l.scrollIntoView())}return!0}return!(!c.isAtom||a.depth!=o.depth-1)&&(t&&t(e.tr.delete(a.pos,a.pos+c.nodeSize).scrollIntoView()),!0)}function s(e,t,n){var o=e.selection.$cursor;if(!o||(n?!n.endOfTextblock("forward",e):o.parentOffset<o.parent.content.size))return!1;var i=p(o),a=i&&i.nodeAfter;return!(!a||!r.NodeSelection.isSelectable(a))&&(t&&t(e.tr.setSelection(r.NodeSelection.create(e.doc,i.pos)).scrollIntoView()),!0)}function p(e){if(!e.parent.type.spec.isolating)for(var t=e.depth-1;t>=0;t--){var r=e.node(t);if(e.index(t)+1<r.childCount)return e.doc.resolve(e.after(t+1));if(r.type.spec.isolating)break}return null}function f(t,n){var o,i=t.selection,a=i instanceof r.NodeSelection;if(a){if(i.node.isTextblock||!(0,e.canJoin)(t.doc,i.from))return!1;o=i.from}else if(null==(o=(0,e.joinPoint)(t.doc,i.from,-1)))return!1;if(n){var c=t.tr.join(o);a&&c.setSelection(r.NodeSelection.create(c.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),n(c.scrollIntoView())}return!0}function d(t,n){var o,i=t.selection;if(i instanceof r.NodeSelection){if(i.node.isTextblock||!(0,e.canJoin)(t.doc,i.to))return!1;o=i.to}else if(null==(o=(0,e.joinPoint)(t.doc,i.to,1)))return!1;return n&&n(t.tr.join(o).scrollIntoView()),!0}function u(t,r){var n=t.selection,o=n.$from,i=n.$to,a=o.blockRange(i),c=a&&(0,e.liftTarget)(a);return null!=c&&(r&&r(t.tr.lift(a,c).scrollIntoView()),!0)}function v(e,t){var r=e.selection,n=r.$head,o=r.$anchor;return!(!n.parent.type.spec.code||!n.sameParent(o))&&(t&&t(e.tr.insertText("\n").scrollIntoView()),!0)}function m(e,t){var n=e.selection,o=n.$head,i=n.$anchor;if(!o.parent.type.spec.code||!o.sameParent(i))return!1;var a=o.node(-1),c=o.indexAfter(-1),l=a.contentMatchAt(c).defaultType;if(!a.canReplaceWith(c,c,l))return!1;if(t){var s=o.after(),p=e.tr.replaceWith(s,s,l.createAndFill());p.setSelection(r.Selection.near(p.doc.resolve(s),1)),t(p.scrollIntoView())}return!0}function x(e,t){var n=e.selection,o=n.$from,i=n.$to;if(o.parent.inlineContent||i.parent.inlineContent)return!1;var a=o.parent.contentMatchAt(i.indexAfter()).defaultType;if(!a||!a.isTextblock)return!1;if(t){var c=(!o.parentOffset&&i.index()<i.parent.childCount?o:i).pos,l=e.tr.insert(c,a.createAndFill());l.setSelection(r.TextSelection.create(l.doc,c+1)),t(l.scrollIntoView())}return!0}function h(t,r){var n=t.selection.$cursor;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){var o=n.before();if((0,e.canSplit)(t.doc,o))return r&&r(t.tr.split(o).scrollIntoView()),!0}var i=n.blockRange(),a=i&&(0,e.liftTarget)(i);return null!=a&&(r&&r(t.tr.lift(i,a).scrollIntoView()),!0)}function S(n,o){var i=n.selection,a=i.$from,c=i.$to;if(n.selection instanceof r.NodeSelection&&n.selection.node.isBlock)return!(!a.parentOffset||!(0,e.canSplit)(n.doc,a.pos))&&(o&&o(n.tr.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;if(o){var l=c.parentOffset==c.parent.content.size,s=n.tr;n.selection instanceof r.TextSelection&&s.deleteSelection();var p=0==a.depth?null:a.node(-1).contentMatchAt(a.indexAfter(-1)).defaultType,f=l&&p?[{type:p}]:null,d=(0,e.canSplit)(s.doc,s.mapping.map(a.pos),1,f);f||d||!(0,e.canSplit)(s.doc,s.mapping.map(a.pos),1,p&&[{type:p}])||(f=[{type:p}],d=!0),d&&(s.split(s.mapping.map(a.pos),1,f),l||a.parentOffset||a.parent.type==p||!a.node(-1).canReplace(a.index(-1),a.indexAfter(-1),t.Fragment.from(p.create(),a.parent))||s.setNodeMarkup(s.mapping.map(a.before()),p)),o(s.scrollIntoView())}return!0}function g(e,t){return S(e,t&&function(r){var n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();n&&r.ensureMarks(n),t(r)})}function k(e,t){var n,o=e.selection,i=o.$from,a=o.to,c=i.sharedDepth(a);return 0!=c&&(n=i.before(c),t&&t(e.tr.setSelection(r.NodeSelection.create(e.doc,n))),!0)}function y(e,t){return t&&t(e.tr.setSelection(new r.AllSelection(e.doc))),!0}function w(t,r,n){var o=r.nodeBefore,i=r.nodeAfter,a=r.index();return!!(o&&i&&o.type.compatibleContent(i.type))&&(!o.content.size&&r.parent.canReplace(a-1,a)?(n&&n(t.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!(!r.parent.canReplace(a,a+1)||!i.isTextblock&&!(0,e.canJoin)(t.doc,r.pos))&&(n&&n(t.tr.clearIncompatible(r.pos,o.type,o.contentMatchAt(o.childCount)).join(r.pos).scrollIntoView()),!0))}function b(n,o,i){var a,c,l=o.nodeBefore,s=o.nodeAfter;if(l.type.spec.isolating||s.type.spec.isolating)return!1;if(w(n,o,i))return!0;if(o.parent.canReplace(o.index(),o.index()+1)&&(a=(c=l.contentMatchAt(l.childCount)).findWrapping(s.type))&&c.matchType(a[0]||s.type).validEnd){if(i){for(var p=o.pos+s.nodeSize,f=t.Fragment.empty,d=a.length-1;d>=0;d--)f=t.Fragment.from(a[d].create(null,f));f=t.Fragment.from(l.copy(f));var u=n.tr.step(new e.ReplaceAroundStep(o.pos-1,p,o.pos,p,new t.Slice(f,1,0),a.length,!0)),v=p+2*a.length;(0,e.canJoin)(u.doc,v)&&u.join(v),i(u.scrollIntoView())}return!0}var m=r.Selection.findFrom(o,1),x=m&&m.$from.blockRange(m.$to),h=x&&(0,e.liftTarget)(x);return null!=h&&h>=o.depth&&(i&&i(n.tr.lift(x,h).scrollIntoView()),!0)}function I(t,r){return function(n,o){var i=n.selection,a=i.$from,c=i.$to,l=a.blockRange(c),s=l&&(0,e.findWrapping)(l,t,r);return!!s&&(o&&o(n.tr.wrap(l,s).scrollIntoView()),!0)}}function M(e,t){return function(r,n){var o=r.selection,i=o.from,a=o.to,c=!1;return r.doc.nodesBetween(i,a,function(n,o){if(c)return!1;if(n.isTextblock&&!n.hasMarkup(e,t))if(n.type==e)c=!0;else{var i=r.doc.resolve(o),a=i.index();c=i.parent.canReplaceWith(a,a+1,e)}}),!!c&&(n&&n(r.tr.setBlockType(i,a,e,t).scrollIntoView()),!0)}}function $(e,t,r){for(var n=function(n){var o=t[n],i=o.$from,a=o.$to,c=0==i.depth&&e.type.allowsMarkType(r);if(e.nodesBetween(i.pos,a.pos,function(e){if(c)return!1;c=e.inlineContent&&e.type.allowsMarkType(r)}),c)return{v:!0}},o=0;o<t.length;o++){var i=n(o);if(i)return i.v}return!1}function A(e,t){return function(r,n){var o=r.selection,i=o.empty,a=o.$cursor,c=o.ranges;if(i&&!a||!$(r.doc,c,e))return!1;if(n)if(a)e.isInSet(r.storedMarks||a.marks())?n(r.tr.removeStoredMark(e)):n(r.tr.addStoredMark(e.create(t)));else{for(var l=!1,s=r.tr,p=0;!l&&p<c.length;p++){var f=c[p],d=f.$from,u=f.$to;l=r.doc.rangeHasMark(d.pos,u.pos,e)}for(var v=0;v<c.length;v++){var m=c[v],x=m.$from,h=m.$to;l?s.removeMark(x.pos,h.pos,e):s.addMark(x.pos,h.pos,e.create(t))}n(s.scrollIntoView())}return!0}}function B(t,r){return function(n){if(!n.isGeneric)return t(n);for(var o=[],i=0;i<n.mapping.maps.length;i++){for(var a=n.mapping.maps[i],c=0;c<o.length;c++)o[c]=a.map(o[c]);a.forEach(function(e,t,r,n){return o.push(r,n)})}for(var l=[],s=0;s<o.length;s+=2)for(var p=o[s],f=o[s+1],d=n.doc.resolve(p),u=d.sharedDepth(f),v=d.node(u),m=d.indexAfter(u),x=d.after(u+1);x<=f;++m){var h=v.maybeChild(m);if(!h)break;if(m&&-1==l.indexOf(x)){var S=v.child(m-1);S.type==h.type&&r(S,h)&&l.push(x)}x+=h.nodeSize}l.sort(function(e,t){return e-t});for(var g=l.length-1;g>=0;g--)(0,e.canJoin)(n.doc,l[g])&&n.join(l[g]);t(n)}}function T(e,t){if(Array.isArray(t)){var r=t;t=function(e){return r.indexOf(e.type.name)>-1}}return function(r,n){return e(r,n&&B(n,t))}}function V(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return function(t,r,n){for(var o=0;o<e.length;o++)if(e[o](t,r,n))return!0;return!1}}var N=V(n,o,a),C=V(n,l,s),O={Enter:V(v,x,h,S),"Mod-Enter":m,Backspace:N,"Mod-Backspace":N,Delete:C,"Mod-Delete":C,"Mod-a":y};exports.pcBaseKeymap=O;var z={"Ctrl-h":O.Backspace,"Alt-Backspace":O["Mod-Backspace"],"Ctrl-d":O.Delete,"Ctrl-Alt-Backspace":O["Mod-Delete"],"Alt-Delete":O["Mod-Delete"],"Alt-d":O["Mod-Delete"]};for(var R in exports.macBaseKeymap=z,O)z[R]=O[R];var j="undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform(),F=j?z:O;exports.baseKeymap=F;
},{"prosemirror-transform":"etvU","prosemirror-model":"cBJM","prosemirror-state":"vbBo"}],"OOLA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.inputRules=s,exports.textblockTypeInputRule=h,exports.undoInputRule=i,exports.wrappingInputRule=d,exports.smartQuotes=exports.openSingleQuote=exports.openDoubleQuote=exports.emDash=exports.ellipsis=exports.closeSingleQuote=exports.closeDoubleQuote=exports.InputRule=void 0;var e=require("prosemirror-state"),t=require("prosemirror-transform"),r=function(e,t){this.match=e,this.handler="string"==typeof t?n(t):t};function n(e){return function(t,r,n,o){var s=e;if(r[1]){var u=r[0].lastIndexOf(r[1]);s+=r[0].slice(u+r[1].length);var i=(n+=u)-o;i>0&&(s=r[0].slice(u-i,u)+s,n=o)}return t.tr.insertText(s,n,o)}}exports.InputRule=r;var o=500;function s(t){var r=t.rules,n=new e.Plugin({state:{init:function(){return null},apply:function(e,t){var r=e.getMeta(this);return r||(e.selectionSet||e.docChanged?null:t)}},props:{handleTextInput:function(e,t,o,s){return u(e,t,o,s,r,n)},handleDOMEvents:{compositionend:function(e){setTimeout(function(){var t=e.state.selection.$cursor;t&&u(e,t.pos,t.pos,"",r,n)})}}},isInputRules:!0});return n}function u(e,t,r,n,s,u){if(e.composing)return!1;var i=e.state,p=i.doc.resolve(t);if(p.parent.type.spec.code)return!1;for(var a=p.parent.textBetween(Math.max(0,p.parentOffset-o),p.parentOffset,null,"￼")+n,l=0;l<s.length;l++){var c=s[l].match.exec(a),f=c&&s[l].handler(i,c,t-(c[0].length-n.length),r);if(f)return e.dispatch(f.setMeta(u,{transform:f,from:t,to:r,text:n})),!0}return!1}function i(e,t){for(var r=e.plugins,n=0;n<r.length;n++){var o=r[n],s=void 0;if(o.spec.isInputRules&&(s=o.getState(e))){if(t){for(var u=e.tr,i=s.transform,p=i.steps.length-1;p>=0;p--)u.step(i.steps[p].invert(i.docs[p]));var a=u.doc.resolve(s.from).marks();t(u.replaceWith(s.from,s.to,e.schema.text(s.text,a)))}return!0}}return!1}var p=new r(/--$/,"—");exports.emDash=p;var a=new r(/\.\.\.$/,"…");exports.ellipsis=a;var l=new r(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"“");exports.openDoubleQuote=l;var c=new r(/"$/,"”");exports.closeDoubleQuote=c;var f=new r(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"‘");exports.openSingleQuote=f;var v=new r(/'$/,"’");exports.closeSingleQuote=v;var x=[l,c,f,v];function d(e,n,o,s){return new r(e,function(e,r,u,i){var p=o instanceof Function?o(r):o,a=e.tr.delete(u,i),l=a.doc.resolve(u).blockRange(),c=l&&(0,t.findWrapping)(l,n,p);if(!c)return null;a.wrap(l,c);var f=a.doc.resolve(u-1).nodeBefore;return f&&f.type==n&&(0,t.canJoin)(a.doc,u-1)&&(!s||s(r,f))&&a.join(u-1),a})}function h(e,t,n){return new r(e,function(e,r,o,s){var u=e.doc.resolve(o),i=n instanceof Function?n(r):n;return u.node(-1).canReplaceWith(u.index(-1),u.indexAfter(-1),t)?e.tr.delete(o,s).setBlockType(o,o,t,i):null})}exports.smartQuotes=x;
},{"prosemirror-state":"vbBo","prosemirror-transform":"etvU"}],"Tinf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__clipCells=X,exports.__insertCells=U,exports.__pastedCells=P,exports.addColumn=ue,exports.addColumnAfter=ve,exports.addColumnBefore=fe,exports.addRow=Ce,exports.addRowAfter=ye,exports.addRowBefore=be,exports.cellAround=g,exports.colCount=R,exports.columnResizing=Pe,exports.deleteColumn=we,exports.deleteRow=xe,exports.deleteTable=Le,exports.findCell=M,exports.fixTables=ce,exports.goToNextCell=Oe,exports.handlePaste=re,exports.inSameTable=$,exports.isInTable=b,exports.mergeCells=Me,exports.moveCellForward=A,exports.nextCell=z,exports.removeColumn=me,exports.removeRow=Se,exports.rowIsHeader=ge,exports.selectedRect=de,exports.selectionCell=y,exports.setCellAttr=Ne,exports.splitCell=Re,exports.splitCellWithType=ze,exports.tableEditing=rt,exports.tableNodes=W,exports.toggleHeader=ke,exports.updateColumnsOnResize=We,exports.toggleHeaderRow=exports.toggleHeaderColumn=exports.toggleHeaderCell=exports.tableEditingKey=exports.fixTablesKey=exports.columnResizingPluginKey=exports.TableMap=exports.CellSelection=void 0;var e,t,r=require("prosemirror-state"),o=require("prosemirror-model"),n=require("prosemirror-keymap"),a=require("prosemirror-view"),l=require("prosemirror-transform");if("undefined"!=typeof WeakMap){var i=new WeakMap;e=function(e){return i.get(e)},t=function(e,t){return i.set(e,t),t}}else{var s=[],c=10,p=0;e=function(e){for(var t=0;t<s.length;t+=2)if(s[t]==e)return s[t+1]},t=function(e,t){return p==c&&(p=0),s[p++]=e,s[p++]=t}}var d=function(e,t,r,o){this.left=e,this.top=t,this.right=r,this.bottom=o},h=function(e,t,r,o){this.width=e,this.height=t,this.map=r,this.problems=o};function u(e){if("table"!=e.type.spec.tableRole)throw new RangeError("Not a table node: "+e.type.name);for(var t=f(e),r=e.childCount,o=[],n=0,a=null,l=[],i=0,s=t*r;i<s;i++)o[i]=0;for(var c=0,p=0;c<r;c++){var d=e.child(c);p++;for(var u=0;;u++){for(;n<o.length&&0!=o[n];)n++;if(u==d.childCount)break;for(var m=d.child(u),w=m.attrs,g=w.colspan,C=w.rowspan,b=w.colwidth,y=0;y<C;y++){if(y+c>=r){(a||(a=[])).push({type:"overlong_rowspan",pos:p,n:C-y});break}for(var S=n+y*t,x=0;x<g;x++){0==o[S+x]?o[S+x]=p:(a||(a=[])).push({type:"collision",row:c,pos:p,n:g-x});var A=b&&b[x];if(A){var $=(S+x)%t*2,M=l[$];null==M||M!=A&&1==l[$+1]?(l[$]=A,l[$+1]=1):M==A&&l[$+1]++}}}n+=g,p+=m.nodeSize}for(var R=(c+1)*t,z=0;n<R;)0==o[n++]&&z++;z&&(a||(a=[])).push({type:"missing",row:c,n:z}),p++}for(var N=new h(t,r,o,a),_=!1,D=0;!_&&D<l.length;D+=2)null!=l[D]&&l[D+1]<r&&(_=!0);return _&&v(N,l,e),N}function f(e){for(var t=-1,r=!1,o=0;o<e.childCount;o++){var n=e.child(o),a=0;if(r)for(var l=0;l<o;l++)for(var i=e.child(l),s=0;s<i.childCount;s++){var c=i.child(s);l+c.attrs.rowspan>o&&(a+=c.attrs.colspan)}for(var p=0;p<n.childCount;p++){var d=n.child(p);a+=d.attrs.colspan,d.attrs.rowspan>1&&(r=!0)}-1==t?t=a:t!=a&&(t=Math.max(t,a))}return t}function v(e,t,r){e.problems||(e.problems=[]);for(var o=0,n={};o<e.map.length;o++){var a=e.map[o];if(!n[a]){n[a]=!0;for(var l=r.nodeAt(a),i=null,s=0;s<l.attrs.colspan;s++){var c=t[2*((o+s)%e.width)];null==c||l.attrs.colwidth&&l.attrs.colwidth[s]==c||((i||(i=m(l.attrs)))[s]=c)}i&&e.problems.unshift({type:"colwidth mismatch",pos:a,colwidth:i})}}}function m(e){if(e.colwidth)return e.colwidth.slice();for(var t=[],r=0;r<e.colspan;r++)t.push(0);return t}exports.TableMap=h,h.prototype.findCell=function(e){for(var t=0;t<this.map.length;t++){var r=this.map[t];if(r==e){for(var o=t%this.width,n=t/this.width|0,a=o+1,l=n+1,i=1;a<this.width&&this.map[t+i]==r;i++)a++;for(var s=1;l<this.height&&this.map[t+this.width*s]==r;s++)l++;return new d(o,n,a,l)}}throw new RangeError("No cell with offset "+e+" found")},h.prototype.colCount=function(e){for(var t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError("No cell with offset "+e+" found")},h.prototype.nextCell=function(e,t,r){var o=this.findCell(e),n=o.left,a=o.right,l=o.top,i=o.bottom;return"horiz"==t?(r<0?0==n:a==this.width)?null:this.map[l*this.width+(r<0?n-1:a)]:(r<0?0==l:i==this.height)?null:this.map[n+this.width*(r<0?l-1:i)]},h.prototype.rectBetween=function(e,t){var r=this.findCell(e),o=r.left,n=r.right,a=r.top,l=r.bottom,i=this.findCell(t),s=i.left,c=i.right,p=i.top,h=i.bottom;return new d(Math.min(o,s),Math.min(a,p),Math.max(n,c),Math.max(l,h))},h.prototype.cellsInRect=function(e){for(var t=[],r={},o=e.top;o<e.bottom;o++)for(var n=e.left;n<e.right;n++){var a=o*this.width+n,l=this.map[a];r[l]||(r[l]=!0,n==e.left&&n&&this.map[a-1]==l||o==e.top&&o&&this.map[a-this.width]==l||t.push(l))}return t},h.prototype.positionAt=function(e,t,r){for(var o=0,n=0;;o++){var a=n+r.child(o).nodeSize;if(o==e){for(var l=t+e*this.width,i=(e+1)*this.width;l<i&&this.map[l]<n;)l++;return l==i?a-1:this.map[l]}n=a}},h.get=function(r){return e(r)||t(r,u(r))};var w=new r.PluginKey("selectingCells");function g(e){for(var t=e.depth-1;t>0;t--)if("row"==e.node(t).type.spec.tableRole)return e.node(0).resolve(e.before(t+1));return null}function C(e){for(var t=e.depth;t>0;t--){var r=e.node(t).type.spec.tableRole;if("cell"===r||"header_cell"===r)return e.node(t)}return null}function b(e){for(var t=e.selection.$head,r=t.depth;r>0;r--)if("row"==t.node(r).type.spec.tableRole)return!0;return!1}function y(e){var t=e.selection;return t.$anchorCell?t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell:t.node&&"cell"==t.node.type.spec.tableRole?t.$anchor:g(t.$head)||S(t.$head)}function S(e){for(var t=e.nodeAfter,r=e.pos;t;t=t.firstChild,r++){var o=t.type.spec.tableRole;if("cell"==o||"header_cell"==o)return e.doc.resolve(r)}for(var n=e.nodeBefore,a=e.pos;n;n=n.lastChild,a--){var l=n.type.spec.tableRole;if("cell"==l||"header_cell"==l)return e.doc.resolve(a-n.nodeSize)}}function x(e){return"row"==e.parent.type.spec.tableRole&&e.nodeAfter}function A(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function $(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function M(e){return h.get(e.node(-1)).findCell(e.pos-e.start(-1))}function R(e){return h.get(e.node(-1)).colCount(e.pos-e.start(-1))}function z(e,t,r){var o=e.start(-1),n=h.get(e.node(-1)).nextCell(e.pos-o,t,r);return null==n?null:e.node(0).resolve(o+n)}function N(e,t,r){var o={};for(var n in e)o[n]=e[n];return o[t]=r,o}function _(e,t,r){void 0===r&&(r=1);var o=N(e,"colspan",e.colspan-r);return o.colwidth&&(o.colwidth=o.colwidth.slice(),o.colwidth.splice(t,r),o.colwidth.some(function(e){return e>0})||(o.colwidth=null)),o}function D(e,t,r){void 0===r&&(r=1);var o=N(e,"colspan",e.colspan+r);if(o.colwidth){o.colwidth=o.colwidth.slice();for(var n=0;n<r;n++)o.colwidth.splice(t,0,0)}return o}exports.tableEditingKey=w;var k=function(e){function t(t,o){void 0===o&&(o=t);var n=t.node(-1),a=h.get(n),l=t.start(-1),i=a.rectBetween(t.pos-l,o.pos-l),s=t.node(0),c=a.cellsInRect(i).filter(function(e){return e!=o.pos-l});c.unshift(o.pos-l);var p=c.map(function(e){var t=n.nodeAt(e),o=e+l+1;return new r.SelectionRange(s.resolve(o),s.resolve(o+t.content.size))});e.call(this,p[0].$from,p[0].$to,p),this.$anchorCell=t,this.$headCell=o}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.map=function(e,o){var n=e.resolve(o.map(this.$anchorCell.pos)),a=e.resolve(o.map(this.$headCell.pos));if(x(n)&&x(a)&&$(n,a)){var l=this.$anchorCell.node(-1)!=n.node(-1);return l&&this.isRowSelection()?t.rowSelection(n,a):l&&this.isColSelection()?t.colSelection(n,a):new t(n,a)}return r.TextSelection.between(n,a)},t.prototype.content=function(){for(var e=this.$anchorCell.node(-1),t=h.get(e),r=this.$anchorCell.start(-1),n=t.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r),a={},l=[],i=n.top;i<n.bottom;i++){for(var s=[],c=i*t.width+n.left,p=n.left;p<n.right;p++,c++){var d=t.map[c];if(!a[d]){a[d]=!0;var u=t.findCell(d),f=e.nodeAt(d),v=n.left-u.left,m=u.right-n.right;if(v>0||m>0){var w=f.attrs;v>0&&(w=_(w,0,v)),m>0&&(w=_(w,w.colspan-m,m)),f=u.left<n.left?f.type.createAndFill(w):f.type.create(w,f.content)}if(u.top<n.top||u.bottom>n.bottom){var g=N(f.attrs,"rowspan",Math.min(u.bottom,n.bottom)-Math.max(u.top,n.top));f=u.top<n.top?f.type.createAndFill(g):f.type.create(g,f.content)}s.push(f)}}l.push(e.child(i).copy(o.Fragment.from(s)))}var C=this.isColSelection()&&this.isRowSelection()?e:l;return new o.Slice(o.Fragment.from(C),1,1)},t.prototype.replace=function(t,r){void 0===r&&(r=o.Slice.empty);for(var n=t.steps.length,a=this.ranges,l=0;l<a.length;l++){var i=a[l],s=i.$from,c=i.$to,p=t.mapping.slice(n);t.replace(p.map(s.pos),p.map(c.pos),l?o.Slice.empty:r)}var d=e.findFrom(t.doc.resolve(t.mapping.slice(n).map(this.to)),-1);d&&t.setSelection(d)},t.prototype.replaceWith=function(e,t){this.replace(e,new o.Slice(o.Fragment.from(t),0,0))},t.prototype.forEachCell=function(e){for(var t=this.$anchorCell.node(-1),r=h.get(t),o=this.$anchorCell.start(-1),n=r.cellsInRect(r.rectBetween(this.$anchorCell.pos-o,this.$headCell.pos-o)),a=0;a<n.length;a++)e(t.nodeAt(n[a]),o+n[a])},t.prototype.isColSelection=function(){var e=this.$anchorCell.index(-1),t=this.$headCell.index(-1);if(Math.min(e,t)>0)return!1;var r=e+this.$anchorCell.nodeAfter.attrs.rowspan,o=t+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(r,o)==this.$headCell.node(-1).childCount},t.colSelection=function(e,r){void 0===r&&(r=e);var o=h.get(e.node(-1)),n=e.start(-1),a=o.findCell(e.pos-n),l=o.findCell(r.pos-n),i=e.node(0);return a.top<=l.top?(a.top>0&&(e=i.resolve(n+o.map[a.left])),l.bottom<o.height&&(r=i.resolve(n+o.map[o.width*(o.height-1)+l.right-1]))):(l.top>0&&(r=i.resolve(n+o.map[l.left])),a.bottom<o.height&&(e=i.resolve(n+o.map[o.width*(o.height-1)+a.right-1]))),new t(e,r)},t.prototype.isRowSelection=function(){var e=h.get(this.$anchorCell.node(-1)),t=this.$anchorCell.start(-1),r=e.colCount(this.$anchorCell.pos-t),o=e.colCount(this.$headCell.pos-t);if(Math.min(r,o)>0)return!1;var n=r+this.$anchorCell.nodeAfter.attrs.colspan,a=o+this.$headCell.nodeAfter.attrs.colspan;return Math.max(n,a)==e.width},t.prototype.eq=function(e){return e instanceof t&&e.$anchorCell.pos==this.$anchorCell.pos&&e.$headCell.pos==this.$headCell.pos},t.rowSelection=function(e,r){void 0===r&&(r=e);var o=h.get(e.node(-1)),n=e.start(-1),a=o.findCell(e.pos-n),l=o.findCell(r.pos-n),i=e.node(0);return a.left<=l.left?(a.left>0&&(e=i.resolve(n+o.map[a.top*o.width])),l.right<o.width&&(r=i.resolve(n+o.map[o.width*(l.top+1)-1]))):(l.left>0&&(r=i.resolve(n+o.map[l.top*o.width])),a.right<o.width&&(e=i.resolve(n+o.map[o.width*(a.top+1)-1]))),new t(e,r)},t.prototype.toJSON=function(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}},t.fromJSON=function(e,r){return new t(e.resolve(r.anchor),e.resolve(r.head))},t.create=function(e,r,o){return void 0===o&&(o=r),new t(e.resolve(r),e.resolve(o))},t.prototype.getBookmark=function(){return new E(this.$anchorCell.pos,this.$headCell.pos)},t}(r.Selection);exports.CellSelection=k,k.prototype.visible=!1,r.Selection.jsonID("cell",k);var E=function(e,t){this.anchor=e,this.head=t};function T(e){if(!(e.selection instanceof k))return null;var t=[];return e.selection.forEachCell(function(e,r){t.push(a.Decoration.node(r,r+e.nodeSize,{class:"selectedCell"}))}),a.DecorationSet.create(e.doc,t)}function F(e){var t=e.$from,r=e.$to;if(t.pos==r.pos||t.pos<t.pos-6)return!1;for(var o=t.pos,n=r.pos,a=t.depth;a>=0&&!(t.after(a+1)<t.end(a));a--,o++);for(var l=r.depth;l>=0&&!(r.before(l+1)>r.start(l));l--,n--);return o==n&&/row|table/.test(t.node(a).type.spec.tableRole)}function H(e){for(var t,r,o=e.$from,n=e.$to,a=o.depth;a>0;a--){var l=o.node(a);if("cell"===l.type.spec.tableRole||"header_cell"===l.type.spec.tableRole){t=l;break}}for(var i=n.depth;i>0;i--){var s=n.node(i);if("cell"===s.type.spec.tableRole||"header_cell"===s.type.spec.tableRole){r=s;break}}return t!==r&&0===n.parentOffset}function O(e,t,o){var n,a,l=(t||e).selection,i=(t||e).doc;if(l instanceof r.NodeSelection&&(a=l.node.type.spec.tableRole)){if("cell"==a||"header_cell"==a)n=k.create(i,l.from);else if("row"==a){var s=i.resolve(l.from+1);n=k.rowSelection(s,s)}else if(!o){var c=h.get(l.node),p=l.from+1,d=p+c.map[c.width*c.height-1];n=k.create(i,p+1,d)}}else l instanceof r.TextSelection&&F(l)?n=r.TextSelection.create(i,l.from):l instanceof r.TextSelection&&H(l)&&(n=r.TextSelection.create(i,l.$from.start(),l.$from.end()));return n&&(t||(t=e.tr)).setSelection(n),t}function L(e,t){var r=e.getAttribute("data-colwidth"),o=r&&/^\d+(,\d+)*$/.test(r)?r.split(",").map(function(e){return Number(e)}):null,n=Number(e.getAttribute("colspan")||1),a={colspan:n,rowspan:Number(e.getAttribute("rowspan")||1),colwidth:o&&o.length==n?o:null};for(var l in t){var i=t[l].getFromDOM,s=i&&i(e);null!=s&&(a[l]=s)}return a}function B(e,t){var r={};for(var o in 1!=e.attrs.colspan&&(r.colspan=e.attrs.colspan),1!=e.attrs.rowspan&&(r.rowspan=e.attrs.rowspan),e.attrs.colwidth&&(r["data-colwidth"]=e.attrs.colwidth.join(",")),t){var n=t[o].setDOMAttr;n&&n(e.attrs[o],r)}return r}function W(e){var t=e.cellAttributes||{},r={colspan:{default:1},rowspan:{default:1},colwidth:{default:null}};for(var o in t)r[o]={default:t[o].default};return{table:{content:"table_row+",tableRole:"table",isolating:!0,group:e.tableGroup,parseDOM:[{tag:"table"}],toDOM:function(){return["table",["tbody",0]]}},table_row:{content:"(table_cell | table_header)*",tableRole:"row",parseDOM:[{tag:"tr"}],toDOM:function(){return["tr",0]}},table_cell:{content:e.cellContent,attrs:r,tableRole:"cell",isolating:!0,parseDOM:[{tag:"td",getAttrs:function(e){return L(e,t)}}],toDOM:function(e){return["td",B(e,t),0]}},table_header:{content:e.cellContent,attrs:r,tableRole:"header_cell",isolating:!0,parseDOM:[{tag:"th",getAttrs:function(e){return L(e,t)}}],toDOM:function(e){return["th",B(e,t),0]}}}}function K(e){var t=e.cached.tableNodeTypes;if(!t)for(var r in t=e.cached.tableNodeTypes={},e.nodes){var o=e.nodes[r],n=o.spec.tableRole;n&&(t[n]=o)}return t}function P(e){if(!e.size)return null;for(var t=e.content,r=e.openStart,n=e.openEnd;1==t.childCount&&(r>0&&n>0||"table"==t.firstChild.type.spec.tableRole);)r--,n--,t=t.firstChild.content;var a=t.firstChild,l=a.type.spec.tableRole,i=a.type.schema,s=[];if("row"==l)for(var c=0;c<t.childCount;c++){var p=t.child(c).content,d=c?0:Math.max(0,r-1),h=c<t.childCount-1?0:Math.max(0,n-1);(d||h)&&(p=q(K(i).row,new o.Slice(p,d,h)).content),s.push(p)}else{if("cell"!=l&&"header_cell"!=l)return null;s.push(r||n?q(K(i).row,new o.Slice(t,r,n)).content:t)}return I(i,s)}function I(e,t){for(var r=[],n=0;n<t.length;n++)for(var a=t[n],l=a.childCount-1;l>=0;l--)for(var i=a.child(l).attrs,s=i.rowspan,c=i.colspan,p=n;p<n+s;p++)r[p]=(r[p]||0)+c;for(var d=0,h=0;h<r.length;h++)d=Math.max(d,r[h]);for(var u=0;u<r.length;u++)if(u>=t.length&&t.push(o.Fragment.empty),r[u]<d){for(var f=K(e).cell.createAndFill(),v=[],m=r[u];m<d;m++)v.push(f);t[u]=t[u].append(o.Fragment.from(v))}return{height:t.length,width:d,rows:t}}function q(e,t){var r=e.createAndFill();return new l.Transform(r).replace(0,r.content.size,t).doc}function X(e,t,r){var n=e.width,a=e.height,l=e.rows;if(n!=t){for(var i=[],s=[],c=0;c<l.length;c++){for(var p=l[c],d=[],h=i[c]||0,u=0;h<t;u++){var f=p.child(u%p.childCount);h+f.attrs.colspan>t&&(f=f.type.create(_(f.attrs,f.attrs.colspan,h+f.attrs.colspan-t),f.content)),d.push(f),h+=f.attrs.colspan;for(var v=1;v<f.attrs.rowspan;v++)i[c+v]=(i[c+v]||0)+f.attrs.colspan}s.push(o.Fragment.from(d))}l=s,n=t}if(a!=r){for(var m=[],w=0,g=0;w<r;w++,g++){for(var C=[],b=l[g%a],y=0;y<b.childCount;y++){var S=b.child(y);w+S.attrs.rowspan>r&&(S=S.type.create(N(S.attrs,"rowspan",r-S.attrs.rowspan),S.content)),C.push(S)}m.push(o.Fragment.from(C))}l=m,a=r}return{width:n,height:a,rows:l}}function V(e,t,r,n,a,l,i){var s,c,p=K(e.doc.type.schema);if(a>t.width)for(var d=0,h=0;d<t.height;d++){var u=r.child(d);h+=u.nodeSize;var f=[],v=void 0;v=null==u.lastChild||u.lastChild.type==p.cell?s||(s=p.cell.createAndFill()):c||(c=p.header_cell.createAndFill());for(var m=t.width;m<a;m++)f.push(v);e.insert(e.mapping.slice(i).map(h-1+n),f)}if(l>t.height){for(var w=[],g=0,C=(t.height-1)*t.width;g<Math.max(t.width,a);g++){var b=!(g>=t.width)&&r.nodeAt(t.map[C+g]).type==p.header_cell;w.push(b?c||(c=p.header_cell.createAndFill()):s||(s=p.cell.createAndFill()))}for(var y=p.row.create(null,o.Fragment.from(w)),S=[],x=t.height;x<l;x++)S.push(y);e.insert(e.mapping.slice(i).map(n+r.nodeSize-2),S)}return!(!s&&!c)}function j(e,t,r,o,n,a,l,i){if(0==l||l==t.height)return!1;for(var s=!1,c=n;c<a;c++){var p=l*t.width+c,d=t.map[p];if(t.map[p-t.width]==d){s=!0;var h=r.nodeAt(d),u=t.findCell(d),f=u.top,v=u.left;e.setNodeMarkup(e.mapping.slice(i).map(d+o),null,N(h.attrs,"rowspan",l-f)),e.insert(e.mapping.slice(i).map(t.positionAt(l,v,r)),h.type.createAndFill(N(h.attrs,"rowspan",f+h.attrs.rowspan-l))),c+=h.attrs.colspan-1}}return s}function J(e,t,r,o,n,a,l,i){if(0==l||l==t.width)return!1;for(var s=!1,c=n;c<a;c++){var p=c*t.width+l,d=t.map[p];if(t.map[p-1]==d){s=!0;var h=r.nodeAt(d),u=t.colCount(d),f=e.mapping.slice(i).map(d+o);e.setNodeMarkup(f,null,_(h.attrs,l-u,h.attrs.colspan-(l-u))),e.insert(f+h.nodeSize,h.type.createAndFill(_(h.attrs,0,l-u))),c+=h.attrs.rowspan-1}}return s}function U(e,t,r,n,a){var l=r?e.doc.nodeAt(r-1):e.doc,i=h.get(l),s=n.top,c=n.left,p=c+a.width,d=s+a.height,u=e.tr,f=0;function v(){l=r?u.doc.nodeAt(r-1):u.doc,i=h.get(l),f=u.mapping.maps.length}V(u,i,l,r,p,d,f)&&v(),j(u,i,l,r,c,p,s,f)&&v(),j(u,i,l,r,c,p,d,f)&&v(),J(u,i,l,r,s,d,c,f)&&v(),J(u,i,l,r,s,d,p,f)&&v();for(var m=s;m<d;m++){var w=i.positionAt(m,c,l),g=i.positionAt(m,p,l);u.replace(u.mapping.slice(f).map(w+r),u.mapping.slice(f).map(g+r),new o.Slice(a.rows[m-s],0,0))}v(),u.setSelection(new k(u.doc.resolve(r+i.positionAt(s,c,l)),u.doc.resolve(r+i.positionAt(d-1,p-1,l)))),t(u)}E.prototype.map=function(e){return new E(e.map(this.anchor),e.map(this.head))},E.prototype.resolve=function(e){var t=e.resolve(this.anchor),o=e.resolve(this.head);return"row"==t.parent.type.spec.tableRole&&"row"==o.parent.type.spec.tableRole&&t.index()<t.parent.childCount&&o.index()<o.parent.childCount&&$(t,o)?new k(t,o):r.Selection.near(o,1)};var Y=(0,n.keydownHandler)({ArrowLeft:Q("horiz",-1),ArrowRight:Q("horiz",1),ArrowUp:Q("vert",-1),ArrowDown:Q("vert",1),"Shift-ArrowLeft":Z("horiz",-1),"Shift-ArrowRight":Z("horiz",1),"Shift-ArrowUp":Z("vert",-1),"Shift-ArrowDown":Z("vert",1),Backspace:ee,"Mod-Backspace":ee,Delete:ee,"Mod-Delete":ee});function G(e,t,r){return!r.eq(e.selection)&&(t&&t(e.tr.setSelection(r).scrollIntoView()),!0)}function Q(e,t){return function(o,n,a){var l=o.selection;if(l instanceof k)return G(o,n,r.Selection.near(l.$headCell,t));if("horiz"!=e&&!l.empty)return!1;var i=ne(a,e,t);if(null==i)return!1;if("horiz"==e)return G(o,n,r.Selection.near(o.doc.resolve(l.head+t),t));var s,c=o.doc.resolve(i),p=z(c,e,t);return s=p?r.Selection.near(p,1):t<0?r.Selection.near(o.doc.resolve(c.before(-1)),-1):r.Selection.near(o.doc.resolve(c.after(-1)),1),G(o,n,s)}}function Z(e,t){return function(r,o,n){var a=r.selection;if(!(a instanceof k)){var l=ne(n,e,t);if(null==l)return!1;a=new k(r.doc.resolve(l))}var i=z(a.$headCell,e,t);return!!i&&G(r,o,new k(a.$anchorCell,i))}}function ee(e,t){var r=e.selection;if(!(r instanceof k))return!1;if(t){var n=e.tr,a=K(e.schema).cell.createAndFill().content;r.forEachCell(function(e,t){e.content.eq(a)||n.replace(n.mapping.map(t+1),n.mapping.map(t+e.nodeSize-1),new o.Slice(a,0,0))}),n.docChanged&&t(n)}return!0}function te(e,t){var r=g(e.state.doc.resolve(t));return!!r&&(e.dispatch(e.state.tr.setSelection(new k(r))),!0)}function re(e,t,r){if(!b(e.state))return!1;var n=P(r),a=e.state.selection;if(a instanceof k){n||(n={width:1,height:1,rows:[o.Fragment.from(q(K(e.state.schema).cell,r))]});var l=a.$anchorCell.node(-1),i=a.$anchorCell.start(-1),s=h.get(l).rectBetween(a.$anchorCell.pos-i,a.$headCell.pos-i);return n=X(n,s.right-s.left,s.bottom-s.top),U(e.state,e.dispatch,i,s,n),!0}if(n){var c=y(e.state),p=c.start(-1);return U(e.state,e.dispatch,p,h.get(c.node(-1)).findCell(c.pos-p),n),!0}return!1}function oe(e,t){if(!t.ctrlKey&&!t.metaKey){var r,o=ae(e,t.target);if(t.shiftKey&&e.state.selection instanceof k)n(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&o&&null!=(r=g(e.state.selection.$anchor))&&le(e,t).pos!=r.pos)n(r,t),t.preventDefault();else if(!o)return;e.root.addEventListener("mouseup",a),e.root.addEventListener("dragstart",a),e.root.addEventListener("mousemove",l)}function n(t,r){var o=le(e,r),n=null==w.getState(e.state);if(!o||!$(t,o)){if(!n)return;o=t}var a=new k(t,o);if(n||!e.state.selection.eq(a)){var l=e.state.tr.setSelection(a);n&&l.setMeta(w,t.pos),e.dispatch(l)}}function a(){e.root.removeEventListener("mouseup",a),e.root.removeEventListener("dragstart",a),e.root.removeEventListener("mousemove",l),null!=w.getState(e.state)&&e.dispatch(e.state.tr.setMeta(w,-1))}function l(r){var l,i=w.getState(e.state);if(null!=i)l=e.state.doc.resolve(i);else if(ae(e,r.target)!=o&&!(l=le(e,t)))return a();l&&n(l,r)}}function ne(e,t,o){if(!(e.state.selection instanceof r.TextSelection))return null;for(var n=e.state.selection.$head,a=n.depth-1;a>=0;a--){var l=n.node(a);if((o<0?n.index(a):n.indexAfter(a))!=(o<0?0:l.childCount))return null;if("cell"==l.type.spec.tableRole||"header_cell"==l.type.spec.tableRole){var i=n.before(a),s="vert"==t?o>0?"down":"up":o>0?"right":"left";return e.endOfTextblock(s)?i:null}}return null}function ae(e,t){for(;t&&t!=e.dom;t=t.parentNode)if("TD"==t.nodeName||"TH"==t.nodeName)return t}function le(e,t){var r=e.posAtCoords({left:t.clientX,top:t.clientY});return r&&r?g(e.state.doc.resolve(r.pos)):null}var ie=new r.PluginKey("fix-tables");function se(e,t,r,o){var n=e.childCount,a=t.childCount;e:for(var l=0,i=0;l<a;l++){for(var s=t.child(l),c=i,p=Math.min(n,l+3);c<p;c++)if(e.child(c)==s){i=c+1,r+=s.nodeSize;continue e}o(s,r),i<n&&e.child(i).sameMarkup(s)?se(e.child(i),s,r+1,o):s.nodesBetween(0,s.content.size,o,r+1),r+=s.nodeSize}}function ce(e,t){var r,o=function(t,o){"table"==t.type.spec.tableRole&&(r=pe(e,t,o,r))};return t?t.doc!=e.doc&&se(t.doc,e.doc,0,o):e.doc.descendants(o),r}function pe(e,t,r,o){var n=h.get(t);if(!n.problems)return o;o||(o=e.tr);for(var a,l,i=[],s=0;s<n.height;s++)i.push(0);for(var c=0;c<n.problems.length;c++){var p=n.problems[c];if("collision"==p.type){for(var d=t.nodeAt(p.pos),u=0;u<d.attrs.rowspan;u++)i[p.row+u]+=p.n;o.setNodeMarkup(o.mapping.map(r+1+p.pos),null,_(d.attrs,d.attrs.colspan-p.n,p.n))}else if("missing"==p.type)i[p.row]+=p.n;else if("overlong_rowspan"==p.type){var f=t.nodeAt(p.pos);o.setNodeMarkup(o.mapping.map(r+1+p.pos),null,N(f.attrs,"rowspan",f.attrs.rowspan-p.n))}else if("colwidth mismatch"==p.type){var v=t.nodeAt(p.pos);o.setNodeMarkup(o.mapping.map(r+1+p.pos),null,N(v.attrs,"colwidth",p.colwidth))}}for(var m=0;m<i.length;m++)i[m]&&(null==a&&(a=m),l=m);for(var w=0,g=r+1;w<n.height;w++){var C=t.child(w),b=g+C.nodeSize,y=i[w];if(y>0){var S="cell";C.firstChild&&(S=C.firstChild.type.spec.tableRole);for(var x=[],A=0;A<y;A++)x.push(K(e.schema)[S].createAndFill());var $=0!=w&&a!=w-1||l!=w?b-1:g+1;o.insert(o.mapping.map($),x)}g=b}return o.setMeta(ie,{fixTables:!0})}function de(e){var t,r=e.selection,o=y(e),n=o.node(-1),a=o.start(-1),l=h.get(n);return(t=r instanceof k?l.rectBetween(r.$anchorCell.pos-a,r.$headCell.pos-a):l.findCell(o.pos-a)).tableStart=a,t.map=l,t.table=n,t}function he(e,t,r){for(var o=K(t.type.schema).header_cell,n=0;n<e.height;n++)if(t.nodeAt(e.map[r+n*e.width]).type!=o)return!1;return!0}function ue(e,t,r){var o=t.map,n=t.tableStart,a=t.table,l=r>0?-1:0;he(o,a,r+l)&&(l=0==r||r==o.width?null:0);for(var i=0;i<o.height;i++){var s=i*o.width+r;if(r>0&&r<o.width&&o.map[s-1]==o.map[s]){var c=o.map[s],p=a.nodeAt(c);e.setNodeMarkup(e.mapping.map(n+c),null,D(p.attrs,r-o.colCount(c))),i+=p.attrs.rowspan-1}else{var d=null==l?K(a.type.schema).cell:a.nodeAt(o.map[s+l]).type,h=o.positionAt(i,r,a);e.insert(e.mapping.map(n+h),d.createAndFill())}}return e}function fe(e,t){if(!b(e))return!1;if(t){var r=de(e);t(ue(e.tr,r,r.left))}return!0}function ve(e,t){if(!b(e))return!1;if(t){var r=de(e);t(ue(e.tr,r,r.right))}return!0}function me(e,t,r){for(var o=t.map,n=t.table,a=t.tableStart,l=e.mapping.maps.length,i=0;i<o.height;){var s=i*o.width+r,c=o.map[s],p=n.nodeAt(c);if(r>0&&o.map[s-1]==c||r<o.width-1&&o.map[s+1]==c)e.setNodeMarkup(e.mapping.slice(l).map(a+c),null,_(p.attrs,r-o.colCount(c)));else{var d=e.mapping.slice(l).map(a+c);e.delete(d,d+p.nodeSize)}i+=p.attrs.rowspan}}function we(e,t){if(!b(e))return!1;if(t){var r=de(e),o=e.tr;if(0==r.left&&r.right==r.map.width)return!1;for(var n=r.right-1;me(o,r,n),n!=r.left;n--)r.table=r.tableStart?o.doc.nodeAt(r.tableStart-1):o.doc,r.map=h.get(r.table);t(o)}return!0}function ge(e,t,r){for(var o=K(t.type.schema).header_cell,n=0;n<e.width;n++)if(t.nodeAt(e.map[n+r*e.width]).type!=o)return!1;return!0}function Ce(e,t,r){for(var o=t.map,n=t.tableStart,a=t.table,l=n,i=0;i<r;i++)l+=a.child(i).nodeSize;var s=[],c=r>0?-1:0;ge(o,a,r+c)&&(c=0==r||r==o.height?null:0);for(var p=0,d=o.width*r;p<o.width;p++,d++)if(r>0&&r<o.height&&o.map[d]==o.map[d-o.width]){var h=o.map[d],u=a.nodeAt(h).attrs;e.setNodeMarkup(n+h,null,N(u,"rowspan",u.rowspan+1)),p+=u.colspan-1}else{var f=null==c?K(a.type.schema).cell:a.nodeAt(o.map[d+c*o.width]).type;s.push(f.createAndFill())}return e.insert(l,K(a.type.schema).row.create(null,s)),e}function be(e,t){if(!b(e))return!1;if(t){var r=de(e);t(Ce(e.tr,r,r.top))}return!0}function ye(e,t){if(!b(e))return!1;if(t){var r=de(e);t(Ce(e.tr,r,r.bottom))}return!0}function Se(e,t,r){for(var o=t.map,n=t.table,a=t.tableStart,l=0,i=0;i<r;i++)l+=n.child(i).nodeSize;var s=l+n.child(r).nodeSize,c=e.mapping.maps.length;e.delete(l+a,s+a);for(var p=0,d=r*o.width;p<o.width;p++,d++){var h=o.map[d];if(r>0&&h==o.map[d-o.width]){var u=n.nodeAt(h).attrs;e.setNodeMarkup(e.mapping.slice(c).map(h+a),null,N(u,"rowspan",u.rowspan-1)),p+=u.colspan-1}else if(r<o.width&&h==o.map[d+o.width]){var f=n.nodeAt(h),v=f.type.create(N(f.attrs,"rowspan",f.attrs.rowspan-1),f.content),m=o.positionAt(r+1,p,n);e.insert(e.mapping.slice(c).map(a+m),v),p+=f.attrs.colspan-1}}}function xe(e,t){if(!b(e))return!1;if(t){var r=de(e),o=e.tr;if(0==r.top&&r.bottom==r.map.height)return!1;for(var n=r.bottom-1;Se(o,r,n),n!=r.top;n--)r.table=r.tableStart?o.doc.nodeAt(r.tableStart-1):o.doc,r.map=h.get(r.table);t(o)}return!0}function Ae(e){var t=e.content;return 1==t.childCount&&t.firstChild.isTextblock&&0==t.firstChild.childCount}function $e(e,t){for(var r=e.width,o=e.height,n=e.map,a=t.top*r+t.left,l=a,i=(t.bottom-1)*r+t.left,s=a+(t.right-t.left-1),c=t.top;c<t.bottom;c++){if(t.left>0&&n[l]==n[l-1]||t.right<r&&n[s]==n[s+1])return!0;l+=r,s+=r}for(var p=t.left;p<t.right;p++){if(t.top>0&&n[a]==n[a-r]||t.bottom<o&&n[i]==n[i+r])return!0;a++,i++}return!1}function Me(e,t){var r=e.selection;if(!(r instanceof k)||r.$anchorCell.pos==r.$headCell.pos)return!1;var n=de(e),a=n.map;if($e(a,n))return!1;if(t){for(var l,i,s=e.tr,c={},p=o.Fragment.empty,d=n.top;d<n.bottom;d++)for(var h=n.left;h<n.right;h++){var u=a.map[d*a.width+h],f=n.table.nodeAt(u);if(!c[u])if(c[u]=!0,null==l)l=u,i=f;else{Ae(f)||(p=p.append(f.content));var v=s.mapping.map(u+n.tableStart);s.delete(v,v+f.nodeSize)}}if(s.setNodeMarkup(l+n.tableStart,null,N(D(i.attrs,i.attrs.colspan,n.right-n.left-i.attrs.colspan),"rowspan",n.bottom-n.top)),p.size){var m=l+1+i.content.size,w=Ae(i)?l+1:m;s.replaceWith(w+n.tableStart,m+n.tableStart,p)}s.setSelection(new k(s.doc.resolve(l+n.tableStart))),t(s)}return!0}function Re(e,t){var r=K(e.schema);return ze(function(e){var t=e.node;return r[t.type.spec.tableRole]})(e,t)}function ze(e){return function(t,r){var o,n,a=t.selection;if(a instanceof k){if(a.$anchorCell.pos!=a.$headCell.pos)return!1;o=a.$anchorCell.nodeAfter,n=a.$anchorCell.pos}else{if(!(o=C(a.$from)))return!1;n=g(a.$from).pos}if(1==o.attrs.colspan&&1==o.attrs.rowspan)return!1;if(r){var l=o.attrs,i=[],s=l.colwidth;l.rowspan>1&&(l=N(l,"rowspan",1)),l.colspan>1&&(l=N(l,"colspan",1));for(var c,p=de(t),d=t.tr,h=0;h<p.right-p.left;h++)i.push(s?N(l,"colwidth",s&&s[h]?[s[h]]:null):l);for(var u=p.top;u<p.bottom;u++){var f=p.map.positionAt(u,p.left,p.table);u==p.top&&(f+=o.nodeSize);for(var v=p.left,m=0;v<p.right;v++,m++)v==p.left&&u==p.top||d.insert(c=d.mapping.map(f+p.tableStart,1),e({node:o,row:u,col:v}).createAndFill(i[m]))}d.setNodeMarkup(n,e({node:o,row:p.top,col:p.left}),i[0]),a instanceof k&&d.setSelection(new k(d.doc.resolve(a.$anchorCell.pos),c&&d.doc.resolve(c))),r(d)}return!0}}function Ne(e,t){return function(r,o){if(!b(r))return!1;var n=y(r);if(n.nodeAfter.attrs[e]===t)return!1;if(o){var a=r.tr;r.selection instanceof k?r.selection.forEachCell(function(r,o){r.attrs[e]!==t&&a.setNodeMarkup(o,null,N(r.attrs,e,t))}):a.setNodeMarkup(n.pos,null,N(n.nodeAfter.attrs,e,t)),o(a)}return!0}}function _e(e){return function(t,r){if(!b(t))return!1;if(r){for(var o=K(t.schema),n=de(t),a=t.tr,l=n.map.cellsInRect("column"==e?new d(n.left,0,n.right,n.map.height):"row"==e?new d(0,n.top,n.map.width,n.bottom):n),i=l.map(function(e){return n.table.nodeAt(e)}),s=0;s<l.length;s++)i[s].type==o.header_cell&&a.setNodeMarkup(n.tableStart+l[s],o.cell,i[s].attrs);if(0==a.steps.length)for(var c=0;c<l.length;c++)a.setNodeMarkup(n.tableStart+l[c],o.header_cell,i[c].attrs);r(a)}return!0}}function De(e,t,r){for(var o=t.map.cellsInRect({left:0,top:0,right:"row"==e?t.map.width:1,bottom:"column"==e?t.map.height:1}),n=0;n<o.length;n++){var a=t.table.nodeAt(o[n]);if(a&&a.type!==r.header_cell)return!1}return!0}function ke(e,t){return(t=t||{useDeprecatedLogic:!1}).useDeprecatedLogic?_e(e):function(t,r){if(!b(t))return!1;if(r){var o=K(t.schema),n=de(t),a=t.tr,l=De("row",n,o),i=De("column",n,o),s=("column"===e?l:"row"===e&&i)?1:0,c="column"==e?new d(0,s,1,n.map.height):"row"==e?new d(s,0,n.map.width,1):n,p="column"==e?i?o.cell:o.header_cell:"row"==e?l?o.cell:o.header_cell:o.cell;n.map.cellsInRect(c).forEach(function(e){var t=e+n.tableStart,r=a.doc.nodeAt(t);r&&a.setNodeMarkup(t,p,r.attrs)}),r(a)}return!0}}exports.fixTablesKey=ie;var Ee=ke("row",{useDeprecatedLogic:!0});exports.toggleHeaderRow=Ee;var Te=ke("column",{useDeprecatedLogic:!0});exports.toggleHeaderColumn=Te;var Fe=ke("cell",{useDeprecatedLogic:!0});function He(e,t){if(t<0){var r=e.nodeBefore;if(r)return e.pos-r.nodeSize;for(var o=e.index(-1)-1,n=e.before();o>=0;o--){var a=e.node(-1).child(o);if(a.childCount)return n-1-a.lastChild.nodeSize;n-=a.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;for(var l=e.node(-1),i=e.indexAfter(-1),s=e.after();i<l.childCount;i++){var c=l.child(i);if(c.childCount)return s+1;s+=c.nodeSize}}}function Oe(e){return function(t,o){if(!b(t))return!1;var n=He(y(t),e);if(null!=n){if(o){var a=t.doc.resolve(n);o(t.tr.setSelection(r.TextSelection.between(a,A(a))).scrollIntoView())}return!0}}}function Le(e,t){for(var r=e.selection.$anchor,o=r.depth;o>0;o--){if("table"==r.node(o).type.spec.tableRole)return t&&t(e.tr.delete(r.before(o),r.after(o)).scrollIntoView()),!0}return!1}exports.toggleHeaderCell=Fe;var Be=function(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),We(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))};function We(e,t,r,o,n,a){for(var l=0,i=!0,s=t.firstChild,c=e.firstChild,p=0,d=0;p<c.childCount;p++)for(var h=c.child(p).attrs,u=h.colspan,f=h.colwidth,v=0;v<u;v++,d++){var m=n==d?a:f&&f[v],w=m?m+"px":"";l+=m||o,m||(i=!1),s?(s.style.width!=w&&(s.style.width=w),s=s.nextSibling):t.appendChild(document.createElement("col")).style.width=w}for(;s;){var g=s.nextSibling;s.parentNode.removeChild(s),s=g}i?(r.style.width=l+"px",r.style.minWidth=""):(r.style.width="",r.style.minWidth=l+"px")}Be.prototype.update=function(e){return e.type==this.node.type&&(this.node=e,We(e,this.colgroup,this.table,this.cellMinWidth),!0)},Be.prototype.ignoreMutation=function(e){return"attributes"==e.type&&(e.target==this.table||this.colgroup.contains(e.target))};var Ke=new r.PluginKey("tableColumnResizing");function Pe(e){void 0===e&&(e={});var t=e.handleWidth;void 0===t&&(t=5);var o=e.cellMinWidth;void 0===o&&(o=25);var n=e.View;void 0===n&&(n=Be);var a=e.lastColumnResizable;return void 0===a&&(a=!0),new r.Plugin({key:Ke,state:{init:function(e,t){return this.spec.props.nodeViews[K(t.schema).table.name]=function(e,t){return new n(e,o,t)},new Ie(-1,!1)},apply:function(e,t){return t.apply(e)}},props:{attributes:function(e){return Ke.getState(e).activeHandle>-1?{class:"resize-cursor"}:null},handleDOMEvents:{mousemove:function(e,r){qe(e,r,t,o,a)},mouseleave:function(e){Xe(e)},mousedown:function(e,t){Ve(e,t,o)}},decorations:function(e){var t=Ke.getState(e);if(t.activeHandle>-1)return tt(e,t.activeHandle)},nodeViews:{}}})}exports.columnResizingPluginKey=Ke;var Ie=function(e,t){this.activeHandle=e,this.dragging=t};function qe(e,t,r,o,n){var a=Ke.getState(e.state);if(!a.dragging){var l=Je(t.target),i=-1;if(l){var s=l.getBoundingClientRect(),c=s.left,p=s.right;t.clientX-c<=r?i=Ue(e,t,"left"):p-t.clientX<=r&&(i=Ue(e,t,"right"))}if(i!=a.activeHandle){if(!n&&-1!==i){var d=e.state.doc.resolve(i),u=d.node(-1),f=h.get(u),v=d.start(-1);if(f.colCount(d.pos-v)+d.nodeAfter.attrs.colspan-1==f.width-1)return}Ge(e,i)}}}function Xe(e){var t=Ke.getState(e.state);t.activeHandle>-1&&!t.dragging&&Ge(e,-1)}function Ve(e,t,r){var o=Ke.getState(e.state);if(-1==o.activeHandle||o.dragging)return!1;var n=e.state.doc.nodeAt(o.activeHandle),a=je(e,o.activeHandle,n.attrs);function l(t){window.removeEventListener("mouseup",l),window.removeEventListener("mousemove",i);var o=Ke.getState(e.state);o.dragging&&(Qe(e,o.activeHandle,Ye(o.dragging,t,r)),e.dispatch(e.state.tr.setMeta(Ke,{setDragging:null})))}function i(t){if(!t.which)return l(t);var o=Ke.getState(e.state),n=Ye(o.dragging,t,r);Ze(e,o.activeHandle,n,r)}return e.dispatch(e.state.tr.setMeta(Ke,{setDragging:{startX:t.clientX,startWidth:a}})),window.addEventListener("mouseup",l),window.addEventListener("mousemove",i),t.preventDefault(),!0}function je(e,t,r){var o=r.colspan,n=r.colwidth,a=n&&n[n.length-1];if(a)return a;var l=e.domAtPos(t),i=l.node.childNodes[l.offset].offsetWidth,s=o;if(n)for(var c=0;c<o;c++)n[c]&&(i-=n[c],s--);return i/s}function Je(e){for(;e&&"TD"!=e.nodeName&&"TH"!=e.nodeName;)e=e.classList.contains("ProseMirror")?null:e.parentNode;return e}function Ue(e,t,r){var o=e.posAtCoords({left:t.clientX,top:t.clientY}).pos,n=g(e.state.doc.resolve(o));if(!n)return-1;if("right"==r)return n.pos;var a=h.get(n.node(-1)),l=n.start(-1),i=a.map.indexOf(n.pos-l);return i%a.width==0?-1:l+a.map[i-1]}function Ye(e,t,r){var o=t.clientX-e.startX;return Math.max(r,e.startWidth+o)}function Ge(e,t){e.dispatch(e.state.tr.setMeta(Ke,{setHandle:t}))}function Qe(e,t,r){for(var o=e.state.doc.resolve(t),n=o.node(-1),a=h.get(n),l=o.start(-1),i=a.colCount(o.pos-l)+o.nodeAfter.attrs.colspan-1,s=e.state.tr,c=0;c<a.height;c++){var p=c*a.width+i;if(!c||a.map[p]!=a.map[p-a.width]){var d=a.map[p],u=n.nodeAt(d).attrs,f=1==u.colspan?0:i-a.colCount(d);if(!u.colwidth||u.colwidth[f]!=r){var v=u.colwidth?u.colwidth.slice():et(u.colspan);v[f]=r,s.setNodeMarkup(l+d,null,N(u,"colwidth",v))}}}s.docChanged&&e.dispatch(s)}function Ze(e,t,r,o){for(var n=e.state.doc.resolve(t),a=n.node(-1),l=n.start(-1),i=h.get(a).colCount(n.pos-l)+n.nodeAfter.attrs.colspan-1,s=e.domAtPos(n.start(-1)).node;"TABLE"!=s.nodeName;)s=s.parentNode;We(a,s.firstChild,s,o,i,r)}function et(e){for(var t=[],r=0;r<e;r++)t.push(0);return t}function tt(e,t){for(var r=[],o=e.doc.resolve(t),n=o.node(-1),l=h.get(n),i=o.start(-1),s=l.colCount(o.pos-i)+o.nodeAfter.attrs.colspan,c=0;c<l.height;c++){var p=s+c*l.width-1;if(!(s!=l.width&&l.map[p]==l.map[p+1]||0!=c&&l.map[p-1]==l.map[p-1-l.width])){var d=l.map[p],u=i+d+n.nodeAt(d).nodeSize-1,f=document.createElement("div");f.className="column-resize-handle",r.push(a.Decoration.widget(u,f))}}return a.DecorationSet.create(e.doc,r)}function rt(e){void 0===e&&(e={});var t=e.allowTableNodeSelection;return void 0===t&&(t=!1),new r.Plugin({key:w,state:{init:function(){return null},apply:function(e,t){var r=e.getMeta(w);if(null!=r)return-1==r?null:r;if(null==t||!e.docChanged)return t;var o=e.mapping.mapResult(t),n=o.deleted,a=o.pos;return n?null:a}},props:{decorations:T,handleDOMEvents:{mousedown:oe},createSelectionBetween:function(e){if(null!=w.getState(e.state))return e.state.selection},handleTripleClick:te,handleKeyDown:Y,handlePaste:re},appendTransaction:function(e,r,o){return O(o,ce(o,r),t)}})}Ie.prototype.apply=function(e){var t=this,r=e.getMeta(Ke);if(r&&null!=r.setHandle)return new Ie(r.setHandle,null);if(r&&void 0!==r.setDragging)return new Ie(t.activeHandle,r.setDragging);if(t.activeHandle>-1&&e.docChanged){var o=e.mapping.map(t.activeHandle,-1);x(e.doc.resolve(o))||(o=null),t=new Ie(o,t.dragging)}return t};
},{"prosemirror-state":"vbBo","prosemirror-model":"cBJM","prosemirror-keymap":"mh0X","prosemirror-view":"VJHr","prosemirror-transform":"etvU"}],"C8Db":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("prosemirror-state"),t=require("prosemirror-model"),r=require("prosemirror-tables"),n=function(e){return function(t){var r=z(e)(t.selection);return r?y(r.pos)(t):t}},o=function(e,t){return function(r){Array.isArray(e)||(e=[e]);for(var n=0,o=e.length;n<o;n++){var i=z(e[n])(r.selection);if(i){var a=b(i.pos,t)(r);if(a!==r)return a}}return r}},i=function(e){if(h(e.selection)){var t=e.selection.$from.pos,r=e.selection.$to.pos;return g(e.delete(t,r))}return e},a=function(r){return function(n){if(h(n.selection)){var o=n.selection,i=o.$from,a=o.$to;if(r instanceof t.Fragment&&i.parent.canReplace(i.index(),i.indexAfter(),r)||i.parent.canReplaceWith(i.index(),i.indexAfter(),r.type))return g(n.replaceWith(i.pos,a.pos,r).setSelection(new e.NodeSelection(n.doc.resolve(i.pos))))}return n}},c=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return function(n){var o=e.Selection.findFrom(n.doc.resolve(t),r,!0);return o?n.setSelection(o):n}},s=function(e){return e.type&&e.type.spec.selectable},l=function(e){return s(e)&&e.type.isLeaf},u=function(t,r,n){return l(t)?n.setSelection(new e.NodeSelection(n.doc.resolve(r))):c(r)(n)},f=function(e,t,r){return function(n){var i="number"==typeof t,c=n.selection.$from,l=i?n.doc.resolve(t):h(n.selection)?n.doc.resolve(c.pos+1):c,f=l.parent;if(h(n.selection)&&r&&n!==(n=a(e)(n)))return n;if(C(f)&&n!==(n=o(f.type,e)(n))){var p=s(e)?l.before(l.depth):l.pos;return u(e,p,n)}if(w(l,e)){n.insert(l.pos,e);var d=i?l.pos:s(e)?n.selection.$anchor.pos-1:n.selection.$anchor.pos;return g(u(e,d,n))}for(var v=l.depth;v>0;v--){var m=l.after(v),b=n.doc.resolve(m);if(w(b,e))return n.insert(m,e),g(u(e,m,n))}return n}},p=function(e,t,r,n){return function(o){var i=z(e)(o.selection);return i?g(o.setNodeMarkup(i.pos,t,Object.assign({},i.node.attrs,r),n)):o}},d=function(t){return function(r){if(!h(r.selection)){var n=z(t)(r.selection);if(n)return g(r.setSelection(e.NodeSelection.create(r.doc,n.pos)))}return r}},v=function(e){var t=X(e.selection);return"number"==typeof t?y(t)(e):e},h=function(t){return t instanceof e.NodeSelection},m=function(e,t){return Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e},g=function(e){return Object.assign(Object.create(e),e).setTime(Date.now())},b=function(e,t){return function(r){var n=r.doc.nodeAt(e),o=r.doc.resolve(e);if(x(o,t)){var i=(r=r.replaceWith(e,e+n.nodeSize,t)).selection.$from.pos-1;return r=c(Math.max(i,0),-1)(r),r=c(r.selection.$from.start())(r),g(r)}return r}},x=function(e,r){var n=e.node(e.depth);return n&&n.type.validContent(r instanceof t.Fragment?r:t.Fragment.from(r))},y=function(e){return function(t){var r=t.doc.nodeAt(e);return g(t.delete(e,e+r.nodeSize))}},T=function(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;var t={};return Object.keys(e.nodes).forEach(function(r){var n=e.nodes[r];n.spec.tableRole&&(t[n.spec.tableRole]=n)}),e.cached.tableNodeTypes=t,t},w=function(e,r){var n=e.index();return r instanceof t.Fragment?e.parent.canReplace(n,n,r):r instanceof t.Node&&e.parent.canReplaceWith(n,n,r.type)},C=function(e){return!e||"paragraph"===e.type.name&&2===e.nodeSize},S=function(e){return F(e,function(e){return e.type.spec.tableRole&&/table/i.test(e.type.spec.tableRole)})},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t?e.createChecked(null,t):e.createAndFill()},A=function(e){return function(t){for(var n=r.TableMap.get(t.$anchorCell.node(-1)),o=t.$anchorCell.start(-1),i=n.cellsInRect(e),a=n.cellsInRect(n.rectBetween(t.$anchorCell.pos-o,t.$headCell.pos-o)),c=0,s=i.length;c<s;c++)if(-1===a.indexOf(i[c]))return!1;return!0}},N=function(e){return e[0].map(function(t,r){return e.map(function(e){return e[r]})})},$=function(e){for(var t=r.TableMap.get(e),n=[],o=0;o<t.height;o++){for(var i=[],a={},c=0;c<t.width;c++){var s=t.map[o*t.width+c],l=e.nodeAt(s),u=t.findCell(s);a[s]||u.top!==o?i.push(null):(a[s]=!0,i.push(l))}n.push(i)}return n},M=function(e,t){for(var n=[],o=r.TableMap.get(e),i=0;i<o.height;i++){for(var a=e.child(i),c=[],s=0;s<o.width;s++)if(t[i][s]){var l=o.map[i*o.width+s],u=t[i][s],f=e.nodeAt(l).type.createChecked(Object.assign({},u.attrs),u.content,u.marks);c.push(f)}n.push(a.type.createChecked(a.attrs,c,a.marks))}return e.type.createChecked(e.attrs,n,e.marks)},O=function(e,t,r,n){var o=N($(e.node));return o=I(o,t,r,n),o=N(o),M(e.node,o)},k=function(e,t,r,n){var o=$(e.node);return o=I(o,t,r,n),M(e.node,o)},I=function(e,t,r,n){var o=t[0]>r[0]?-1:1,i=e.splice(t[0],t.length),a=i.length%2==0?1:0,c=void 0;return c=-1===n&&1===o?r[0]-1:1===n&&-1===o?r[r.length-1]-a+1:-1===o?r[0]:r[r.length-1]-a,e.splice.apply(e,[c,0].concat(i)),e},P=function(e,t,r,n){var o="Target position is invalid, you can't move the "+n+" "+e+" to "+t+", the target can't be split. You could use tryToFit option.";if(1===(e>t?-1:1)){if(-1!==r.slice(0,r.length-1).indexOf(t))throw new Error(o)}else if(-1!==r.slice(1).indexOf(t))throw new Error(o);return!0},E=function(e){return function(t){var r=t.$from;return F(r,e)}},F=function(e,t){for(var r=e.depth;r>0;r--){var n=e.node(r);if(t(n))return{pos:r>0?e.before(r):0,start:e.start(r),depth:r,node:n}}},B=function(e,t){return function(r){var n=E(e)(r);if(n)return L(n.pos,t)}},j=function(e){return function(t){return!!E(e)(t)}},z=function(e){return function(t){return E(function(t){return m(e,t)})(t)}},W=function(e,t){return F(e,function(e){return m(t,e)})},D=function(e){return function(t){return j(function(t){return m(e,t)})(t)}},_=function(e,t){return function(r){return B(function(t){return m(e,t)},t)(r)}},q=function(e){return function(t){if(h(t)){var r=t.node,n=t.$from;if(m(e,r))return{node:r,pos:n.pos,depth:n.depth}}}},X=function(t){var r=t.$from.nodeBefore,n=e.Selection.findFrom(t.$from,-1);if(n&&r){var o=z(r.type)(n);return o?o.pos:n.$from.pos}},L=function(e,t){var r=t(e),n=r.node.childNodes[r.offset];return r.node.nodeType===Node.TEXT_NODE?r.node.parentNode:n&&n.nodeType!==Node.TEXT_NODE?n:r.node},Y=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e)throw new Error('Invalid "node" parameter');var r=[];return e.descendants(function(e,n){if(r.push({node:e,pos:n}),!t)return!1}),r},G=function(e,t,r){if(!e)throw new Error('Invalid "node" parameter');if(!t)throw new Error('Invalid "predicate" parameter');return Y(e,r).filter(function(e){return t(e.node)})},H=function(e,t){return G(e,function(e){return e.isText},t)},J=function(e,t){return G(e,function(e){return e.isInline},t)},K=function(e,t){return G(e,function(e){return e.isBlock},t)},Q=function(e,t,r){return G(e,function(e){return!!t(e.attrs)},r)},U=function(e,t,r){return G(e,function(e){return e.type===t},r)},V=function(e,t,r){return G(e,function(e){return t.isInSet(e.marks)},r)},Z=function(e,t){return!!U(e,t).length};function ee(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var te=function(e){return E(function(e){return e.type.spec.tableRole&&"table"===e.type.spec.tableRole})(e)},re=function(e){return e instanceof r.CellSelection},ne=function(e){if(re(e)){var t=e.$anchorCell.start(-1);return r.TableMap.get(e.$anchorCell.node(-1)).rectBetween(e.$anchorCell.pos-t,e.$headCell.pos-t)}},oe=function(e){return function(t){if(re(t)){var n=r.TableMap.get(t.$anchorCell.node(-1));return A({left:e,right:e+1,top:0,bottom:n.height})(t)}return!1}},ie=function(e){return function(t){if(re(t)){var n=r.TableMap.get(t.$anchorCell.node(-1));return A({left:0,right:n.width,top:e,bottom:e+1})(t)}return!1}},ae=function(e){if(re(e)){var t=r.TableMap.get(e.$anchorCell.node(-1));return A({left:0,right:t.width,top:0,bottom:t.height})(e)}return!1},ce=function(e){return function(t){var n=te(t);if(n){var o=r.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce(function(e,t){if(t>=0&&t<=o.width-1){var r=o.cellsInRect({left:t,right:t+1,top:0,bottom:o.height});return e.concat(r.map(function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}}))}},[])}}},se=function(e){return function(t){var n=te(t);if(n){var o=r.TableMap.get(n.node);return(Array.isArray(e)?e:Array.from([e])).reduce(function(e,t){if(t>=0&&t<=o.height-1){var r=o.cellsInRect({left:0,right:o.width,top:t,bottom:t+1});return e.concat(r.map(function(e){var t=n.node.nodeAt(e),r=e+n.start;return{pos:r,start:r+1,node:t}}))}},[])}}},le=function(e){var t=te(e);if(t){var n=r.TableMap.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map(function(e){var r=t.node.nodeAt(e),n=e+t.start;return{pos:n,start:n+1,node:r}})}},ue=function(e){return function(t,n){return function(o){var i=te(o.selection),a="row"===e;if(i){var c=r.TableMap.get(i.node);if(t>=0&&t<(a?c.height:c.width)){var s=a?0:t,l=a?t:0,u=a?c.width:t+1,f=a?t+1:c.height;if(n){var p=ke(o.selection.$from);if(!p)return o;var d=c.findCell(p.pos-i.start);a?(l=Math.min(l,d.top),f=Math.max(f,d.bottom)):(s=Math.min(s,d.left),u=Math.max(u,d.right))}var v=c.cellsInRect({left:s,top:l,right:a?u:s+1,bottom:a?l+1:f}),h=f-l==1?v:c.cellsInRect({left:a?s:u-1,top:a?f-1:l,right:u,bottom:f}),m=i.start+v[0],b=i.start+h[h.length-1],x=o.doc.resolve(m),y=o.doc.resolve(b);return g(o.setSelection(new r.CellSelection(y,x)))}}return o}}},fe=ue("column"),pe=ue("row"),de=function(e){var t=te(e.selection);if(t){var n=r.TableMap.get(t.node).map;if(n&&n.length){var o=t.start+n[0],i=t.start+n[n.length-1],a=e.doc.resolve(o),c=e.doc.resolve(i);return g(e.setSelection(new r.CellSelection(c,a)))}}return e},ve=function(e,t){return function(r){if(e){var n=T(t).cell.createAndFill().content;if(!e.node.content.eq(n))return r.replaceWith(e.pos+1,e.pos+e.node.nodeSize,n),g(r)}return r}},he=function(e){return function(t){var n=te(t.selection);if(n){var o=r.TableMap.get(n.node);if(e>=0&&e<=o.width)return g(r.addColumn(t,{map:o,tableStart:n.start,table:n.node},e))}return t}},me=function(e,t,r){return function(n){var o=Object.assign({tryToFit:!1,direction:0},r),i=te(n.selection);if(!i)return n;var a=Fe(e)(n).indexes,c=Fe(t)(n).indexes;if(a.indexOf(t)>-1)return n;!o.tryToFit&&c.length>1&&P(e,t,c,"row");var s=k(i,a,c,o.direction);return g(n).replaceWith(i.pos,i.pos+i.node.nodeSize,s)}},ge=function(e,t,r){return function(n){var o=Object.assign({tryToFit:!1,direction:0},r),i=te(n.selection);if(!i)return n;var a=Ee(e)(n).indexes,c=Ee(t)(n).indexes;if(a.indexOf(t)>-1)return n;!o.tryToFit&&c.length>1&&P(e,t,c,"column");var s=O(i,a,c,o.direction);return g(n).replaceWith(i.pos,i.pos+i.node.nodeSize,s)}},be=function(e,t){return function(n){var o=te(n.selection);if(o){var i=r.TableMap.get(o.node),a=e-1;if(t&&a>=0)return g(xe(a)(n));if(e>=0&&e<=i.height)return g(r.addRow(n,{map:i,tableStart:o.start,table:o.node},e))}return n}},xe=function(e){return function(t){var n=te(t.selection);if(n){var o=r.TableMap.get(n.node);if(e>=0&&e<=o.height){for(var i=n.node,a=T(i.type.schema),c=n.start,s=0;s<e+1;s++)c+=i.child(s).nodeSize;var l=i.child(e),u=[],p=0;if(l.forEach(function(e){1===e.attrs.rowspan&&(p+=e.attrs.colspan,u.push(a[e.type.spec.tableRole].createAndFill(e.attrs,e.marks)))}),p<o.width){for(var d=[],v=function(r){var n=Pe(r,function(t,n){var o=t.node.attrs.rowspan;return o>1&&r+o>e})(t);d.push.apply(d,ee(n))},h=e;h>=0;h--)v(h);d.length&&d.forEach(function(e){t=Me(e,{rowspan:e.node.attrs.rowspan+1})(t)})}return f(a.row.create(l.attrs,u),c)(t)}}return t}},ye=function(e){return function(t){var n=te(t.selection);if(n){var o=r.TableMap.get(n.node);if(0===e&&1===o.width)return we(t);if(e>=0&&e<=o.width)return r.removeColumn(t,{map:o,tableStart:n.start,table:n.node},e),g(t)}return t}},Te=function(e){return function(t){var n=te(t.selection);if(n){var o=r.TableMap.get(n.node);if(0===e&&1===o.height)return we(t);if(e>=0&&e<=o.height)return r.removeRow(t,{map:o,tableStart:n.start,table:n.node},e),g(t)}return t}},we=function(e){for(var t=e.selection.$from,r=t.depth;r>0;r--){if("table"===t.node(r).type.spec.tableRole)return g(e.delete(t.before(r),t.after(r)))}return e},Ce=function(e){var t=e.selection;if(ae(t))return we(e);if(re(t)){var n=te(t);if(n){var o=r.TableMap.get(n.node),i=o.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==i.left&&i.right==o.width)return!1;for(var a=Object.assign({},i,{map:o,table:n.node,tableStart:n.start}),c=a.right-1;r.removeColumn(e,a,c),c!==a.left;c--)a.table=a.tableStart?e.doc.nodeAt(a.tableStart-1):e.doc,a.map=r.TableMap.get(a.table);return g(e)}}return e},Se=function(e){var t=e.selection;if(ae(t))return we(e);if(re(t)){var n=te(t);if(n){var o=r.TableMap.get(n.node),i=o.rectBetween(t.$anchorCell.pos-n.start,t.$headCell.pos-n.start);if(0==i.top&&i.bottom==o.height)return!1;for(var a=Object.assign({},i,{map:o,table:n.node,tableStart:n.start}),c=a.bottom-1;r.removeRow(e,a,c),c!==a.top;c--)a.table=a.tableStart?e.doc.nodeAt(a.tableStart-1):e.doc,a.map=r.TableMap.get(a.table);return g(e)}}return e},Re=function(e){return function(t){var r=Ie(e);return r?ye(r.left)(c(e.pos)(t)):t}},Ae=function(e){return function(t){var r=Ie(e);return r?Te(r.top)(c(e.pos)(t)):t}},Ne=function(t,r,n){return function(o){var i=ce(t)(o.selection);if(i){for(var a=i.length-1;a>=0;a--)o=r(i[a],o);if(n){var c=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(e.Selection.near(c))}return g(o)}return o}},$e=function(t,r,n){return function(o){var i=se(t)(o.selection);if(i){for(var a=i.length-1;a>=0;a--)o=r(i[a],o);if(n){var c=o.doc.resolve(o.mapping.map(i[i.length-1].pos));o.setSelection(e.Selection.near(c))}}return o}},Me=function(e,t){return function(r){return e?(r.setNodeMarkup(e.pos,null,Object.assign({},e.node.attrs,t)),g(r)):r}},Oe=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=T(e),a=i.cell,c=i.header_cell,s=i.row,l=i.table,u=[],f=[],p=0;p<r;p++)u.push(R(a,o)),n&&f.push(R(c,o));for(var d=[],v=0;v<t;v++)d.push(s.createChecked(null,n&&0===v?f:u));return l.createChecked(null,d)},ke=function(e){return F(e,function(e){return e.type.spec.tableRole&&/cell/i.test(e.type.spec.tableRole)})},Ie=function(e){var t=ke(e);if(t){var n=S(e),o=r.TableMap.get(n.node),i=t.pos-n.start;return o.rectBetween(i,i)}},Pe=function(e,t){return function(r){var n=[],o=se(e)(r.selection);if(o)for(var i=o.length-1;i>=0;i--)t(o[i],r)&&n.push(o[i]);return n}},Ee=function(e){return function(t){for(var r=e,n=e,o=function(e){var o=ce(e)(t.selection);o&&o.forEach(function(t){var o=t.node.attrs.colspan+e-1;o>=r&&(r=e),o>n&&(n=o)})},i=e;i>=0;i--)o(i);var a=function(e){var r=ce(e)(t.selection);r&&r.forEach(function(t){var r=t.node.attrs.colspan+e-1;t.node.attrs.colspan>1&&r>n&&(n=r)})};for(i=e;i<=n;i++)a(i);var c=[];for(i=r;i<=n;i++){var s=ce(i)(t.selection);s&&s.length&&c.push(i)}r=c[0],n=c[c.length-1];for(var l=ce(r)(t.selection),u=se(0)(t.selection),f=t.doc.resolve(l[l.length-1].pos),p=void 0,d=n;d>=r;d--){var v=ce(d)(t.selection);if(v&&v.length){for(var h=u.length-1;h>=0;h--)if(u[h].pos===v[0].pos){p=v[0];break}if(p)break}}return{$anchor:f,$head:t.doc.resolve(p.pos),indexes:c}}},Fe=function(e){return function(t){for(var r=e,n=e,o=function(e){se(e)(t.selection).forEach(function(t){var o=t.node.attrs.rowspan+e-1;o>=r&&(r=e),o>n&&(n=o)})},i=e;i>=0;i--)o(i);var a=function(e){se(e)(t.selection).forEach(function(t){var r=t.node.attrs.rowspan+e-1;t.node.attrs.rowspan>1&&r>n&&(n=r)})};for(i=e;i<=n;i++)a(i);var c=[];for(i=r;i<=n;i++){var s=se(i)(t.selection);s&&s.length&&c.push(i)}r=c[0],n=c[c.length-1];for(var l=se(r)(t.selection),u=ce(0)(t.selection),f=t.doc.resolve(l[l.length-1].pos),p=void 0,d=n;d>=r;d--){var v=se(d)(t.selection);if(v&&v.length){for(var h=u.length-1;h>=0;h--)if(u[h].pos===v[0].pos){p=v[0];break}if(p)break}}return{$anchor:f,$head:t.doc.resolve(p.pos),indexes:c}}};exports.isNodeSelection=h,exports.canInsert=w,exports.convertTableNodeToArrayOfRows=$,exports.convertArrayOfRowsToTableNode=M,exports.findParentNode=E,exports.findParentNodeClosestToPos=F,exports.findParentDomRef=B,exports.hasParentNode=j,exports.findParentNodeOfType=z,exports.findParentNodeOfTypeClosestToPos=W,exports.hasParentNodeOfType=D,exports.findParentDomRefOfType=_,exports.findSelectedNodeOfType=q,exports.findPositionOfNodeBefore=X,exports.findDomRefAtPos=L,exports.flatten=Y,exports.findChildren=G,exports.findTextNodes=H,exports.findInlineNodes=J,exports.findBlockNodes=K,exports.findChildrenByAttr=Q,exports.findChildrenByType=U,exports.findChildrenByMark=V,exports.contains=Z,exports.findTable=te,exports.isCellSelection=re,exports.getSelectionRect=ne,exports.isColumnSelected=oe,exports.isRowSelected=ie,exports.isTableSelected=ae,exports.getCellsInColumn=ce,exports.getCellsInRow=se,exports.getCellsInTable=le,exports.selectColumn=fe,exports.selectRow=pe,exports.selectTable=de,exports.emptyCell=ve,exports.addColumnAt=he,exports.moveRow=me,exports.moveColumn=ge,exports.addRowAt=be,exports.cloneRowAt=xe,exports.removeColumnAt=ye,exports.removeRowAt=Te,exports.removeTable=we,exports.removeSelectedColumns=Ce,exports.removeSelectedRows=Se,exports.removeColumnClosestToPos=Re,exports.removeRowClosestToPos=Ae,exports.forEachCellInColumn=Ne,exports.forEachCellInRow=$e,exports.setCellAttrs=Me,exports.createTable=Oe,exports.findCellClosestToPos=ke,exports.findCellRectClosestToPos=Ie,exports.getSelectionRangeInColumn=Ee,exports.getSelectionRangeInRow=Fe,exports.removeParentNodeOfType=n,exports.replaceParentNodeOfType=o,exports.removeSelectedNode=i,exports.replaceSelectedNode=a,exports.setTextSelection=c,exports.safeInsert=f,exports.setParentNodeMarkup=p,exports.selectParentNodeOfType=d,exports.removeNodeBefore=v;
},{"prosemirror-state":"vbBo","prosemirror-model":"cBJM","prosemirror-tables":"Tinf"}],"zVKP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getMarkAttrs=i,exports.getMarkRange=a,exports.markIsActive=s,exports.nodeEqualsType=c,exports.nodeIsActive=u;var e=require("prosemirror-utils");function r(e){return t(e)||n(e)||o()}function t(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}function n(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function i(e,t){var n=e.selection,o=n.from,i=n.to,a=[];e.doc.nodesBetween(o,i,function(e){a=[].concat(r(a),r(e.marks))});var s=a.find(function(e){return e.type.name===t.name});return s?s.attrs:{}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e||!r)return!1;var t=e.parent.childAfter(e.parentOffset);if(!t.node)return!1;var n=t.node.marks.find(function(e){return e.type===r});if(!n)return!1;for(var o=e.index(),i=e.start()+t.offset,a=o+1,s=i+t.node.nodeSize;o>0&&n.isInSet(e.parent.child(o-1).marks);)o-=1,i-=e.parent.child(o).nodeSize;for(;a<e.parent.childCount&&n.isInSet(e.parent.child(a).marks);)s+=e.parent.child(a).nodeSize,a+=1;return{from:i,to:s}}function s(e,r){var t=e.selection,n=t.from,o=t.$from,i=t.to;return t.empty?!!r.isInSet(e.storedMarks||o.marks()):!!e.doc.rangeHasMark(n,i,r)}function c(e){var r=e.types,t=e.node;return Array.isArray(r)&&r.includes(t.type)||t.type===r}function u(r,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,e.findSelectedNodeOfType)(t)(r.selection)||(0,e.findParentNode)(function(e){return e.type===t})(r.selection);return Object.keys(n).length&&o?o.node.hasMarkup(t,n):!!o}
},{"prosemirror-utils":"C8Db"}],"W2m1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.addListNodes=p,exports.liftListItem=f,exports.sinkListItem=v,exports.splitListItem=u,exports.wrapInList=s,exports.orderedList=exports.listItem=exports.bulletList=void 0;var e=require("prosemirror-transform"),t=require("prosemirror-model"),r=["ol",0],n=["ul",0],o=["li",0],i={attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:function(e){return{order:e.hasAttribute("start")?+e.getAttribute("start"):1}}}],toDOM:function(e){return 1==e.attrs.order?r:["ol",{start:e.attrs.order},0]}};exports.orderedList=i;var a={parseDOM:[{tag:"ul"}],toDOM:function(){return n}};exports.bulletList=a;var l={parseDOM:[{tag:"li"}],toDOM:function(){return o},defining:!0};function d(e,t){var r={};for(var n in e)r[n]=e[n];for(var o in t)r[o]=t[o];return r}function p(e,t,r){return e.append({ordered_list:d(i,{content:"list_item+",group:r}),bullet_list:d(a,{content:"list_item+",group:r}),list_item:d(l,{content:t})})}function s(r,n){return function(o,i){var a=o.selection,l=a.$from,d=a.$to,p=l.blockRange(d),s=!1,u=p;if(!p)return!1;if(p.depth>=2&&l.node(p.depth-1).type.compatibleContent(r)&&0==p.startIndex){if(0==l.index(p.depth-1))return!1;var f=o.doc.resolve(p.start-2);u=new t.NodeRange(f,f,p.depth),p.endIndex<p.parent.childCount&&(p=new t.NodeRange(l,o.doc.resolve(d.end(p.depth)),p.depth)),s=!0}var m=(0,e.findWrapping)(u,r,n,p);return!!m&&(i&&i(c(o.tr,p,m,s,r).scrollIntoView()),!0)}}function c(r,n,o,i,a){for(var l=t.Fragment.empty,d=o.length-1;d>=0;d--)l=t.Fragment.from(o[d].type.create(o[d].attrs,l));r.step(new e.ReplaceAroundStep(n.start-(i?2:0),n.end,n.start,n.end,new t.Slice(l,0,0),o.length,!0));for(var p=0,s=0;s<o.length;s++)o[s].type==a&&(p=s+1);for(var c=o.length-p,u=n.start+o.length-(i?2:0),f=n.parent,m=n.startIndex,g=n.endIndex,v=!0;m<g;m++,v=!1)!v&&(0,e.canSplit)(r.doc,u,c)&&(r.split(u,c),u+=2*c),u+=f.child(m).nodeSize;return r}function u(r){return function(n,o){var i=n.selection,a=i.$from,l=i.$to,d=i.node;if(d&&d.isBlock||a.depth<2||!a.sameParent(l))return!1;var p=a.node(-1);if(p.type!=r)return!1;if(0==a.parent.content.size){if(2==a.depth||a.node(-3).type!=r||a.index(-2)!=a.node(-2).childCount-1)return!1;if(o){for(var s=t.Fragment.empty,c=a.index(-1)>0,u=a.depth-(c?1:2);u>=a.depth-3;u--)s=t.Fragment.from(a.node(u).copy(s));s=s.append(t.Fragment.from(r.createAndFill()));var f=n.tr.replace(a.before(c?null:-1),a.after(-3),new t.Slice(s,c?3:2,2));f.setSelection(n.selection.constructor.near(f.doc.resolve(a.pos+(c?3:2)))),o(f.scrollIntoView())}return!0}var m=l.pos==a.end()?p.contentMatchAt(0).defaultType:null,g=n.tr.delete(a.pos,l.pos),v=m&&[null,{type:m}];return!!(0,e.canSplit)(g.doc,a.pos,2,v)&&(o&&o(g.split(a.pos,2,v).scrollIntoView()),!0)}}function f(e){return function(t,r){var n=t.selection,o=n.$from,i=n.$to,a=o.blockRange(i,function(t){return t.childCount&&t.firstChild.type==e});return!!a&&(!r||(o.node(a.depth-1).type==e?m(t,r,e,a):g(t,r,a)))}}function m(r,n,o,i){var a=r.tr,l=i.end,d=i.$to.end(i.depth);return l<d&&(a.step(new e.ReplaceAroundStep(l-1,d,l,d,new t.Slice(t.Fragment.from(o.create(null,i.parent.copy())),1,0),1,!0)),i=new t.NodeRange(a.doc.resolve(i.$from.pos),a.doc.resolve(d),i.depth)),n(a.lift(i,(0,e.liftTarget)(i)).scrollIntoView()),!0}function g(r,n,o){for(var i=r.tr,a=o.parent,l=o.end,d=o.endIndex-1,p=o.startIndex;d>p;d--)l-=a.child(d).nodeSize,i.delete(l-1,l+1);var s=i.doc.resolve(o.start),c=s.nodeAfter,u=0==o.startIndex,f=o.endIndex==a.childCount,m=s.node(-1),g=s.index(-1);if(!m.canReplace(g+(u?0:1),g+1,c.content.append(f?t.Fragment.empty:t.Fragment.from(a))))return!1;var v=s.pos,h=v+c.nodeSize;return i.step(new e.ReplaceAroundStep(v-(u?1:0),h+(f?1:0),v+1,h-1,new t.Slice((u?t.Fragment.empty:t.Fragment.from(a.copy(t.Fragment.empty))).append(f?t.Fragment.empty:t.Fragment.from(a.copy(t.Fragment.empty))),u?0:1,f?0:1),u?0:1)),n(i.scrollIntoView()),!0}function v(r){return function(n,o){var i=n.selection,a=i.$from,l=i.$to,d=a.blockRange(l,function(e){return e.childCount&&e.firstChild.type==r});if(!d)return!1;var p=d.startIndex;if(0==p)return!1;var s=d.parent,c=s.child(p-1);if(c.type!=r)return!1;if(o){var u=c.lastChild&&c.lastChild.type==s.type,f=t.Fragment.from(u?r.create():null),m=new t.Slice(t.Fragment.from(r.create(null,t.Fragment.from(s.type.create(null,f)))),u?3:1,0),g=d.start,v=d.end;o(n.tr.step(new e.ReplaceAroundStep(g-(u?3:1),v,g,v,m,1,!0)).scrollIntoView())}return!0}}exports.listItem=l;
},{"prosemirror-transform":"etvU","prosemirror-model":"cBJM"}],"MsRp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.insertText=a,exports.markInputRule=d,exports.markPasteRule=y,exports.nodeInputRule=m,exports.pasteRule=g,exports.removeMark=b,exports.replaceText=x,exports.setInlineBlockType=h,exports.splitToDefaultListItem=k,exports.toggleBlockType=j,exports.toggleList=O,exports.toggleWrap=w,exports.updateMark=I,Object.defineProperty(exports,"autoJoin",{enumerable:!0,get:function(){return e.autoJoin}}),Object.defineProperty(exports,"baseKeymap",{enumerable:!0,get:function(){return e.baseKeymap}}),Object.defineProperty(exports,"chainCommands",{enumerable:!0,get:function(){return e.chainCommands}}),Object.defineProperty(exports,"createParagraphNear",{enumerable:!0,get:function(){return e.createParagraphNear}}),Object.defineProperty(exports,"deleteSelection",{enumerable:!0,get:function(){return e.deleteSelection}}),Object.defineProperty(exports,"exitCode",{enumerable:!0,get:function(){return e.exitCode}}),Object.defineProperty(exports,"joinBackward",{enumerable:!0,get:function(){return e.joinBackward}}),Object.defineProperty(exports,"joinDown",{enumerable:!0,get:function(){return e.joinDown}}),Object.defineProperty(exports,"joinForward",{enumerable:!0,get:function(){return e.joinForward}}),Object.defineProperty(exports,"joinUp",{enumerable:!0,get:function(){return e.joinUp}}),Object.defineProperty(exports,"lift",{enumerable:!0,get:function(){return e.lift}}),Object.defineProperty(exports,"liftEmptyBlock",{enumerable:!0,get:function(){return e.liftEmptyBlock}}),Object.defineProperty(exports,"macBaseKeymap",{enumerable:!0,get:function(){return e.macBaseKeymap}}),Object.defineProperty(exports,"newlineInCode",{enumerable:!0,get:function(){return e.newlineInCode}}),Object.defineProperty(exports,"pcBaseKeymap",{enumerable:!0,get:function(){return e.pcBaseKeymap}}),Object.defineProperty(exports,"selectAll",{enumerable:!0,get:function(){return e.selectAll}}),Object.defineProperty(exports,"selectNodeBackward",{enumerable:!0,get:function(){return e.selectNodeBackward}}),Object.defineProperty(exports,"selectNodeForward",{enumerable:!0,get:function(){return e.selectNodeForward}}),Object.defineProperty(exports,"selectParentNode",{enumerable:!0,get:function(){return e.selectParentNode}}),Object.defineProperty(exports,"setBlockType",{enumerable:!0,get:function(){return e.setBlockType}}),Object.defineProperty(exports,"splitBlock",{enumerable:!0,get:function(){return e.splitBlock}}),Object.defineProperty(exports,"splitBlockKeepMarks",{enumerable:!0,get:function(){return e.splitBlockKeepMarks}}),Object.defineProperty(exports,"toggleMark",{enumerable:!0,get:function(){return e.toggleMark}}),Object.defineProperty(exports,"wrapIn",{enumerable:!0,get:function(){return e.wrapIn}}),Object.defineProperty(exports,"addListNodes",{enumerable:!0,get:function(){return t.addListNodes}}),Object.defineProperty(exports,"liftListItem",{enumerable:!0,get:function(){return t.liftListItem}}),Object.defineProperty(exports,"sinkListItem",{enumerable:!0,get:function(){return t.sinkListItem}}),Object.defineProperty(exports,"splitListItem",{enumerable:!0,get:function(){return t.splitListItem}}),Object.defineProperty(exports,"wrapInList",{enumerable:!0,get:function(){return t.wrapInList}}),Object.defineProperty(exports,"textblockTypeInputRule",{enumerable:!0,get:function(){return r.textblockTypeInputRule}}),Object.defineProperty(exports,"wrappingInputRule",{enumerable:!0,get:function(){return r.wrappingInputRule}});var e=require("prosemirror-commands"),t=require("prosemirror-schema-list"),r=require("prosemirror-inputrules"),n=require("prosemirror-state"),o=require("prosemirror-model"),i=require("tiptap-utils"),u=require("prosemirror-utils");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(t,r){var n=t.selection.$from.pos.pos;return r(t.tr.insertText(e,n)),!0}}function c(e){return p(e)||l(e)||s()}function p(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function l(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function f(e,t,r){var n=[];return r.doc.nodesBetween(e,t,function(e,t){n=[].concat(c(n),c(e.marks.map(function(r){return{start:t,end:t+e.nodeSize,mark:r}})))}),n}function d(e,t,n){return new r.InputRule(e,function(e,r,o,i){var u=n instanceof Function?n(r):n,a=e.tr,c=r.length-1,p=i,l=o;if(r[c]){var s=o+r[0].indexOf(r[c-1]),d=s+r[c-1].length-1,m=s+r[c-1].lastIndexOf(r[c]),g=m+r[c].length;if(f(o,i,e).filter(function(e){return e.mark.type.excluded.find(function(e){return e.name===t.name})}).filter(function(e){return e.end>s}).length)return!1;g<d&&a.delete(g,d),m>s&&a.delete(s,m),p=(l=s)+r[c].length}return a.addMark(l,p,t.create(u)),a.removeStoredMark(t),a})}function m(e,t,n){return new r.InputRule(e,function(e,r,o,i){var u=n instanceof Function?n(r):n,a=e.tr;return r[0]&&a.replaceWith(o-1,i,t.create(u)),a})}function g(e,t,r){return new n.Plugin({props:{transformPasted:function(n){return new o.Slice(function n(i){var u=[];return i.forEach(function(o){if(o.isText){var i,a=o.text,c=0;do{if(i=e.exec(a)){var p=i.index,l=p+i[0].length,s=r instanceof Function?r(i[0]):r;p>0&&u.push(o.cut(c,p)),u.push(o.cut(p,l).mark(t.create(s).addToSet(o.marks))),c=l}}while(i);c<a.length&&u.push(o.cut(c))}else u.push(o.copy(n(o.content)))}),o.Fragment.fromArray(u)}(n.content),n.openStart,n.openEnd)}}})}function y(e,t,r){return new n.Plugin({props:{transformPasted:function(n){return new o.Slice(function n(i){var u=[];return i.forEach(function(o){if(o.isText){for(var i,a=o.text,c=0,p=!!o.marks.filter(function(e){return"link"===e.type.name})[0];!p&&null!==(i=e.exec(a));)if(i[1]){var l=i.index,s=l+i[0].length,f=l+i[0].indexOf(i[1]),d=f+i[1].length,m=r instanceof Function?r(i):r;l>0&&u.push(o.cut(c,l)),u.push(o.cut(f,d).mark(t.create(m).addToSet(o.marks))),c=s}c<a.length&&u.push(o.cut(c))}else u.push(o.copy(n(o.content)))}),o.Fragment.fromArray(u)}(n.content),n.openStart,n.openEnd)}}})}function b(e){return function(t,r){var n=t.tr,o=t.selection,u=o.from,a=o.to,c=o.$from;if(o.empty){var p=(0,i.getMarkRange)(c,e);u=p.from,a=p.to}return n.removeMark(u,a,e),r(n)}}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(n,o){var i=n.selection,u=i.$from,a=i.$to,c=u.index(),p=e?e.from:u.pos,l=e?e.to:a.pos;return!!u.parent.canReplaceWith(c,c,t)&&(o&&o(n.tr.replaceWith(p,l,t.create(r))),!0)}}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(r,n){var o=r.selection.$from,i=o.index();return!!o.parent.canReplaceWith(i,i,e)&&(n&&n(r.tr.replaceSelectionWith(e.create(t))),!0)}}function v(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0,o=e.resolve(t),i=o.depth-r,u=n&&n[n.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!u.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(var a=o.depth-1,c=r-2;a>i;a--,c--){var p=o.node(a),l=o.index(a);if(p.type.spec.isolating)return!1;var s=p.content.cutByIndex(l,p.childCount),f=n&&n[c]||p;if(f!=p&&(s=s.replaceChild(0,f.type.create(f.attrs))),!p.canReplace(l+1,p.childCount))return!1}var d=o.indexAfter(i),m=n&&n[0];return o.node(i).canReplaceWith(d,d,m?m.type:o.node(i+1).type)}function k(e){return function(t,r){var n=t.selection,i=n.$from,u=n.$to,a=n.node;if(a&&a.isBlock||i.depth<2||!i.sameParent(u))return!1;var c=i.node(-1);if(c.type!=e)return!1;if(0==i.parent.content.size){if(2==i.depth||i.node(-3).type!=e||i.index(-2)!=i.node(-2).childCount-1)return!1;if(r){for(var p=o.Fragment.empty,l=i.index(-1)>0,s=i.depth-(l?1:2);s>=i.depth-3;s--)p=o.Fragment.from(i.node(s).copy(p));p=p.append(o.Fragment.from(e.createAndFill()));var f=t.tr.replace(i.before(l?null:-1),i.after(-3),new o.Slice(p,l?3:2,2));f.setSelection(t.selection.constructor.near(f.doc.resolve(i.pos+(l?3:2)))),r(f.scrollIntoView())}return!0}var d=u.pos==i.end()?c.contentMatchAt(i.indexAfter(-1)).defaultType:null,m=t.tr.delete(i.pos,u.pos),g=d&&[{type:e},{type:d}];return g||(g=[{type:e},null]),!!v(m.doc,i.pos,2,g)&&(r&&r(m.split(i.pos,2,g).scrollIntoView()),!0)}}function j(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(o,u,a){return(0,i.nodeIsActive)(o,t,n)?(0,e.setBlockType)(r)(o,u,a):(0,e.setBlockType)(t,n)(o,u,a)}}function P(e,t){return e.type===t.nodes.bullet_list||e.type===t.nodes.ordered_list||e.type===t.nodes.todo_list}function O(e,r){return function(n,o,i){var a=n.schema,c=n.selection,p=c.$from,l=c.$to,s=p.blockRange(l);if(!s)return!1;var f=(0,u.findParentNode)(function(e){return P(e,a)})(c);if(s.depth>=1&&f&&s.depth-f.depth<=1){if(f.node.type===e)return(0,t.liftListItem)(r)(n,o,i);if(P(f.node,a)&&e.validContent(f.node.content)){var d=n.tr;return d.setNodeMarkup(f.pos,e),o&&o(d),!1}}return(0,t.wrapInList)(e)(n,o,i)}}function w(t){return function(r,n,o){return(0,i.nodeIsActive)(r,t)?(0,e.lift)(r,n):(0,e.wrapIn)(t)(r,n,o)}}function I(e,t){return function(r,n){var o=r.tr,u=r.selection,a=r.doc,c=u.from,p=u.to,l=u.$from;if(u.empty){var s=(0,i.getMarkRange)(l,e);c=s.from,p=s.to}return a.rangeHasMark(c,p,e)&&o.removeMark(c,p,e),o.addMark(c,p,e.create(t)),n(o)}}
},{"prosemirror-commands":"JHGC","prosemirror-schema-list":"W2m1","prosemirror-inputrules":"OOLA","prosemirror-state":"vbBo","prosemirror-model":"cBJM","tiptap-utils":"zVKP","prosemirror-utils":"C8Db"}],"fXr4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"NodeSelection",{enumerable:!0,get:function(){return e.NodeSelection}}),Object.defineProperty(exports,"Plugin",{enumerable:!0,get:function(){return e.Plugin}}),Object.defineProperty(exports,"PluginKey",{enumerable:!0,get:function(){return e.PluginKey}}),Object.defineProperty(exports,"TextSelection",{enumerable:!0,get:function(){return e.TextSelection}}),exports.Text=exports.Paragraph=exports.Node=exports.Mark=exports.Extension=exports.EditorMenuBubble=exports.EditorMenuBar=exports.EditorFloatingMenu=exports.EditorContent=exports.Editor=exports.Doc=void 0;var e=require("prosemirror-state"),t=require("prosemirror-view"),n=require("prosemirror-model"),i=require("prosemirror-dropcursor"),r=require("prosemirror-gapcursor"),o=require("prosemirror-keymap"),s=require("prosemirror-commands"),u=require("prosemirror-inputrules"),a=require("tiptap-utils"),c=h(require("vue")),l=require("tiptap-commands");function h(e){return e&&e.__esModule?e:{default:e}}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach(function(t){m(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?x(e):t}function O(e,t){return S(e)||j(e,t)||N()}function M(e){return A(e)||E(e)||C()}function A(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function S(e){if(Array.isArray(e))return e}function E(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function j(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done)&&(n.push(s.value),!t||n.length!==t);i=!0);}catch(a){r=!0,o=a}finally{try{i||null==u.return||u.return()}finally{if(r)throw o}}return n}}function C(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function R(e){return e.replace(/(?:^\w|[A-Z]|\b\w)/g,function(e,t){return 0===t?e.toLowerCase():e.toUpperCase()}).replace(/\s+/g,"")}var T=function(){function e(t,n){var i=n.editor,r=n.extension,o=n.parent,s=n.node,u=n.view,a=n.decorations,c=n.getPos;p(this,e),this.component=t,this.editor=i,this.extension=r,this.parent=o,this.node=s,this.view=u,this.decorations=a,this.isNode=!!this.node.marks,this.isMark=!this.isNode,this.getPos=this.isMark?this.getMarkPos:c,this.captureEvents=!0,this.dom=this.createDOM(),this.contentDOM=this.vm.$refs.content}return v(e,[{key:"createDOM",value:function(){var e=this,t=c.default.extend(this.component),n={editor:this.editor,node:this.node,view:this.view,getPos:function(){return e.getPos()},decorations:this.decorations,selected:!1,options:this.extension.options,updateAttrs:function(t){return e.updateAttrs(t)}};return"function"==typeof this.extension.setSelection&&(this.setSelection=this.extension.setSelection),this.vm=new t({parent:this.parent,propsData:n}).$mount(),this.vm.$el}},{key:"update",value:function(e,t){return e.type===this.node.type&&(e===this.node&&this.decorations===t||(this.node=e,this.decorations=t,this.updateComponentProps({node:e,decorations:t}),!0))}},{key:"updateComponentProps",value:function(e){var t=this;if(this.vm._props){var n=c.default.config.silent;c.default.config.silent=!0,Object.entries(e).forEach(function(e){var n=O(e,2),i=n[0],r=n[1];t.vm._props[i]=r}),c.default.config.silent=n}}},{key:"updateAttrs",value:function(e){if(this.view.editable){var t=this.view.state,n=this.node.type,i=this.getPos(),r=g({},this.node.attrs,{},e),o=this.isMark?t.tr.removeMark(i.from,i.to,n).addMark(i.from,i.to,n.create(r)):t.tr.setNodeMarkup(i,null,r);this.view.dispatch(o)}}},{key:"ignoreMutation",value:function(e){return"selection"!==e.type&&(!this.contentDOM||!this.contentDOM.contains(e.target))}},{key:"stopEvent",value:function(e){var t=this;if("function"==typeof this.extension.stopEvent)return this.extension.stopEvent(e);var n=!!this.extension.schema.draggable;if(n&&"mousedown"===e.type){var i=e.target.closest&&e.target.closest("[data-drag-handle]");i&&(this.dom===i||this.dom.contains(i))&&(this.captureEvents=!1,document.addEventListener("dragend",function(){t.captureEvents=!0},{once:!0}))}var r="copy"===e.type,o="paste"===e.type,s="cut"===e.type,u=e.type.startsWith("drag")||"drop"===e.type;return!(n&&u||r||o||s)&&this.captureEvents}},{key:"selectNode",value:function(){this.updateComponentProps({selected:!0})}},{key:"deselectNode",value:function(){this.updateComponentProps({selected:!1})}},{key:"getMarkPos",value:function(){var e=this.view.posAtDOM(this.dom),t=this.view.state.doc.resolve(e);return(0,a.getMarkRange)(t,this.node.type)}},{key:"destroy",value:function(){this.vm.$destroy()}}]),e}(),_=function(){function e(){p(this,e)}return v(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){for(var t=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];this._callbacks=this._callbacks||{};var o=this._callbacks[e];return o&&o.forEach(function(e){return e.apply(t,i)}),this}},{key:"off",value:function(e,t){if(arguments.length){var n=this._callbacks?this._callbacks[e]:null;n&&(t?this._callbacks[e]=n.filter(function(e){return e!==t}):delete this._callbacks[e])}else this._callbacks={};return this}}]),e}(),D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,e),this.options=g({},this.defaultOptions,{},t)}return v(e,[{key:"init",value:function(){return null}},{key:"bindEditor",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.editor=e}},{key:"inputRules",value:function(){return[]}},{key:"pasteRules",value:function(){return[]}},{key:"keys",value:function(){return{}}},{key:"name",get:function(){return null}},{key:"type",get:function(){return"extension"}},{key:"update",get:function(){return function(){}}},{key:"defaultOptions",get:function(){return{}}},{key:"plugins",get:function(){return[]}}]),e}();exports.Extension=D;var H=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1?arguments[1]:void 0;p(this,e),t.forEach(function(e){e.bindEditor(n),e.init()}),this.extensions=t}return v(e,[{key:"keymaps",value:function(e){var t=e.schema,n=this.extensions.filter(function(e){return["extension"].includes(e.type)}).filter(function(e){return e.keys}).map(function(e){return e.keys({schema:t})}),i=this.extensions.filter(function(e){return["node","mark"].includes(e.type)}).filter(function(e){return e.keys}).map(function(e){return e.keys({type:t["".concat(e.type,"s")][e.name],schema:t})});return[].concat(M(n),M(i)).map(function(e){return(0,o.keymap)(e)})}},{key:"inputRules",value:function(e){var t=e.schema,n=e.excludedExtensions;if(!(n instanceof Array)&&n)return[];var i=n instanceof Array?this.extensions.filter(function(e){return!n.includes(e.name)}):this.extensions,r=i.filter(function(e){return["extension"].includes(e.type)}).filter(function(e){return e.inputRules}).map(function(e){return e.inputRules({schema:t})}),o=i.filter(function(e){return["node","mark"].includes(e.type)}).filter(function(e){return e.inputRules}).map(function(e){return e.inputRules({type:t["".concat(e.type,"s")][e.name],schema:t})});return[].concat(M(r),M(o)).reduce(function(e,t){return[].concat(M(e),M(t))},[])}},{key:"pasteRules",value:function(e){var t=e.schema,n=e.excludedExtensions;if(!(n instanceof Array)&&n)return[];var i=n instanceof Array?this.extensions.filter(function(e){return!n.includes(e.name)}):this.extensions,r=i.filter(function(e){return["extension"].includes(e.type)}).filter(function(e){return e.pasteRules}).map(function(e){return e.pasteRules({schema:t})}),o=i.filter(function(e){return["node","mark"].includes(e.type)}).filter(function(e){return e.pasteRules}).map(function(e){return e.pasteRules({type:t["".concat(e.type,"s")][e.name],schema:t})});return[].concat(M(r),M(o)).reduce(function(e,t){return[].concat(M(e),M(t))},[])}},{key:"commands",value:function(e){var t=e.schema,n=e.view;return this.extensions.filter(function(e){return e.commands}).reduce(function(e,i){var r=i.name,o=i.type,s={},u=i.commands(g({schema:t},["node","mark"].includes(o)?{type:t["".concat(o,"s")][r]}:{})),a=function(e,t){return!!n.editable&&(n.focus(),e(t)(n.state,n.dispatch,n))},c=function(e,t){Array.isArray(t)?s[e]=function(e){return t.forEach(function(t){return a(t,e)})}:"function"==typeof t&&(s[e]=function(e){return a(t,e)})};return"object"===d(u)?Object.entries(u).forEach(function(e){var t=O(e,2),n=t[0],i=t[1];c(n,i)}):c(r,u),g({},e,{},s)},{})}},{key:"nodes",get:function(){return this.extensions.filter(function(e){return"node"===e.type}).reduce(function(e,t){return g({},e,m({},t.name,t.schema))},{})}},{key:"options",get:function(){var e=this.view;return this.extensions.reduce(function(t,n){return g({},t,m({},n.name,new Proxy(n.options,{set:function(t,i,r){var o=t[i]!==r;return Object.assign(t,m({},i,r)),o&&n.update(e),!0}})))},{})}},{key:"marks",get:function(){return this.extensions.filter(function(e){return"mark"===e.type}).reduce(function(e,t){return g({},e,m({},t.name,t.schema))},{})}},{key:"plugins",get:function(){return this.extensions.filter(function(e){return e.plugins}).reduce(function(e,t){var n=t.plugins;return[].concat(M(e),M(n))},[])}}]),e}();function I(e){var t=document.createElement("style");t.type="text/css",t.textContent=e;var n=document.head,i=n.firstChild;i?n.insertBefore(t,i):n.appendChild(t)}var B=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(this,t),P(this,b(t).call(this,e))}return k(t,D),v(t,[{key:"command",value:function(){return function(){}}},{key:"type",get:function(){return"mark"}},{key:"view",get:function(){return null}},{key:"schema",get:function(){return null}}]),t}();function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.min(Math.max(parseInt(e,10),t),n)}exports.Mark=B;var $=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(this,t),P(this,b(t).call(this,e))}return k(t,D),v(t,[{key:"command",value:function(){return function(){}}},{key:"type",get:function(){return"node"}},{key:"view",get:function(){return null}},{key:"schema",get:function(){return null}}]),t}();exports.Node=$;var U=function(e){function t(){return p(this,t),P(this,b(t).apply(this,arguments))}return k(t,$),v(t,[{key:"name",get:function(){return"doc"}},{key:"schema",get:function(){return{content:"block+"}}}]),t}();exports.Doc=U;var z=function(e){function t(){return p(this,t),P(this,b(t).apply(this,arguments))}return k(t,$),v(t,[{key:"commands",value:function(e){var t=e.type;return function(){return(0,l.setBlockType)(t)}}},{key:"name",get:function(){return"paragraph"}},{key:"schema",get:function(){return{content:"inline*",group:"block",draggable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}}}}]),t}();exports.Paragraph=z;var L=function(e){function t(){return p(this,t),P(this,b(t).apply(this,arguments))}return k(t,$),v(t,[{key:"name",get:function(){return"text"}},{key:"schema",get:function(){return{group:"inline"}}}]),t}();exports.Text=L;var q='.ProseMirror {\n  position: relative;\n}\n\n.ProseMirror {\n  word-wrap: break-word;\n  white-space: pre-wrap;\n  -webkit-font-variant-ligatures: none;\n  font-variant-ligatures: none;\n}\n\n.ProseMirror pre {\n  white-space: pre-wrap;\n}\n\n.ProseMirror-gapcursor {\n  display: none;\n  pointer-events: none;\n  position: absolute;\n}\n\n.ProseMirror-gapcursor:after {\n  content: "";\n  display: block;\n  position: absolute;\n  top: -2px;\n  width: 20px;\n  border-top: 1px solid black;\n  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;\n}\n\n@keyframes ProseMirror-cursor-blink {\n  to {\n    visibility: hidden;\n  }\n}\n\n.ProseMirror-hideselection *::selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection *::-moz-selection {\n  background: transparent;\n}\n\n.ProseMirror-hideselection * {\n  caret-color: transparent;\n}\n\n.ProseMirror-focused .ProseMirror-gapcursor {\n  display: block;\n}\n',J=function(c){function l(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return p(this,l),(e=P(this,b(l).call(this))).defaultOptions={editorProps:{},editable:!0,autoFocus:null,extensions:[],content:"",topNode:"doc",emptyDocument:{type:"doc",content:[{type:"paragraph"}]},useBuiltInExtensions:!0,disableInputRules:!1,disablePasteRules:!1,dropCursor:{},parseOptions:{},injectCSS:!0,onInit:function(){},onTransaction:function(){},onUpdate:function(){},onFocus:function(){},onBlur:function(){},onPaste:function(){},onDrop:function(){}},e.events=["init","transaction","update","focus","blur","paste","drop"],e.init(t),e}return k(l,_),v(l,[{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.setOptions(g({},this.defaultOptions,{},t)),this.focused=!1,this.selection={from:0,to:0},this.element=document.createElement("div"),this.extensions=this.createExtensions(),this.nodes=this.createNodes(),this.marks=this.createMarks(),this.schema=this.createSchema(),this.plugins=this.createPlugins(),this.keymaps=this.createKeymaps(),this.inputRules=this.createInputRules(),this.pasteRules=this.createPasteRules(),this.view=this.createView(),this.commands=this.createCommands(),this.setActiveNodesAndMarks(),this.options.injectCSS&&I(q),null!==this.options.autoFocus&&this.focus(this.options.autoFocus),this.events.forEach(function(t){e.on(t,e.options[R("on ".concat(t))]||function(){})}),this.emit("init",{view:this.view,state:this.state}),this.extensions.view=this.view}},{key:"setOptions",value:function(e){this.options=g({},this.options,{},e),this.view&&this.state&&this.view.updateState(this.state)}},{key:"createExtensions",value:function(){return new H([].concat(M(this.builtInExtensions),M(this.options.extensions)),this)}},{key:"createPlugins",value:function(){return this.extensions.plugins}},{key:"createKeymaps",value:function(){return this.extensions.keymaps({schema:this.schema})}},{key:"createInputRules",value:function(){return this.extensions.inputRules({schema:this.schema,excludedExtensions:this.options.disableInputRules})}},{key:"createPasteRules",value:function(){return this.extensions.pasteRules({schema:this.schema,excludedExtensions:this.options.disablePasteRules})}},{key:"createCommands",value:function(){return this.extensions.commands({schema:this.schema,view:this.view})}},{key:"createNodes",value:function(){return this.extensions.nodes}},{key:"createMarks",value:function(){return this.extensions.marks}},{key:"createSchema",value:function(){return new n.Schema({topNode:this.options.topNode,nodes:this.nodes,marks:this.marks})}},{key:"createState",value:function(){var t=this;return e.EditorState.create({schema:this.schema,doc:this.createDocument(this.options.content),plugins:[].concat(M(this.plugins),[(0,u.inputRules)({rules:this.inputRules})],M(this.pasteRules),M(this.keymaps),[(0,o.keymap)({Backspace:u.undoInputRule}),(0,o.keymap)(s.baseKeymap),(0,i.dropCursor)(this.options.dropCursor),(0,r.gapCursor)(),new e.Plugin({key:new e.PluginKey("editable"),props:{editable:function(){return t.options.editable}}}),new e.Plugin({props:{attributes:{tabindex:0},handleDOMEvents:{focus:function(e,n){t.focused=!0,t.emit("focus",{event:n,state:e.state,view:e});var i=t.state.tr.setMeta("focused",!0);t.view.dispatch(i)},blur:function(e,n){t.focused=!1,t.emit("blur",{event:n,state:e.state,view:e});var i=t.state.tr.setMeta("focused",!1);t.view.dispatch(i)}}}}),new e.Plugin({props:this.options.editorProps})])})}},{key:"createDocument",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.parseOptions;if(null===e)return this.schema.nodeFromJSON(this.options.emptyDocument);if("object"===d(e))try{return this.schema.nodeFromJSON(e)}catch(r){return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),this.schema.nodeFromJSON(this.options.emptyDocument)}if("string"==typeof e){var i=document.createElement("div");return i.innerHTML=e.trim(),n.DOMParser.fromSchema(this.schema).parse(i,t)}return!1}},{key:"createView",value:function(){var e=this;return new t.EditorView(this.element,{state:this.createState(),handlePaste:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.emit.apply(e,["paste"].concat(n))},handleDrop:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.emit.apply(e,["drop"].concat(n))},dispatchTransaction:this.dispatchTransaction.bind(this)})}},{key:"setParentComponent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&this.view.setProps({nodeViews:this.initNodeViews({parent:e,extensions:[].concat(M(this.builtInExtensions),M(this.options.extensions))})})}},{key:"initNodeViews",value:function(e){var t=this,n=e.parent;return e.extensions.filter(function(e){return["node","mark"].includes(e.type)}).filter(function(e){return e.view}).reduce(function(e,i){return g({},e,m({},i.name,function(e,r,o,s){var u=i.view;return new T(u,{editor:t,extension:i,parent:n,node:e,view:r,getPos:o,decorations:s})}))},{})}},{key:"dispatchTransaction",value:function(e){var t=this.state.apply(e);this.view.updateState(t),this.selection={from:this.state.selection.from,to:this.state.selection.to},this.setActiveNodesAndMarks(),this.emit("transaction",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e}),e.docChanged&&!e.getMeta("preventUpdate")&&this.emitUpdate(e)}},{key:"emitUpdate",value:function(e){this.emit("update",{getHTML:this.getHTML.bind(this),getJSON:this.getJSON.bind(this),state:this.state,transaction:e})}},{key:"resolveSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.selection&&null===e)return this.selection;if("start"===e||!0===e)return{from:0,to:0};if("end"===e){var t=this.state.doc;return{from:t.content.size,to:t.content.size}}return{from:e,to:e}}},{key:"focus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!(this.view.focused&&null===t||!1===t)){var n=this.resolveSelection(t),i=n.from,r=n.to;this.setSelection(i,r),setTimeout(function(){return e.view.focus()},10)}}},{key:"setSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.state,r=i.doc,o=i.tr,s=V(t,0,r.content.size),u=V(n,0,r.content.size),a=e.TextSelection.create(r,s,u),c=o.setSelection(a);this.view.dispatch(c)}},{key:"blur",value:function(){this.view.dom.blur()}},{key:"getSchemaJSON",value:function(){return JSON.parse(JSON.stringify({nodes:this.extensions.nodes,marks:this.extensions.marks}))}},{key:"getHTML",value:function(){var e=document.createElement("div"),t=n.DOMSerializer.fromSchema(this.schema).serializeFragment(this.state.doc.content);return e.appendChild(t),e.innerHTML}},{key:"getJSON",value:function(){return this.state.doc.toJSON()}},{key:"setContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,r=this.state,o=r.doc,s=r.tr,u=this.createDocument(t,i),a=e.TextSelection.create(o,0,o.content.size),c=s.setSelection(a).replaceSelectionWith(u,!1).setMeta("preventUpdate",!n);this.view.dispatch(c)}},{key:"clearContent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.setContent(this.options.emptyDocument,e)}},{key:"setActiveNodesAndMarks",value:function(){var e=this;this.activeMarks=Object.entries(this.schema.marks).reduce(function(t,n){var i=O(n,2),r=i[0],o=i[1];return g({},t,m({},r,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.markIsActive)(e.state,o,t)}))},{}),this.activeMarkAttrs=Object.entries(this.schema.marks).reduce(function(t,n){var i=O(n,2),r=i[0],o=i[1];return g({},t,m({},r,(0,a.getMarkAttrs)(e.state,o)))},{}),this.activeNodes=Object.entries(this.schema.nodes).reduce(function(t,n){var i=O(n,2),r=i[0],o=i[1];return g({},t,m({},r,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,a.nodeIsActive)(e.state,o,t)}))},{})}},{key:"getMarkAttrs",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.activeMarkAttrs[e]}},{key:"registerPlugin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e){var t=this.state.reconfigure({plugins:this.state.plugins.concat([e])});this.view.updateState(t)}}},{key:"unregisterPlugin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&this.view.docView){var t=this.state.reconfigure({plugins:this.state.plugins.filter(function(t){return!t.key.startsWith("".concat(e,"$"))})});this.view.updateState(t)}}},{key:"destroy",value:function(){this.view&&this.view.destroy()}},{key:"builtInExtensions",get:function(){return this.options.useBuiltInExtensions?[new U,new L,new z]:[]}},{key:"state",get:function(){return this.view?this.view.state:null}},{key:"isActive",get:function(){return Object.entries(g({},this.activeMarks,{},this.activeNodes)).reduce(function(e,t){var n=O(t,2),i=n[0],r=n[1];return g({},e,m({},i,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(e)}))},{})}}]),l}();exports.Editor=J;var F={props:{editor:{default:null,type:Object}},watch:{editor:{immediate:!0,handler:function(e){var t=this;e&&e.element&&this.$nextTick(function(){t.$el.appendChild(e.element.firstChild),e.setParentComponent(t)})}}},render:function(e){return e("div")},beforeDestroy:function(){this.editor.element=this.$el}};exports.EditorContent=F;var K=function(){function e(t){var n=this,i=t.options;p(this,e),this.options=i,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler),this.options.editor.on("blur",function(){n.preventHide?n.preventHide=!1:n.options.editor.emit("menubar:focusUpdate",!1)})}return v(e,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler)}}]),e}();function W(t){return new e.Plugin({key:new e.PluginKey("menu_bar"),view:function(e){return new K({editorView:e,options:t})}})}var Z={props:{editor:{default:null,type:Object}},data:function(){return{focused:!1}},watch:{editor:{immediate:!0,handler:function(e){var t=this;e&&this.$nextTick(function(){e.registerPlugin(W({editor:e,element:t.$el})),t.focused=e.focused,e.on("focus",function(){t.focused=!0}),e.on("menubar:focusUpdate",function(e){t.focused=e})})}}},render:function(){return this.editor?this.$scopedSlots.default({focused:this.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor)}):null}};function G(e,t,n){var i=document.createRange();return i.setEnd(e,null==n?e.nodeValue.length:n),i.setStart(e,t||0),i}function Q(e,t){var n=e.getClientRects();return n.length?n[t<0?0:n.length-1]:e.getBoundingClientRect()}function X(e,t){var n,i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=e.docView.domFromPos(t),s=o.node,u=o.offset;if(3===s.nodeType)r&&u<s.nodeValue.length?(i=Q(G(s,u-1,u),-1),n="right"):u<s.nodeValue.length&&(i=Q(G(s,u,u+1),-1),n="left");else if(s.firstChild){if(u<s.childNodes.length){var a=s.childNodes[u];i=Q(3===a.nodeType?G(a):a,-1),n="left"}if((!i||i.top===i.bottom)&&u){var c=s.childNodes[u-1];i=Q(3===c.nodeType?G(c):c,1),n="right"}}else i=s.getBoundingClientRect(),n="left";var l=i[n];return{top:i.top,bottom:i.bottom,left:l,right:l}}exports.EditorMenuBar=Z;var Y=function(){function e(t){var n=this,i=t.options,r=t.editorView;p(this,e),this.options=g({},{element:null,keepInBounds:!0,onUpdate:function(){return!1}},{},i),this.editorView=r,this.isActive=!1,this.left=0,this.bottom=0,this.top=0,this.preventHide=!1,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler),this.options.editor.on("focus",function(e){var t=e.view;n.update(t)}),this.options.editor.on("blur",function(e){var t=e.event;n.preventHide?n.preventHide=!1:n.hide(t)})}return v(e,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"update",value:function(e,t){var n=e.state;if(!(e.composing||t&&t.doc.eq(n.doc)&&t.selection.eq(n.selection)))if(n.selection.empty)this.hide();else{var i=n.selection,r=i.from,o=i.to,s=X(e,r),u=X(e,o,!0),a=this.options.element.offsetParent;if(a){var c=a.getBoundingClientRect(),l=this.options.element.getBoundingClientRect(),h=(s.left+u.left)/2-c.left;this.left=Math.round(this.options.keepInBounds?Math.min(c.width-l.width/2,Math.max(h,l.width/2)):h),this.bottom=Math.round(c.bottom-s.top),this.top=Math.round(u.bottom-c.top),this.isActive=!0,this.sendUpdate()}else this.hide()}}},{key:"sendUpdate",value:function(){this.options.onUpdate({isActive:this.isActive,left:this.left,bottom:this.bottom,top:this.top})}},{key:"hide",value:function(e){e&&e.relatedTarget&&this.options.element.parentNode.contains(e.relatedTarget)||(this.isActive=!1,this.sendUpdate())}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler)}}]),e}();function ee(t){return new e.Plugin({key:new e.PluginKey("menu_bubble"),view:function(e){return new Y({editorView:e,options:t})}})}var te={props:{editor:{default:null,type:Object},keepInBounds:{default:!0,type:Boolean}},data:function(){return{menu:{isActive:!1,left:0,bottom:0}}},watch:{editor:{immediate:!0,handler:function(e){var t=this;e&&this.$nextTick(function(){e.registerPlugin(ee({editor:e,element:t.$el,keepInBounds:t.keepInBounds,onUpdate:function(e){e.isActive&&!1===t.menu.isActive?t.$emit("show",e):e.isActive||!0!==t.menu.isActive||t.$emit("hide",e),t.menu=e}}))})}}},render:function(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy:function(){this.editor.unregisterPlugin("menu_bubble")}};exports.EditorMenuBubble=te;var ne=function(){function e(t){var n=this,i=t.options,r=t.editorView;p(this,e),this.options=g({},{resizeObserver:!0,element:null,onUpdate:function(){return!1}},{},i),this.preventHide=!1,this.editorView=r,this.isActive=!1,this.top=0,this.mousedownHandler=this.handleClick.bind(this),this.options.element.addEventListener("mousedown",this.mousedownHandler),this.options.editor.on("focus",function(e){var t=e.view;n.update(t)}),this.options.editor.on("blur",function(e){var t=e.event;n.preventHide?n.preventHide=!1:n.hide(t)}),this.options.resizeObserver&&window.ResizeObserver&&(this.resizeObserver=new ResizeObserver(function(){n.isActive&&n.update(n.editorView)}),this.resizeObserver.observe(this.editorView.dom))}return v(e,[{key:"handleClick",value:function(){this.preventHide=!0}},{key:"update",value:function(e,t){var n=e.state;if(!(t&&t.doc.eq(n.doc)&&t.selection.eq(n.selection)))if(n.selection.empty){var i=e.domAtPos(n.selection.anchor);if("<br>"===i.node.innerHTML&&"P"===i.node.tagName&&i.node.parentNode===e.dom){var r=this.options.element.offsetParent;if(r){var o=r.getBoundingClientRect(),s=e.coordsAtPos(n.selection.anchor).top-o.top;this.isActive=!0,this.top=s,this.sendUpdate()}else this.hide()}else this.hide()}else this.hide()}},{key:"sendUpdate",value:function(){this.options.onUpdate({isActive:this.isActive,top:this.top})}},{key:"hide",value:function(e){e&&e.relatedTarget&&this.options.element.parentNode.contains(e.relatedTarget)||(this.isActive=!1,this.sendUpdate())}},{key:"destroy",value:function(){this.options.element.removeEventListener("mousedown",this.mousedownHandler),this.resizeObserver&&this.resizeObserver.unobserve(this.editorView.dom)}}]),e}();function ie(t){return new e.Plugin({key:new e.PluginKey("floating_menu"),view:function(e){return new ne({editorView:e,options:t})}})}var re={props:{editor:{default:null,type:Object}},data:function(){return{menu:{isActive:!1,left:0,bottom:0}}},watch:{editor:{immediate:!0,handler:function(e){var t=this;e&&this.$nextTick(function(){e.registerPlugin(ie({editor:e,element:t.$el,onUpdate:function(e){e.isActive&&!1===t.menu.isActive?t.$emit("show",e):e.isActive||!0!==t.menu.isActive||t.$emit("hide",e),t.menu=e}}))})}}},render:function(){return this.editor?this.$scopedSlots.default({focused:this.editor.view.focused,focus:this.editor.focus,commands:this.editor.commands,isActive:this.editor.isActive,getMarkAttrs:this.editor.getMarkAttrs.bind(this.editor),menu:this.menu}):null},beforeDestroy:function(){this.editor.unregisterPlugin("floating_menu")}};exports.EditorFloatingMenu=re;
},{"prosemirror-state":"vbBo","prosemirror-view":"gYg9","prosemirror-model":"cBJM","prosemirror-dropcursor":"PYP9","prosemirror-gapcursor":"tBN2","prosemirror-keymap":"mh0X","prosemirror-commands":"JHGC","prosemirror-inputrules":"OOLA","tiptap-utils":"zVKP","vue":"NtAQ","tiptap-commands":"MsRp"}],"JIpZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=require("tiptap"),t=require("prosemirror-model"),o="recommendations",n={components:{EditorContent:e.EditorContent,EditorMenuBubble:e.EditorMenuBubble},data:function(){return{keepInBounds:!0,editor:null,recommendations:[]}},methods:{fixText:function(){var e=this.editor.state,t=e.selection,o=t.from,n=t.to,r=e.doc.textBetween(o,n," ");alert('Try fix "'+r+'"'),this.fetchData(r)},fetchData:function(e){console.log("Quering",e);var t=new XMLHttpRequest,n=this,r=new FormData;r.append("query",e),t.open("POST",o),t.onload=function(){n.recommendations=JSON.parse(t.responseText).recommendations,console.log(n.recommendations)},t.send(r)},replaceSelectionWithRec:function(e){var t=this.editor.state.tr.replaceSelection(),o=document.createElement("div");o.innerHTML=this.recommendations[e],t.insertText(o.textContent),this.editor.view.dispatch(t),this.recommendations=[]}},mounted:function(){this.editor=new e.Editor({content:"<p>This is just a boring paragraph</p>"})},beforeDestroy:function(){this.editor.destroy()}};exports.default=n;
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor"},[t.recommendations?n("ul",t._l(t.recommendations,function(e,i){return n("li",{key:i},[n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.replaceSelectionWithRec(i)}}},[n("div",{domProps:{innerHTML:t._s(e)}})])])}),0):t._e(),t._v(" "),n("editor-menu-bubble",{attrs:{editor:t.editor,"keep-in-bounds":t.keepInBounds},scopedSlots:t._u([{key:"default",fn:function(e){e.commands,e.isActive;var i=e.menu;return[n("div",{staticClass:"menububble",class:{"is-active":i.isActive},style:"left: "+i.left+"px; bottom: "+i.bottom+"px;"},[n("button",{staticClass:"menububble__button",class:{"is-active":!0},on:{click:t.fixText}},[n("p",[t._v("Fix this!")])])])]}}])}),t._v(" "),n("editor-content",{attrs:{editor:t.editor}})],1)},staticRenderFns:[],_compiled:!0,_scopeId:"data-v-b7d066",functional:void 0});})();
},{"tiptap":"fXr4","prosemirror-model":"cBJM"}],"Js2s":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("vue")),r=e(require("./Editor.vue"));exports.default=t.default.extend({components:{editor:r.default},data:function(){return{bundler:"Information Retrieval"}}});
(function(){var t=exports.default||module.exports;"function"==typeof t&&(t=t.options),Object.assign(t,{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"container"},[e("h1",[this._v(" Hello "+this._s(this.bundler)+" ")]),this._v(" "),e("editor")],1)},staticRenderFns:[],_compiled:!0,_scopeId:"data-v-2eac9a",functional:void 0});})();
},{"vue":"NtAQ","./Editor.vue":"JIpZ"}],"Focm":[function(require,module,exports) {
"use strict";require("./custom.styl");var e=r(require("vue")),u=r(require("./App.vue"));function r(e){return e&&e.__esModule?e:{default:e}}console.log("hello world"),new e.default({render:function(e){return e(u.default)}}).$mount("#app");
},{"./custom.styl":"wG02","vue":"NtAQ","./App.vue":"Js2s"}]},{},["Focm"], null)
//# sourceMappingURL=/frontend.d9d80994.js.map